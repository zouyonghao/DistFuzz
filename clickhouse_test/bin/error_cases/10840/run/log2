2021.07.13 11:39:40.234332 [ 1260178 ] {5d5b4d18-f15c-4d78-9782-6effce12d038} <Error> executeQuery: Code: 253, e.displayText() = DB::Exception: Replica /clickhouse/tables/01/test/replicas/03 already exists. (version 21.3.14.1) (from 127.0.0.1:42634) (in query: CREATE TABLE test.test (key UInt32, v UInt32) ENGINE=ReplicatedMergeTree('/clickhouse/tables/{shard}/test', '{replica}') ORDER BY key), Stack trace (when copying this message, always include the lines below):

0. /home/zyh/ClickHouse/build/../contrib/libcxx/include/exception:133: std::exception::capture() @ 0x96ef2c8 in /home/zyh/ClickHouse/build/programs/clickhouse
1. /home/zyh/ClickHouse/build/../contrib/libcxx/include/exception:111: std::exception::exception() @ 0x96ef295 in /home/zyh/ClickHouse/build/programs/clickhouse
2. /home/zyh/ClickHouse/build/../contrib/poco/Foundation/src/Exception.cpp:27: Poco::Exception::Exception(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, int) @ 0x129781d3 in /home/zyh/ClickHouse/build/programs/clickhouse
3. /home/zyh/ClickHouse/build/../src/Common/Exception.cpp:54: DB::Exception::Exception(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, int, bool) @ 0x96d1390 in /home/zyh/ClickHouse/build/programs/clickhouse
4. /home/zyh/ClickHouse/build/../src/Storages/StorageReplicatedMergeTree.cpp:737: DB::StorageReplicatedMergeTree::createReplica(std::__1::shared_ptr<DB::StorageInMemoryMetadata const> const&) @ 0x11a9c8c7 in /home/zyh/ClickHouse/build/programs/clickhouse
5. /home/zyh/ClickHouse/build/../src/Storages/StorageReplicatedMergeTree.cpp:405: DB::StorageReplicatedMergeTree::StorageReplicatedMergeTree(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, bool, DB::StorageID const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, DB::StorageInMemoryMetadata const&, DB::Context&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, DB::MergeTreeData::MergingParams const&, std::__1::unique_ptr<DB::MergeTreeSettings, std::__1::default_delete<DB::MergeTreeSettings> >, bool, bool) @ 0x11a96ea2 in /home/zyh/ClickHouse/build/programs/clickhouse
6. /home/zyh/ClickHouse/build/../base/common/../ext/shared_ptr_helper.h:19: std::__1::shared_ptr<DB::StorageReplicatedMergeTree> ext::shared_ptr_helper<DB::StorageReplicatedMergeTree>::create<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&, bool const&, DB::StorageID const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, DB::StorageInMemoryMetadata&, DB::Context&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&, DB::MergeTreeData::MergingParams&, std::__1::unique_ptr<DB::MergeTreeSettings, std::__1::default_delete<DB::MergeTreeSettings> >, bool const&, bool&>(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&, bool const&, DB::StorageID const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, DB::StorageInMemoryMetadata&, DB::Context&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&, DB::MergeTreeData::MergingParams&, std::__1::unique_ptr<DB::MergeTreeSettings, std::__1::default_delete<DB::MergeTreeSettings> >&&, bool const&, bool&) @ 0x11eeddab in /home/zyh/ClickHouse/build/programs/clickhouse
7. /home/zyh/ClickHouse/build/../src/Storages/MergeTree/registerStorageMergeTree.cpp:742: DB::create(DB::StorageFactory::Arguments const&) @ 0x11eea170 in /home/zyh/ClickHouse/build/programs/clickhouse
8. /home/zyh/ClickHouse/build/../contrib/libcxx/include/type_traits:3676: decltype(std::__1::forward<std::__1::shared_ptr<DB::IStorage> (*&)(DB::StorageFactory::Arguments const&)>(fp)(std::__1::forward<DB::StorageFactory::Arguments const&>(fp0))) std::__1::__invoke<std::__1::shared_ptr<DB::IStorage> (*&)(DB::StorageFactory::Arguments const&), DB::StorageFactory::Arguments const&>(std::__1::shared_ptr<DB::IStorage> (*&)(DB::StorageFactory::Arguments const&), DB::StorageFactory::Arguments const&) @ 0x11ef1d62 in /home/zyh/ClickHouse/build/programs/clickhouse
9. /home/zyh/ClickHouse/build/../contrib/libcxx/include/__functional_base:317: std::__1::shared_ptr<DB::IStorage> std::__1::__invoke_void_return_wrapper<std::__1::shared_ptr<DB::IStorage> >::__call<std::__1::shared_ptr<DB::IStorage> (*&)(DB::StorageFactory::Arguments const&), DB::StorageFactory::Arguments const&>(std::__1::shared_ptr<DB::IStorage> (*&)(DB::StorageFactory::Arguments const&), DB::StorageFactory::Arguments const&) @ 0x11ef1d12 in /home/zyh/ClickHouse/build/programs/clickhouse
10. /home/zyh/ClickHouse/build/../contrib/libcxx/include/functional:1608: std::__1::__function::__default_alloc_func<std::__1::shared_ptr<DB::IStorage> (*)(DB::StorageFactory::Arguments const&), std::__1::shared_ptr<DB::IStorage> (DB::StorageFactory::Arguments const&)>::operator()(DB::StorageFactory::Arguments const&) @ 0x11ef1cc0 in /home/zyh/ClickHouse/build/programs/clickhouse
11. /home/zyh/ClickHouse/build/../contrib/libcxx/include/functional:2089: std::__1::shared_ptr<DB::IStorage> std::__1::__function::__policy_invoker<std::__1::shared_ptr<DB::IStorage> (DB::StorageFactory::Arguments const&)>::__call_impl<std::__1::__function::__default_alloc_func<std::__1::shared_ptr<DB::IStorage> (*)(DB::StorageFactory::Arguments const&), std::__1::shared_ptr<DB::IStorage> (DB::StorageFactory::Arguments const&)> >(std::__1::__function::__policy_storage const*, DB::StorageFactory::Arguments const&) @ 0x11ef1c78 in /home/zyh/ClickHouse/build/programs/clickhouse
12. /home/zyh/ClickHouse/build/../contrib/libcxx/include/functional:2221: std::__1::__function::__policy_func<std::__1::shared_ptr<DB::IStorage> (DB::StorageFactory::Arguments const&)>::operator()(DB::StorageFactory::Arguments const&) const @ 0x119ba2fe in /home/zyh/ClickHouse/build/programs/clickhouse
13. /home/zyh/ClickHouse/build/../contrib/libcxx/include/functional:2560: std::__1::function<std::__1::shared_ptr<DB::IStorage> (DB::StorageFactory::Arguments const&)>::operator()(DB::StorageFactory::Arguments const&) const @ 0x119b7400 in /home/zyh/ClickHouse/build/programs/clickhouse
14. /home/zyh/ClickHouse/build/../src/Storages/StorageFactory.cpp:183: DB::StorageFactory::get(DB::ASTCreateQuery const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, DB::Context&, DB::Context&, DB::ColumnsDescription const&, DB::ConstraintsDescription const&, bool) const @ 0x119b5b52 in /home/zyh/ClickHouse/build/programs/clickhouse
15. /home/zyh/ClickHouse/build/../src/Interpreters/InterpreterCreateQuery.cpp:979: DB::InterpreterCreateQuery::doCreateTable(DB::ASTCreateQuery&, DB::InterpreterCreateQuery::TableProperties const&) @ 0x10eb6085 in /home/zyh/ClickHouse/build/programs/clickhouse
16. /home/zyh/ClickHouse/build/../src/Interpreters/InterpreterCreateQuery.cpp:893: DB::InterpreterCreateQuery::createTable(DB::ASTCreateQuery&) @ 0x10eb4849 in /home/zyh/ClickHouse/build/programs/clickhouse
17. /home/zyh/ClickHouse/build/../src/Interpreters/InterpreterCreateQuery.cpp:1197: DB::InterpreterCreateQuery::execute() @ 0x10eb77d5 in /home/zyh/ClickHouse/build/programs/clickhouse
18. /home/zyh/ClickHouse/build/../src/Interpreters/executeQuery.cpp:550: DB::executeQueryImpl(char const*, char const*, DB::Context&, bool, DB::QueryProcessingStage::Enum, bool, DB::ReadBuffer*) @ 0x116d7cf1 in /home/zyh/ClickHouse/build/programs/clickhouse
19. /home/zyh/ClickHouse/build/../src/Interpreters/executeQuery.cpp:908: DB::executeQuery(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, DB::Context&, bool, DB::QueryProcessingStage::Enum, bool) @ 0x116d61ba in /home/zyh/ClickHouse/build/programs/clickhouse
20. /home/zyh/ClickHouse/build/../src/Server/TCPHandler.cpp:290: DB::TCPHandler::runImpl() @ 0x11ffce32 in /home/zyh/ClickHouse/build/programs/clickhouse
21. /home/zyh/ClickHouse/build/../src/Server/TCPHandler.cpp:1531: DB::TCPHandler::run() @ 0x12008c08 in /home/zyh/ClickHouse/build/programs/clickhouse
22. /home/zyh/ClickHouse/build/../contrib/poco/Net/src/TCPServerConnection.cpp:43: Poco::Net::TCPServerConnection::start() @ 0x127b305c in /home/zyh/ClickHouse/build/programs/clickhouse
23. /home/zyh/ClickHouse/build/../contrib/poco/Net/src/TCPServerDispatcher.cpp:113: Poco::Net::TCPServerDispatcher::run() @ 0x127b3860 in /home/zyh/ClickHouse/build/programs/clickhouse
24. /home/zyh/ClickHouse/build/../contrib/poco/Foundation/src/ThreadPool.cpp:199: Poco::PooledThread::run() @ 0x129fdfd3 in /home/zyh/ClickHouse/build/programs/clickhouse
25. /home/zyh/ClickHouse/build/../contrib/poco/Foundation/src/Thread.cpp:56: Poco::(anonymous namespace)::RunnableHolder::run() @ 0x129fae5d in /home/zyh/ClickHouse/build/programs/clickhouse
26. /home/zyh/ClickHouse/build/../contrib/poco/Foundation/src/Thread_POSIX.cpp:345: Poco::ThreadImpl::runnableEntry(void*) @ 0x129f9ce8 in /home/zyh/ClickHouse/build/programs/clickhouse
27. start_thread @ 0x9609 in /usr/lib/x86_64-linux-gnu/libpthread-2.31.so
28. clone @ 0x122293 in /usr/lib/x86_64-linux-gnu/libc-2.31.so

2021.07.13 11:39:40.234913 [ 1260178 ] {5d5b4d18-f15c-4d78-9782-6effce12d038} <Error> TCPHandler: Code: 253, e.displayText() = DB::Exception: Replica /clickhouse/tables/01/test/replicas/03 already exists., Stack trace:

0. /home/zyh/ClickHouse/build/../contrib/libcxx/include/exception:133: std::exception::capture() @ 0x96ef2c8 in /home/zyh/ClickHouse/build/programs/clickhouse
1. /home/zyh/ClickHouse/build/../contrib/libcxx/include/exception:111: std::exception::exception() @ 0x96ef295 in /home/zyh/ClickHouse/build/programs/clickhouse
2. /home/zyh/ClickHouse/build/../contrib/poco/Foundation/src/Exception.cpp:27: Poco::Exception::Exception(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, int) @ 0x129781d3 in /home/zyh/ClickHouse/build/programs/clickhouse
3. /home/zyh/ClickHouse/build/../src/Common/Exception.cpp:54: DB::Exception::Exception(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, int, bool) @ 0x96d1390 in /home/zyh/ClickHouse/build/programs/clickhouse
4. /home/zyh/ClickHouse/build/../src/Storages/StorageReplicatedMergeTree.cpp:737: DB::StorageReplicatedMergeTree::createReplica(std::__1::shared_ptr<DB::StorageInMemoryMetadata const> const&) @ 0x11a9c8c7 in /home/zyh/ClickHouse/build/programs/clickhouse
5. /home/zyh/ClickHouse/build/../src/Storages/StorageReplicatedMergeTree.cpp:405: DB::StorageReplicatedMergeTree::StorageReplicatedMergeTree(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, bool, DB::StorageID const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, DB::StorageInMemoryMetadata const&, DB::Context&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, DB::MergeTreeData::MergingParams const&, std::__1::unique_ptr<DB::MergeTreeSettings, std::__1::default_delete<DB::MergeTreeSettings> >, bool, bool) @ 0x11a96ea2 in /home/zyh/ClickHouse/build/programs/clickhouse
6. /home/zyh/ClickHouse/build/../base/common/../ext/shared_ptr_helper.h:19: std::__1::shared_ptr<DB::StorageReplicatedMergeTree> ext::shared_ptr_helper<DB::StorageReplicatedMergeTree>::create<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&, bool const&, DB::StorageID const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, DB::StorageInMemoryMetadata&, DB::Context&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&, DB::MergeTreeData::MergingParams&, std::__1::unique_ptr<DB::MergeTreeSettings, std::__1::default_delete<DB::MergeTreeSettings> >, bool const&, bool&>(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&, bool const&, DB::StorageID const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, DB::StorageInMemoryMetadata&, DB::Context&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&, DB::MergeTreeData::MergingParams&, std::__1::unique_ptr<DB::MergeTreeSettings, std::__1::default_delete<DB::MergeTreeSettings> >&&, bool const&, bool&) @ 0x11eeddab in /home/zyh/ClickHouse/build/programs/clickhouse
7. /home/zyh/ClickHouse/build/../src/Storages/MergeTree/registerStorageMergeTree.cpp:742: DB::create(DB::StorageFactory::Arguments const&) @ 0x11eea170 in /home/zyh/ClickHouse/build/programs/clickhouse
8. /home/zyh/ClickHouse/build/../contrib/libcxx/include/type_traits:3676: decltype(std::__1::forward<std::__1::shared_ptr<DB::IStorage> (*&)(DB::StorageFactory::Arguments const&)>(fp)(std::__1::forward<DB::StorageFactory::Arguments const&>(fp0))) std::__1::__invoke<std::__1::shared_ptr<DB::IStorage> (*&)(DB::StorageFactory::Arguments const&), DB::StorageFactory::Arguments const&>(std::__1::shared_ptr<DB::IStorage> (*&)(DB::StorageFactory::Arguments const&), DB::StorageFactory::Arguments const&) @ 0x11ef1d62 in /home/zyh/ClickHouse/build/programs/clickhouse
9. /home/zyh/ClickHouse/build/../contrib/libcxx/include/__functional_base:317: std::__1::shared_ptr<DB::IStorage> std::__1::__invoke_void_return_wrapper<std::__1::shared_ptr<DB::IStorage> >::__call<std::__1::shared_ptr<DB::IStorage> (*&)(DB::StorageFactory::Arguments const&), DB::StorageFactory::Arguments const&>(std::__1::shared_ptr<DB::IStorage> (*&)(DB::StorageFactory::Arguments const&), DB::StorageFactory::Arguments const&) @ 0x11ef1d12 in /home/zyh/ClickHouse/build/programs/clickhouse
10. /home/zyh/ClickHouse/build/../contrib/libcxx/include/functional:1608: std::__1::__function::__default_alloc_func<std::__1::shared_ptr<DB::IStorage> (*)(DB::StorageFactory::Arguments const&), std::__1::shared_ptr<DB::IStorage> (DB::StorageFactory::Arguments const&)>::operator()(DB::StorageFactory::Arguments const&) @ 0x11ef1cc0 in /home/zyh/ClickHouse/build/programs/clickhouse
11. /home/zyh/ClickHouse/build/../contrib/libcxx/include/functional:2089: std::__1::shared_ptr<DB::IStorage> std::__1::__function::__policy_invoker<std::__1::shared_ptr<DB::IStorage> (DB::StorageFactory::Arguments const&)>::__call_impl<std::__1::__function::__default_alloc_func<std::__1::shared_ptr<DB::IStorage> (*)(DB::StorageFactory::Arguments const&), std::__1::shared_ptr<DB::IStorage> (DB::StorageFactory::Arguments const&)> >(std::__1::__function::__policy_storage const*, DB::StorageFactory::Arguments const&) @ 0x11ef1c78 in /home/zyh/ClickHouse/build/programs/clickhouse
12. /home/zyh/ClickHouse/build/../contrib/libcxx/include/functional:2221: std::__1::__function::__policy_func<std::__1::shared_ptr<DB::IStorage> (DB::StorageFactory::Arguments const&)>::operator()(DB::StorageFactory::Arguments const&) const @ 0x119ba2fe in /home/zyh/ClickHouse/build/programs/clickhouse
13. /home/zyh/ClickHouse/build/../contrib/libcxx/include/functional:2560: std::__1::function<std::__1::shared_ptr<DB::IStorage> (DB::StorageFactory::Arguments const&)>::operator()(DB::StorageFactory::Arguments const&) const @ 0x119b7400 in /home/zyh/ClickHouse/build/programs/clickhouse
14. /home/zyh/ClickHouse/build/../src/Storages/StorageFactory.cpp:183: DB::StorageFactory::get(DB::ASTCreateQuery const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, DB::Context&, DB::Context&, DB::ColumnsDescription const&, DB::ConstraintsDescription const&, bool) const @ 0x119b5b52 in /home/zyh/ClickHouse/build/programs/clickhouse
15. /home/zyh/ClickHouse/build/../src/Interpreters/InterpreterCreateQuery.cpp:979: DB::InterpreterCreateQuery::doCreateTable(DB::ASTCreateQuery&, DB::InterpreterCreateQuery::TableProperties const&) @ 0x10eb6085 in /home/zyh/ClickHouse/build/programs/clickhouse
16. /home/zyh/ClickHouse/build/../src/Interpreters/InterpreterCreateQuery.cpp:893: DB::InterpreterCreateQuery::createTable(DB::ASTCreateQuery&) @ 0x10eb4849 in /home/zyh/ClickHouse/build/programs/clickhouse
17. /home/zyh/ClickHouse/build/../src/Interpreters/InterpreterCreateQuery.cpp:1197: DB::InterpreterCreateQuery::execute() @ 0x10eb77d5 in /home/zyh/ClickHouse/build/programs/clickhouse
18. /home/zyh/ClickHouse/build/../src/Interpreters/executeQuery.cpp:550: DB::executeQueryImpl(char const*, char const*, DB::Context&, bool, DB::QueryProcessingStage::Enum, bool, DB::ReadBuffer*) @ 0x116d7cf1 in /home/zyh/ClickHouse/build/programs/clickhouse
19. /home/zyh/ClickHouse/build/../src/Interpreters/executeQuery.cpp:908: DB::executeQuery(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, DB::Context&, bool, DB::QueryProcessingStage::Enum, bool) @ 0x116d61ba in /home/zyh/ClickHouse/build/programs/clickhouse
20. /home/zyh/ClickHouse/build/../src/Server/TCPHandler.cpp:290: DB::TCPHandler::runImpl() @ 0x11ffce32 in /home/zyh/ClickHouse/build/programs/clickhouse
21. /home/zyh/ClickHouse/build/../src/Server/TCPHandler.cpp:1531: DB::TCPHandler::run() @ 0x12008c08 in /home/zyh/ClickHouse/build/programs/clickhouse
22. /home/zyh/ClickHouse/build/../contrib/poco/Net/src/TCPServerConnection.cpp:43: Poco::Net::TCPServerConnection::start() @ 0x127b305c in /home/zyh/ClickHouse/build/programs/clickhouse
23. /home/zyh/ClickHouse/build/../contrib/poco/Net/src/TCPServerDispatcher.cpp:113: Poco::Net::TCPServerDispatcher::run() @ 0x127b3860 in /home/zyh/ClickHouse/build/programs/clickhouse
24. /home/zyh/ClickHouse/build/../contrib/poco/Foundation/src/ThreadPool.cpp:199: Poco::PooledThread::run() @ 0x129fdfd3 in /home/zyh/ClickHouse/build/programs/clickhouse
25. /home/zyh/ClickHouse/build/../contrib/poco/Foundation/src/Thread.cpp:56: Poco::(anonymous namespace)::RunnableHolder::run() @ 0x129fae5d in /home/zyh/ClickHouse/build/programs/clickhouse
26. /home/zyh/ClickHouse/build/../contrib/poco/Foundation/src/Thread_POSIX.cpp:345: Poco::ThreadImpl::runnableEntry(void*) @ 0x129f9ce8 in /home/zyh/ClickHouse/build/programs/clickhouse
27. start_thread @ 0x9609 in /usr/lib/x86_64-linux-gnu/libpthread-2.31.so
28. clone @ 0x122293 in /usr/lib/x86_64-linux-gnu/libc-2.31.so

