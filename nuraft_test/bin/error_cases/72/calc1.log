symbol_init success!
Reading random file random_node0.txt
[33m[FUZZ PRINT] shm declare[0m
shmEnabled!
init_in_main success!
    -- Replicated Calculator with Raft --
                         Version 0.1.0
    Server ID:    1
    Endpoint:     127.0.1.1:10001
init Raft instance ..symbol_init success!
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 1 at 0x7f7f307dc009 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f307dc008 by main thread:
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:963:5 (calc_server+0x4eb9e6)
    #4 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #5 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #6 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #7 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #8 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #9 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #10 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #14 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #15 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
 done
[32mcalc 1> [0m==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f307dd018 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f307dd018 by main thread:
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::asio_rpc_listener::asio_rpc_listener(nuraft::asio_service_impl*, asio::io_context&, asio::ssl::context&, unsigned short, bool, std::shared_ptr<nuraft::logger>&) /home/zyh/NuRaft/src/asio_service.cxx:705:9 (calc_server+0x5e1668)
    #5 void __gnu_cxx::new_allocator<nuraft::asio_rpc_listener>::construct<nuraft::asio_rpc_listener, nuraft::asio_service_impl*&, asio::io_context&, asio::ssl::context&, unsigned short&, bool&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_rpc_listener*, nuraft::asio_service_impl*&, asio::io_context&, asio::ssl::context&, unsigned short&, bool&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x5e0c56)
    #6 void std::allocator_traits<std::allocator<nuraft::asio_rpc_listener> >::construct<nuraft::asio_rpc_listener, nuraft::asio_service_impl*&, asio::io_context&, asio::ssl::context&, unsigned short&, bool&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_rpc_listener>&, nuraft::asio_rpc_listener*, nuraft::asio_service_impl*&, asio::io_context&, asio::ssl::context&, unsigned short&, bool&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x5e0c56)
    #7 std::_Sp_counted_ptr_inplace<nuraft::asio_rpc_listener, std::allocator<nuraft::asio_rpc_listener>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::asio_service_impl*&, asio::io_context&, asio::ssl::context&, unsigned short&, bool&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_rpc_listener>, nuraft::asio_service_impl*&, asio::io_context&, asio::ssl::context&, unsigned short&, bool&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x5e0c56)
    #8 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::asio_rpc_listener, std::allocator<nuraft::asio_rpc_listener>, nuraft::asio_service_impl*&, asio::io_context&, asio::ssl::context&, unsigned short&, bool&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, nuraft::asio_rpc_listener*, std::allocator<nuraft::asio_rpc_listener> const&, nuraft::asio_service_impl*&, asio::io_context&, asio::ssl::context&, unsigned short&, bool&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x5e0c56)
    #9 std::__shared_ptr<nuraft::asio_rpc_listener, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::asio_rpc_listener>, nuraft::asio_service_impl*&, asio::io_context&, asio::ssl::context&, unsigned short&, bool&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_rpc_listener> const&, nuraft::asio_service_impl*&, asio::io_context&, asio::ssl::context&, unsigned short&, bool&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x5e0c56)
    #10 std::shared_ptr<nuraft::asio_rpc_listener>::shared_ptr<std::allocator<nuraft::asio_rpc_listener>, nuraft::asio_service_impl*&, asio::io_context&, asio::ssl::context&, unsigned short&, bool&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_rpc_listener> const&, nuraft::asio_service_impl*&, asio::io_context&, asio::ssl::context&, unsigned short&, bool&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x580c66)
    #11 std::shared_ptr<nuraft::asio_rpc_listener> std::allocate_shared<nuraft::asio_rpc_listener, std::allocator<nuraft::asio_rpc_listener>, nuraft::asio_service_impl*&, asio::io_context&, asio::ssl::context&, unsigned short&, bool&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_rpc_listener> const&, nuraft::asio_service_impl*&, asio::io_context&, asio::ssl::context&, unsigned short&, bool&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x580c66)
    #12 std::shared_ptr<nuraft::asio_rpc_listener> std::make_shared<nuraft::asio_rpc_listener, nuraft::asio_service_impl*&, asio::io_context&, asio::ssl::context&, unsigned short&, bool&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_impl*&, asio::io_context&, asio::ssl::context&, unsigned short&, bool&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x580c66)
    #13 std::shared_ptr<nuraft::asio_rpc_listener> nuraft::cs_new<nuraft::asio_rpc_listener, nuraft::asio_service_impl*&, asio::io_context&, asio::ssl::context&, unsigned short&, bool&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_impl*&, asio::io_context&, asio::ssl::context&, unsigned short&, bool&, std::shared_ptr<nuraft::logger>&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x580c66)
    #14 nuraft::asio_service::create_rpc_listener(unsigned short, std::shared_ptr<nuraft::logger>&) /home/zyh/NuRaft/src/asio_service.cxx:1786:16 (calc_server+0x580c66)
    #15 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:39:33 (calc_server+0x5247f9)
    #16 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #17 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f307de028 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f307de028 by main thread:
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::apply_and_log_current_params() /home/zyh/NuRaft/src/raft_server.cxx:340:5 (calc_server+0x533fde)
    #5 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:114:5 (calc_server+0x529c27)
    #6 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #7 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #8 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #10 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #11 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #12 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #13 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #14 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #15 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #16 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #17 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
async request is in progress (check with `list` command)
[32mcalc 1> [0m==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f307df038 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f307df038 by main thread:
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::update_rand_timeout() /home/zyh/NuRaft/src/raft_server.cxx:315:5 (calc_server+0x534b55)
    #5 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:115:5 (calc_server+0x529c44)
    #6 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #7 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #8 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #10 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #11 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #12 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #13 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #14 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #15 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #16 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #17 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f307e0048 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f307e0048 by main thread:
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:141:5 (calc_server+0x52ab74)
    #5 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #6 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #7 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #8 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #9 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #10 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #11 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #12 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #13 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #14 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f307e1058 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f307e1058 by main thread:
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:234:5 (calc_server+0x52ccba)
    #5 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #6 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #7 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #8 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #9 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #10 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #11 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #12 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #13 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #14 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f307e2068 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f307e2068 by main thread:
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::start_server(bool) /home/zyh/NuRaft/src/raft_server.cxx:252:9 (calc_server+0x535e97)
    #5 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #6 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #7 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #8 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #10 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #11 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #12 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #13 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #14 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #15 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #16 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #17 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f307e3078 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f307e3078 by main thread:
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::start_server(bool) /home/zyh/NuRaft/src/raft_server.cxx:277:9 (calc_server+0x536c87)
    #5 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #6 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #7 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #8 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #10 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #11 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #12 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #13 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #14 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #15 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #16 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #17 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f307e4088 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f307e4088 by thread T8:
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::append_entries_in_bg() /home/zyh/NuRaft/src/handle_append_entries.cxx:47:5 (calc_server+0x629461)
    #5 void std::__invoke_impl<void, void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(std::__invoke_memfun_deref, void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x5700b4)
    #6 std::__invoke_result<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>::type std::__invoke<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5700b4)
    #7 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x5700b4)
    #8 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x5700b4)
    #9 void std::__invoke_impl<void, std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >(std::__invoke_other, std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x5700b4)
    #10 std::__invoke_result<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >::type std::__invoke<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >(std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5700b4)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x5700b4)
    #12 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x5700b4)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x5700b4)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T8 'nuraft_append' (tid=83720, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #3 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #4 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #5 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #6 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #7 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #8 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #9 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #10 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #11 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #12 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #13 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #14 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f307e5098 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f307e5098 by main thread (mutexes: write M133):
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::restart_election_timer() /home/zyh/NuRaft/src/handle_timeout.cxx:164:5 (calc_server+0x6bcc42)
    #5 nuraft::raft_server::start_server(bool) /home/zyh/NuRaft/src/raft_server.cxx:283:9 (calc_server+0x536ee2)
    #6 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #7 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #8 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #9 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #10 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #11 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #12 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #13 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #14 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #15 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #16 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Mutex M133 (0x7b6c000003c8) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x6bb458)
    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:810:10 (calc_server+0x6bb458)
    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/mutex:107:17 (calc_server+0x6bb458)
    #4 std::unique_lock<std::recursive_mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x6bb458)
    #5 std::unique_lock<std::recursive_mutex>::unique_lock(std::recursive_mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x6bb458)
    #6 nuraft::raft_server::restart_election_timer() /home/zyh/NuRaft/src/handle_timeout.cxx:136:5 (calc_server+0x6bb458)
    #7 nuraft::raft_server::start_server(bool) /home/zyh/NuRaft/src/raft_server.cxx:283:9 (calc_server+0x536ee2)
    #8 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #9 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #10 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #11 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #13 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #14 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #15 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #16 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #17 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f307e60a8 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f307e60a8 by thread T3 (mutexes: write M133):
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::handle_election_timeout() /home/zyh/NuRaft/src/handle_timeout.cxx:266:9 (calc_server+0x6bfe80)
    #5 void std::__invoke_impl<void, void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(std::__invoke_memfun_deref, void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x569706)
    #6 std::__invoke_result<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>::type std::__invoke<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x569706)
    #7 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x569706)
    #8 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x569706)
    #9 std::_Function_handler<void (), std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >::_M_invoke(std::_Any_data const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:316:2 (calc_server+0x569706)
    #10 std::function<void ()>::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:706:14 (calc_server+0x57258a)
    #11 nuraft::timer_task<void>::exec() /home/zyh/NuRaft/include/libnuraft/timer_task.hxx:62:13 (calc_server+0x57258a)
    #12 nuraft::delayed_task::execute() /home/zyh/NuRaft/include/libnuraft/delayed_task.hxx:54:13 (calc_server+0x57982d)
    #13 _timer_handler_(std::shared_ptr<nuraft::delayed_task>&, std::error_code) /home/zyh/NuRaft/src/asio_service.cxx:1504:15 (calc_server+0x57982d)
    #14 void std::__invoke_impl<void, void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>(std::__invoke_other, void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595986)
    #15 std::__invoke_result<void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>::type std::__invoke<void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>(void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595986)
    #16 void std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>::__call<void, std::error_code const&, 0ul, 1ul>(std::tuple<std::error_code const&>&&, std::_Index_tuple<0ul, 1ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595986)
    #17 void std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>::operator()<std::error_code const&, void>(std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595986)
    #18 asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>::operator()() /home/zyh/NuRaft/asio/asio/include/asio/detail/bind_handler.hpp:64:5 (calc_server+0x595986)
    #19 void asio::asio_handler_invoke<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, ...) /home/zyh/NuRaft/asio/asio/include/asio/handler_invoke_hook.hpp:68:3 (calc_server+0x595986)
    #20 void asio_handler_invoke_helpers::invoke<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_invoke_helpers.hpp:37:3 (calc_server+0x595986)
    #21 void asio::detail::handler_work<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, asio::system_executor>::complete<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_work.hpp:81:5 (calc_server+0x595986)
    #22 asio::detail::wait_handler<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)> >::do_complete(void*, asio::detail::scheduler_operation*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/wait_handler.hpp:71:9 (calc_server+0x595986)
    #23 asio::detail::scheduler_operation::complete(void*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/scheduler_operation.hpp:39:5 (calc_server+0x589d9b)
    #24 asio::detail::scheduler::do_run_one(asio::detail::conditionally_enabled_mutex::scoped_lock&, asio::detail::scheduler_thread_info&, std::error_code const&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:400:12 (calc_server+0x589d9b)
    #25 asio::detail::scheduler::run(std::error_code&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:153:10 (calc_server+0x588c2a)
    #26 asio::io_context::run() /home/zyh/NuRaft/asio/asio/include/asio/impl/io_context.ipp:61:24 (calc_server+0x57babf)
    #27 nuraft::asio_service_impl::worker_entry() /home/zyh/NuRaft/src/asio_service.cxx:1607:21 (calc_server+0x57babf)
    #28 void std::__invoke_impl<void, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(std::__invoke_memfun_deref, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x595134)
    #29 std::__invoke_result<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>::type std::__invoke<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #30 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595134)
    #31 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595134)
    #32 void std::__invoke_impl<void, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::__invoke_other, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595134)
    #33 std::__invoke_result<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >::type std::__invoke<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #34 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x595134)
    #35 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x595134)
    #36 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x595134)
    #37 <null> <null> (libstdc++.so.6+0xbd6de)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Mutex M133 (0x7b6c000003c8) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x6bb458)
    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:810:10 (calc_server+0x6bb458)
    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/mutex:107:17 (calc_server+0x6bb458)
    #4 std::unique_lock<std::recursive_mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x6bb458)
    #5 std::unique_lock<std::recursive_mutex>::unique_lock(std::recursive_mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x6bb458)
    #6 nuraft::raft_server::restart_election_timer() /home/zyh/NuRaft/src/handle_timeout.cxx:136:5 (calc_server+0x6bb458)
    #7 nuraft::raft_server::start_server(bool) /home/zyh/NuRaft/src/raft_server.cxx:283:9 (calc_server+0x536ee2)
    #8 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #9 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #10 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #11 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #13 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #14 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #15 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #16 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #17 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T3 'nuraft_w_0' (tid=83709, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 std::__shared_ptr<std::thread, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x57a46a)
    #3 std::shared_ptr<std::thread>::shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x57a46a)
    #4 std::shared_ptr<std::thread> std::allocate_shared<std::thread, std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x57a46a)
    #5 std::shared_ptr<std::thread> std::make_shared<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x57a46a)
    #6 std::shared_ptr<std::thread> nuraft::cs_new<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x57a46a)
    #7 nuraft::asio_service_impl::asio_service_impl(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1573:13 (calc_server+0x57a46a)
    #8 nuraft::asio_service::asio_service(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1693:17 (calc_server+0x57df93)
    #9 void __gnu_cxx::new_allocator<nuraft::asio_service>::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527802)
    #10 void std::allocator_traits<std::allocator<nuraft::asio_service> >::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>&, nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x5244ec)
    #11 std::_Sp_counted_ptr_inplace<nuraft::asio_service, std::allocator<nuraft::asio_service>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x5244ec)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, nuraft::asio_service*, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x5244ec)
    #13 std::__shared_ptr<nuraft::asio_service, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x5244ec)
    #14 std::shared_ptr<nuraft::asio_service>::shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x5244ec)
    #15 std::shared_ptr<nuraft::asio_service> std::allocate_shared<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x5244ec)
    #16 std::shared_ptr<nuraft::asio_service> std::make_shared<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x5244ec)
    #17 std::shared_ptr<nuraft::asio_service> nuraft::cs_new<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x5244ec)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:38:17 (calc_server+0x5244ec)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f307e70b8 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f307e70b8 by thread T3 (mutexes: write M133):
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::decay_target_priority() /home/zyh/NuRaft/src/handle_priority.cxx:211:5 (calc_server+0x6a3103)
    #5 nuraft::raft_server::handle_election_timeout() /home/zyh/NuRaft/src/handle_timeout.cxx:269:13 (calc_server+0x6c004a)
    #6 void std::__invoke_impl<void, void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(std::__invoke_memfun_deref, void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x569706)
    #7 std::__invoke_result<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>::type std::__invoke<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x569706)
    #8 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x569706)
    #9 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x569706)
    #10 std::_Function_handler<void (), std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >::_M_invoke(std::_Any_data const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:316:2 (calc_server+0x569706)
    #11 std::function<void ()>::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:706:14 (calc_server+0x57258a)
    #12 nuraft::timer_task<void>::exec() /home/zyh/NuRaft/include/libnuraft/timer_task.hxx:62:13 (calc_server+0x57258a)
    #13 nuraft::delayed_task::execute() /home/zyh/NuRaft/include/libnuraft/delayed_task.hxx:54:13 (calc_server+0x57982d)
    #14 _timer_handler_(std::shared_ptr<nuraft::delayed_task>&, std::error_code) /home/zyh/NuRaft/src/asio_service.cxx:1504:15 (calc_server+0x57982d)
    #15 void std::__invoke_impl<void, void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>(std::__invoke_other, void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595986)
    #16 std::__invoke_result<void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>::type std::__invoke<void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>(void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595986)
    #17 void std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>::__call<void, std::error_code const&, 0ul, 1ul>(std::tuple<std::error_code const&>&&, std::_Index_tuple<0ul, 1ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595986)
    #18 void std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>::operator()<std::error_code const&, void>(std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595986)
    #19 asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>::operator()() /home/zyh/NuRaft/asio/asio/include/asio/detail/bind_handler.hpp:64:5 (calc_server+0x595986)
    #20 void asio::asio_handler_invoke<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, ...) /home/zyh/NuRaft/asio/asio/include/asio/handler_invoke_hook.hpp:68:3 (calc_server+0x595986)
    #21 void asio_handler_invoke_helpers::invoke<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_invoke_helpers.hpp:37:3 (calc_server+0x595986)
    #22 void asio::detail::handler_work<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, asio::system_executor>::complete<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_work.hpp:81:5 (calc_server+0x595986)
    #23 asio::detail::wait_handler<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)> >::do_complete(void*, asio::detail::scheduler_operation*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/wait_handler.hpp:71:9 (calc_server+0x595986)
    #24 asio::detail::scheduler_operation::complete(void*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/scheduler_operation.hpp:39:5 (calc_server+0x589d9b)
    #25 asio::detail::scheduler::do_run_one(asio::detail::conditionally_enabled_mutex::scoped_lock&, asio::detail::scheduler_thread_info&, std::error_code const&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:400:12 (calc_server+0x589d9b)
    #26 asio::detail::scheduler::run(std::error_code&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:153:10 (calc_server+0x588c2a)
    #27 asio::io_context::run() /home/zyh/NuRaft/asio/asio/include/asio/impl/io_context.ipp:61:24 (calc_server+0x57babf)
    #28 nuraft::asio_service_impl::worker_entry() /home/zyh/NuRaft/src/asio_service.cxx:1607:21 (calc_server+0x57babf)
    #29 void std::__invoke_impl<void, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(std::__invoke_memfun_deref, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x595134)
    #30 std::__invoke_result<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>::type std::__invoke<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #31 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595134)
    #32 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595134)
    #33 void std::__invoke_impl<void, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::__invoke_other, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595134)
    #34 std::__invoke_result<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >::type std::__invoke<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #35 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x595134)
    #36 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x595134)
    #37 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x595134)
    #38 <null> <null> (libstdc++.so.6+0xbd6de)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Mutex M133 (0x7b6c000003c8) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x6bb458)
    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:810:10 (calc_server+0x6bb458)
    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/mutex:107:17 (calc_server+0x6bb458)
    #4 std::unique_lock<std::recursive_mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x6bb458)
    #5 std::unique_lock<std::recursive_mutex>::unique_lock(std::recursive_mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x6bb458)
    #6 nuraft::raft_server::restart_election_timer() /home/zyh/NuRaft/src/handle_timeout.cxx:136:5 (calc_server+0x6bb458)
    #7 nuraft::raft_server::start_server(bool) /home/zyh/NuRaft/src/raft_server.cxx:283:9 (calc_server+0x536ee2)
    #8 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #9 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #10 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #11 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #13 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #14 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #15 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #16 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #17 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T3 'nuraft_w_0' (tid=83709, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 std::__shared_ptr<std::thread, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x57a46a)
    #3 std::shared_ptr<std::thread>::shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x57a46a)
    #4 std::shared_ptr<std::thread> std::allocate_shared<std::thread, std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x57a46a)
    #5 std::shared_ptr<std::thread> std::make_shared<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x57a46a)
    #6 std::shared_ptr<std::thread> nuraft::cs_new<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x57a46a)
    #7 nuraft::asio_service_impl::asio_service_impl(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1573:13 (calc_server+0x57a46a)
    #8 nuraft::asio_service::asio_service(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1693:17 (calc_server+0x57df93)
    #9 void __gnu_cxx::new_allocator<nuraft::asio_service>::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527802)
    #10 void std::allocator_traits<std::allocator<nuraft::asio_service> >::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>&, nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x5244ec)
    #11 std::_Sp_counted_ptr_inplace<nuraft::asio_service, std::allocator<nuraft::asio_service>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x5244ec)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, nuraft::asio_service*, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x5244ec)
    #13 std::__shared_ptr<nuraft::asio_service, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x5244ec)
    #14 std::shared_ptr<nuraft::asio_service>::shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x5244ec)
    #15 std::shared_ptr<nuraft::asio_service> std::allocate_shared<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x5244ec)
    #16 std::shared_ptr<nuraft::asio_service> std::make_shared<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x5244ec)
    #17 std::shared_ptr<nuraft::asio_service> nuraft::cs_new<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x5244ec)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:38:17 (calc_server+0x5244ec)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f307e80c8 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f307e80c8 by thread T3 (mutexes: write M133):
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::handle_election_timeout() /home/zyh/NuRaft/src/handle_timeout.cxx:279:9 (calc_server+0x6c09e8)
    #5 void std::__invoke_impl<void, void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(std::__invoke_memfun_deref, void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x569706)
    #6 std::__invoke_result<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>::type std::__invoke<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x569706)
    #7 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x569706)
    #8 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x569706)
    #9 std::_Function_handler<void (), std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >::_M_invoke(std::_Any_data const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:316:2 (calc_server+0x569706)
    #10 std::function<void ()>::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:706:14 (calc_server+0x57258a)
    #11 nuraft::timer_task<void>::exec() /home/zyh/NuRaft/include/libnuraft/timer_task.hxx:62:13 (calc_server+0x57258a)
    #12 nuraft::delayed_task::execute() /home/zyh/NuRaft/include/libnuraft/delayed_task.hxx:54:13 (calc_server+0x57982d)
    #13 _timer_handler_(std::shared_ptr<nuraft::delayed_task>&, std::error_code) /home/zyh/NuRaft/src/asio_service.cxx:1504:15 (calc_server+0x57982d)
    #14 void std::__invoke_impl<void, void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>(std::__invoke_other, void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595986)
    #15 std::__invoke_result<void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>::type std::__invoke<void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>(void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595986)
    #16 void std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>::__call<void, std::error_code const&, 0ul, 1ul>(std::tuple<std::error_code const&>&&, std::_Index_tuple<0ul, 1ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595986)
    #17 void std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>::operator()<std::error_code const&, void>(std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595986)
    #18 asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>::operator()() /home/zyh/NuRaft/asio/asio/include/asio/detail/bind_handler.hpp:64:5 (calc_server+0x595986)
    #19 void asio::asio_handler_invoke<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, ...) /home/zyh/NuRaft/asio/asio/include/asio/handler_invoke_hook.hpp:68:3 (calc_server+0x595986)
    #20 void asio_handler_invoke_helpers::invoke<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_invoke_helpers.hpp:37:3 (calc_server+0x595986)
    #21 void asio::detail::handler_work<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, asio::system_executor>::complete<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_work.hpp:81:5 (calc_server+0x595986)
    #22 asio::detail::wait_handler<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)> >::do_complete(void*, asio::detail::scheduler_operation*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/wait_handler.hpp:71:9 (calc_server+0x595986)
    #23 asio::detail::scheduler_operation::complete(void*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/scheduler_operation.hpp:39:5 (calc_server+0x589d9b)
    #24 asio::detail::scheduler::do_run_one(asio::detail::conditionally_enabled_mutex::scoped_lock&, asio::detail::scheduler_thread_info&, std::error_code const&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:400:12 (calc_server+0x589d9b)
    #25 asio::detail::scheduler::run(std::error_code&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:153:10 (calc_server+0x588c2a)
    #26 asio::io_context::run() /home/zyh/NuRaft/asio/asio/include/asio/impl/io_context.ipp:61:24 (calc_server+0x57babf)
    #27 nuraft::asio_service_impl::worker_entry() /home/zyh/NuRaft/src/asio_service.cxx:1607:21 (calc_server+0x57babf)
    #28 void std::__invoke_impl<void, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(std::__invoke_memfun_deref, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x595134)
    #29 std::__invoke_result<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>::type std::__invoke<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #30 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595134)
    #31 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595134)
    #32 void std::__invoke_impl<void, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::__invoke_other, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595134)
    #33 std::__invoke_result<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >::type std::__invoke<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #34 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x595134)
    #35 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x595134)
    #36 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x595134)
    #37 <null> <null> (libstdc++.so.6+0xbd6de)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Mutex M133 (0x7b6c000003c8) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x6bb458)
    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:810:10 (calc_server+0x6bb458)
    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/mutex:107:17 (calc_server+0x6bb458)
    #4 std::unique_lock<std::recursive_mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x6bb458)
    #5 std::unique_lock<std::recursive_mutex>::unique_lock(std::recursive_mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x6bb458)
    #6 nuraft::raft_server::restart_election_timer() /home/zyh/NuRaft/src/handle_timeout.cxx:136:5 (calc_server+0x6bb458)
    #7 nuraft::raft_server::start_server(bool) /home/zyh/NuRaft/src/raft_server.cxx:283:9 (calc_server+0x536ee2)
    #8 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #9 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #10 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #11 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #13 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #14 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #15 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #16 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #17 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T3 'nuraft_w_0' (tid=83709, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 std::__shared_ptr<std::thread, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x57a46a)
    #3 std::shared_ptr<std::thread>::shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x57a46a)
    #4 std::shared_ptr<std::thread> std::allocate_shared<std::thread, std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x57a46a)
    #5 std::shared_ptr<std::thread> std::make_shared<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x57a46a)
    #6 std::shared_ptr<std::thread> nuraft::cs_new<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x57a46a)
    #7 nuraft::asio_service_impl::asio_service_impl(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1573:13 (calc_server+0x57a46a)
    #8 nuraft::asio_service::asio_service(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1693:17 (calc_server+0x57df93)
    #9 void __gnu_cxx::new_allocator<nuraft::asio_service>::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527802)
    #10 void std::allocator_traits<std::allocator<nuraft::asio_service> >::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>&, nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x5244ec)
    #11 std::_Sp_counted_ptr_inplace<nuraft::asio_service, std::allocator<nuraft::asio_service>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x5244ec)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, nuraft::asio_service*, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x5244ec)
    #13 std::__shared_ptr<nuraft::asio_service, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x5244ec)
    #14 std::shared_ptr<nuraft::asio_service>::shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x5244ec)
    #15 std::shared_ptr<nuraft::asio_service> std::allocate_shared<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x5244ec)
    #16 std::shared_ptr<nuraft::asio_service> std::make_shared<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x5244ec)
    #17 std::shared_ptr<nuraft::asio_service> nuraft::cs_new<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x5244ec)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:38:17 (calc_server+0x5244ec)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f307e90d8 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f307e90d8 by thread T3 (mutexes: write M133):
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::request_vote(bool) /home/zyh/NuRaft/src/handle_vote.cxx:193:5 (calc_server+0x6c904a)
    #5 nuraft::raft_server::initiate_vote(bool) /home/zyh/NuRaft/src/handle_vote.cxx:179:9 (calc_server+0x6c87f8)
    #6 nuraft::raft_server::handle_election_timeout() /home/zyh/NuRaft/src/handle_timeout.cxx:296:13 (calc_server+0x6c1064)
    #7 void std::__invoke_impl<void, void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(std::__invoke_memfun_deref, void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x569706)
    #8 std::__invoke_result<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>::type std::__invoke<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x569706)
    #9 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x569706)
    #10 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x569706)
    #11 std::_Function_handler<void (), std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >::_M_invoke(std::_Any_data const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:316:2 (calc_server+0x569706)
    #12 std::function<void ()>::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:706:14 (calc_server+0x57258a)
    #13 nuraft::timer_task<void>::exec() /home/zyh/NuRaft/include/libnuraft/timer_task.hxx:62:13 (calc_server+0x57258a)
    #14 nuraft::delayed_task::execute() /home/zyh/NuRaft/include/libnuraft/delayed_task.hxx:54:13 (calc_server+0x57982d)
    #15 _timer_handler_(std::shared_ptr<nuraft::delayed_task>&, std::error_code) /home/zyh/NuRaft/src/asio_service.cxx:1504:15 (calc_server+0x57982d)
    #16 void std::__invoke_impl<void, void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>(std::__invoke_other, void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595986)
    #17 std::__invoke_result<void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>::type std::__invoke<void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>(void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595986)
    #18 void std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>::__call<void, std::error_code const&, 0ul, 1ul>(std::tuple<std::error_code const&>&&, std::_Index_tuple<0ul, 1ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595986)
    #19 void std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>::operator()<std::error_code const&, void>(std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595986)
    #20 asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>::operator()() /home/zyh/NuRaft/asio/asio/include/asio/detail/bind_handler.hpp:64:5 (calc_server+0x595986)
    #21 void asio::asio_handler_invoke<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, ...) /home/zyh/NuRaft/asio/asio/include/asio/handler_invoke_hook.hpp:68:3 (calc_server+0x595986)
    #22 void asio_handler_invoke_helpers::invoke<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_invoke_helpers.hpp:37:3 (calc_server+0x595986)
    #23 void asio::detail::handler_work<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, asio::system_executor>::complete<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_work.hpp:81:5 (calc_server+0x595986)
    #24 asio::detail::wait_handler<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)> >::do_complete(void*, asio::detail::scheduler_operation*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/wait_handler.hpp:71:9 (calc_server+0x595986)
    #25 asio::detail::scheduler_operation::complete(void*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/scheduler_operation.hpp:39:5 (calc_server+0x589d9b)
    #26 asio::detail::scheduler::do_run_one(asio::detail::conditionally_enabled_mutex::scoped_lock&, asio::detail::scheduler_thread_info&, std::error_code const&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:400:12 (calc_server+0x589d9b)
    #27 asio::detail::scheduler::run(std::error_code&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:153:10 (calc_server+0x588c2a)
    #28 asio::io_context::run() /home/zyh/NuRaft/asio/asio/include/asio/impl/io_context.ipp:61:24 (calc_server+0x57babf)
    #29 nuraft::asio_service_impl::worker_entry() /home/zyh/NuRaft/src/asio_service.cxx:1607:21 (calc_server+0x57babf)
    #30 void std::__invoke_impl<void, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(std::__invoke_memfun_deref, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x595134)
    #31 std::__invoke_result<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>::type std::__invoke<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #32 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595134)
    #33 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595134)
    #34 void std::__invoke_impl<void, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::__invoke_other, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595134)
    #35 std::__invoke_result<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >::type std::__invoke<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #36 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x595134)
    #37 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x595134)
    #38 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x595134)
    #39 <null> <null> (libstdc++.so.6+0xbd6de)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Mutex M133 (0x7b6c000003c8) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x6bb458)
    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:810:10 (calc_server+0x6bb458)
    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/mutex:107:17 (calc_server+0x6bb458)
    #4 std::unique_lock<std::recursive_mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x6bb458)
    #5 std::unique_lock<std::recursive_mutex>::unique_lock(std::recursive_mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x6bb458)
    #6 nuraft::raft_server::restart_election_timer() /home/zyh/NuRaft/src/handle_timeout.cxx:136:5 (calc_server+0x6bb458)
    #7 nuraft::raft_server::start_server(bool) /home/zyh/NuRaft/src/raft_server.cxx:283:9 (calc_server+0x536ee2)
    #8 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #9 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #10 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #11 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #13 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #14 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #15 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #16 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #17 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T3 'nuraft_w_0' (tid=83709, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 std::__shared_ptr<std::thread, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x57a46a)
    #3 std::shared_ptr<std::thread>::shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x57a46a)
    #4 std::shared_ptr<std::thread> std::allocate_shared<std::thread, std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x57a46a)
    #5 std::shared_ptr<std::thread> std::make_shared<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x57a46a)
    #6 std::shared_ptr<std::thread> nuraft::cs_new<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x57a46a)
    #7 nuraft::asio_service_impl::asio_service_impl(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1573:13 (calc_server+0x57a46a)
    #8 nuraft::asio_service::asio_service(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1693:17 (calc_server+0x57df93)
    #9 void __gnu_cxx::new_allocator<nuraft::asio_service>::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527802)
    #10 void std::allocator_traits<std::allocator<nuraft::asio_service> >::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>&, nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x5244ec)
    #11 std::_Sp_counted_ptr_inplace<nuraft::asio_service, std::allocator<nuraft::asio_service>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x5244ec)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, nuraft::asio_service*, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x5244ec)
    #13 std::__shared_ptr<nuraft::asio_service, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x5244ec)
    #14 std::shared_ptr<nuraft::asio_service>::shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x5244ec)
    #15 std::shared_ptr<nuraft::asio_service> std::allocate_shared<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x5244ec)
    #16 std::shared_ptr<nuraft::asio_service> std::make_shared<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x5244ec)
    #17 std::shared_ptr<nuraft::asio_service> nuraft::cs_new<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x5244ec)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:38:17 (calc_server+0x5244ec)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f307ea0e8 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f307ea0e8 by thread T3 (mutexes: write M133, write M167):
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::become_leader() /home/zyh/NuRaft/src/raft_server.cxx:914:9 (calc_server+0x54c70e)
    #5 nuraft::raft_server::request_vote(bool) /home/zyh/NuRaft/src/handle_vote.cxx:203:9 (calc_server+0x6c92bb)
    #6 nuraft::raft_server::initiate_vote(bool) /home/zyh/NuRaft/src/handle_vote.cxx:179:9 (calc_server+0x6c87f8)
    #7 nuraft::raft_server::handle_election_timeout() /home/zyh/NuRaft/src/handle_timeout.cxx:296:13 (calc_server+0x6c1064)
    #8 void std::__invoke_impl<void, void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(std::__invoke_memfun_deref, void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x569706)
    #9 std::__invoke_result<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>::type std::__invoke<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x569706)
    #10 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x569706)
    #11 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x569706)
    #12 std::_Function_handler<void (), std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >::_M_invoke(std::_Any_data const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:316:2 (calc_server+0x569706)
    #13 std::function<void ()>::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:706:14 (calc_server+0x57258a)
    #14 nuraft::timer_task<void>::exec() /home/zyh/NuRaft/include/libnuraft/timer_task.hxx:62:13 (calc_server+0x57258a)
    #15 nuraft::delayed_task::execute() /home/zyh/NuRaft/include/libnuraft/delayed_task.hxx:54:13 (calc_server+0x57982d)
    #16 _timer_handler_(std::shared_ptr<nuraft::delayed_task>&, std::error_code) /home/zyh/NuRaft/src/asio_service.cxx:1504:15 (calc_server+0x57982d)
    #17 void std::__invoke_impl<void, void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>(std::__invoke_other, void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595986)
    #18 std::__invoke_result<void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>::type std::__invoke<void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>(void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595986)
    #19 void std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>::__call<void, std::error_code const&, 0ul, 1ul>(std::tuple<std::error_code const&>&&, std::_Index_tuple<0ul, 1ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595986)
    #20 void std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>::operator()<std::error_code const&, void>(std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595986)
    #21 asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>::operator()() /home/zyh/NuRaft/asio/asio/include/asio/detail/bind_handler.hpp:64:5 (calc_server+0x595986)
    #22 void asio::asio_handler_invoke<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, ...) /home/zyh/NuRaft/asio/asio/include/asio/handler_invoke_hook.hpp:68:3 (calc_server+0x595986)
    #23 void asio_handler_invoke_helpers::invoke<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_invoke_helpers.hpp:37:3 (calc_server+0x595986)
    #24 void asio::detail::handler_work<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, asio::system_executor>::complete<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_work.hpp:81:5 (calc_server+0x595986)
    #25 asio::detail::wait_handler<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)> >::do_complete(void*, asio::detail::scheduler_operation*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/wait_handler.hpp:71:9 (calc_server+0x595986)
    #26 asio::detail::scheduler_operation::complete(void*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/scheduler_operation.hpp:39:5 (calc_server+0x589d9b)
    #27 asio::detail::scheduler::do_run_one(asio::detail::conditionally_enabled_mutex::scoped_lock&, asio::detail::scheduler_thread_info&, std::error_code const&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:400:12 (calc_server+0x589d9b)
    #28 asio::detail::scheduler::run(std::error_code&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:153:10 (calc_server+0x588c2a)
    #29 asio::io_context::run() /home/zyh/NuRaft/asio/asio/include/asio/impl/io_context.ipp:61:24 (calc_server+0x57babf)
    #30 nuraft::asio_service_impl::worker_entry() /home/zyh/NuRaft/src/asio_service.cxx:1607:21 (calc_server+0x57babf)
    #31 void std::__invoke_impl<void, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(std::__invoke_memfun_deref, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x595134)
    #32 std::__invoke_result<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>::type std::__invoke<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #33 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595134)
    #34 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595134)
    #35 void std::__invoke_impl<void, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::__invoke_other, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595134)
    #36 std::__invoke_result<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >::type std::__invoke<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #37 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x595134)
    #38 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x595134)
    #39 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x595134)
    #40 <null> <null> (libstdc++.so.6+0xbd6de)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Mutex M133 (0x7b6c000003c8) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x6bb458)
    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:810:10 (calc_server+0x6bb458)
    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/mutex:107:17 (calc_server+0x6bb458)
    #4 std::unique_lock<std::recursive_mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x6bb458)
    #5 std::unique_lock<std::recursive_mutex>::unique_lock(std::recursive_mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x6bb458)
    #6 nuraft::raft_server::restart_election_timer() /home/zyh/NuRaft/src/handle_timeout.cxx:136:5 (calc_server+0x6bb458)
    #7 nuraft::raft_server::start_server(bool) /home/zyh/NuRaft/src/raft_server.cxx:283:9 (calc_server+0x536ee2)
    #8 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #9 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #10 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #11 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #13 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #14 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #15 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #16 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #17 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M167 (0x7b6c000004f0) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x54c583)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x54c583)
    #3 std::lock_guard<std::mutex>::lock_guard(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:162:19 (calc_server+0x54c583)
    #4 nuraft::raft_server::become_leader() /home/zyh/NuRaft/src/raft_server.cxx:913:9 (calc_server+0x54c583)
    #5 nuraft::raft_server::request_vote(bool) /home/zyh/NuRaft/src/handle_vote.cxx:203:9 (calc_server+0x6c92bb)
    #6 nuraft::raft_server::initiate_vote(bool) /home/zyh/NuRaft/src/handle_vote.cxx:179:9 (calc_server+0x6c87f8)
    #7 nuraft::raft_server::handle_election_timeout() /home/zyh/NuRaft/src/handle_timeout.cxx:296:13 (calc_server+0x6c1064)
    #8 void std::__invoke_impl<void, void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(std::__invoke_memfun_deref, void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x569706)
    #9 std::__invoke_result<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>::type std::__invoke<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x569706)
    #10 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x569706)
    #11 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x569706)
    #12 std::_Function_handler<void (), std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >::_M_invoke(std::_Any_data const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:316:2 (calc_server+0x569706)
    #13 std::function<void ()>::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:706:14 (calc_server+0x57258a)
    #14 nuraft::timer_task<void>::exec() /home/zyh/NuRaft/include/libnuraft/timer_task.hxx:62:13 (calc_server+0x57258a)
    #15 nuraft::delayed_task::execute() /home/zyh/NuRaft/include/libnuraft/delayed_task.hxx:54:13 (calc_server+0x57982d)
    #16 _timer_handler_(std::shared_ptr<nuraft::delayed_task>&, std::error_code) /home/zyh/NuRaft/src/asio_service.cxx:1504:15 (calc_server+0x57982d)
    #17 void std::__invoke_impl<void, void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>(std::__invoke_other, void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595986)
    #18 std::__invoke_result<void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>::type std::__invoke<void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>(void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595986)
    #19 void std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>::__call<void, std::error_code const&, 0ul, 1ul>(std::tuple<std::error_code const&>&&, std::_Index_tuple<0ul, 1ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595986)
    #20 void std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>::operator()<std::error_code const&, void>(std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595986)
    #21 asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>::operator()() /home/zyh/NuRaft/asio/asio/include/asio/detail/bind_handler.hpp:64:5 (calc_server+0x595986)
    #22 void asio::asio_handler_invoke<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, ...) /home/zyh/NuRaft/asio/asio/include/asio/handler_invoke_hook.hpp:68:3 (calc_server+0x595986)
    #23 void asio_handler_invoke_helpers::invoke<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_invoke_helpers.hpp:37:3 (calc_server+0x595986)
    #24 void asio::detail::handler_work<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, asio::system_executor>::complete<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_work.hpp:81:5 (calc_server+0x595986)
    #25 asio::detail::wait_handler<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)> >::do_complete(void*, asio::detail::scheduler_operation*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/wait_handler.hpp:71:9 (calc_server+0x595986)
    #26 asio::detail::scheduler_operation::complete(void*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/scheduler_operation.hpp:39:5 (calc_server+0x589d9b)
    #27 asio::detail::scheduler::do_run_one(asio::detail::conditionally_enabled_mutex::scoped_lock&, asio::detail::scheduler_thread_info&, std::error_code const&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:400:12 (calc_server+0x589d9b)
    #28 asio::detail::scheduler::run(std::error_code&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:153:10 (calc_server+0x588c2a)
    #29 asio::io_context::run() /home/zyh/NuRaft/asio/asio/include/asio/impl/io_context.ipp:61:24 (calc_server+0x57babf)
    #30 nuraft::asio_service_impl::worker_entry() /home/zyh/NuRaft/src/asio_service.cxx:1607:21 (calc_server+0x57babf)
    #31 void std::__invoke_impl<void, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(std::__invoke_memfun_deref, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x595134)
    #32 std::__invoke_result<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>::type std::__invoke<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #33 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595134)
    #34 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595134)
    #35 void std::__invoke_impl<void, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::__invoke_other, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595134)
    #36 std::__invoke_result<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >::type std::__invoke<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #37 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x595134)
    #38 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x595134)
    #39 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x595134)
    #40 <null> <null> (libstdc++.so.6+0xbd6de)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T3 'nuraft_w_0' (tid=83709, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 std::__shared_ptr<std::thread, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x57a46a)
    #3 std::shared_ptr<std::thread>::shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x57a46a)
    #4 std::shared_ptr<std::thread> std::allocate_shared<std::thread, std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x57a46a)
    #5 std::shared_ptr<std::thread> std::make_shared<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x57a46a)
    #6 std::shared_ptr<std::thread> nuraft::cs_new<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x57a46a)
    #7 nuraft::asio_service_impl::asio_service_impl(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1573:13 (calc_server+0x57a46a)
    #8 nuraft::asio_service::asio_service(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1693:17 (calc_server+0x57df93)
    #9 void __gnu_cxx::new_allocator<nuraft::asio_service>::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527802)
    #10 void std::allocator_traits<std::allocator<nuraft::asio_service> >::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>&, nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x5244ec)
    #11 std::_Sp_counted_ptr_inplace<nuraft::asio_service, std::allocator<nuraft::asio_service>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x5244ec)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, nuraft::asio_service*, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x5244ec)
    #13 std::__shared_ptr<nuraft::asio_service, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x5244ec)
    #14 std::shared_ptr<nuraft::asio_service>::shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x5244ec)
    #15 std::shared_ptr<nuraft::asio_service> std::allocate_shared<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x5244ec)
    #16 std::shared_ptr<nuraft::asio_service> std::make_shared<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x5244ec)
    #17 std::shared_ptr<nuraft::asio_service> nuraft::cs_new<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x5244ec)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:38:17 (calc_server+0x5244ec)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f307eb0f8 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f307eb0f8 by thread T3 (mutexes: write M133, write M168):
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::become_leader() /home/zyh/NuRaft/src/raft_server.cxx:927:9 (calc_server+0x54d0db)
    #5 nuraft::raft_server::request_vote(bool) /home/zyh/NuRaft/src/handle_vote.cxx:203:9 (calc_server+0x6c92bb)
    #6 nuraft::raft_server::initiate_vote(bool) /home/zyh/NuRaft/src/handle_vote.cxx:179:9 (calc_server+0x6c87f8)
    #7 nuraft::raft_server::handle_election_timeout() /home/zyh/NuRaft/src/handle_timeout.cxx:296:13 (calc_server+0x6c1064)
    #8 void std::__invoke_impl<void, void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(std::__invoke_memfun_deref, void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x569706)
    #9 std::__invoke_result<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>::type std::__invoke<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x569706)
    #10 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x569706)
    #11 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x569706)
    #12 std::_Function_handler<void (), std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >::_M_invoke(std::_Any_data const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:316:2 (calc_server+0x569706)
    #13 std::function<void ()>::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:706:14 (calc_server+0x57258a)
    #14 nuraft::timer_task<void>::exec() /home/zyh/NuRaft/include/libnuraft/timer_task.hxx:62:13 (calc_server+0x57258a)
    #15 nuraft::delayed_task::execute() /home/zyh/NuRaft/include/libnuraft/delayed_task.hxx:54:13 (calc_server+0x57982d)
    #16 _timer_handler_(std::shared_ptr<nuraft::delayed_task>&, std::error_code) /home/zyh/NuRaft/src/asio_service.cxx:1504:15 (calc_server+0x57982d)
    #17 void std::__invoke_impl<void, void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>(std::__invoke_other, void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595986)
    #18 std::__invoke_result<void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>::type std::__invoke<void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>(void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595986)
    #19 void std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>::__call<void, std::error_code const&, 0ul, 1ul>(std::tuple<std::error_code const&>&&, std::_Index_tuple<0ul, 1ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595986)
    #20 void std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>::operator()<std::error_code const&, void>(std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595986)
    #21 asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>::operator()() /home/zyh/NuRaft/asio/asio/include/asio/detail/bind_handler.hpp:64:5 (calc_server+0x595986)
    #22 void asio::asio_handler_invoke<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, ...) /home/zyh/NuRaft/asio/asio/include/asio/handler_invoke_hook.hpp:68:3 (calc_server+0x595986)
    #23 void asio_handler_invoke_helpers::invoke<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_invoke_helpers.hpp:37:3 (calc_server+0x595986)
    #24 void asio::detail::handler_work<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, asio::system_executor>::complete<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_work.hpp:81:5 (calc_server+0x595986)
    #25 asio::detail::wait_handler<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)> >::do_complete(void*, asio::detail::scheduler_operation*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/wait_handler.hpp:71:9 (calc_server+0x595986)
    #26 asio::detail::scheduler_operation::complete(void*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/scheduler_operation.hpp:39:5 (calc_server+0x589d9b)
    #27 asio::detail::scheduler::do_run_one(asio::detail::conditionally_enabled_mutex::scoped_lock&, asio::detail::scheduler_thread_info&, std::error_code const&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:400:12 (calc_server+0x589d9b)
    #28 asio::detail::scheduler::run(std::error_code&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:153:10 (calc_server+0x588c2a)
    #29 asio::io_context::run() /home/zyh/NuRaft/asio/asio/include/asio/impl/io_context.ipp:61:24 (calc_server+0x57babf)
    #30 nuraft::asio_service_impl::worker_entry() /home/zyh/NuRaft/src/asio_service.cxx:1607:21 (calc_server+0x57babf)
    #31 void std::__invoke_impl<void, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(std::__invoke_memfun_deref, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x595134)
    #32 std::__invoke_result<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>::type std::__invoke<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #33 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595134)
    #34 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595134)
    #35 void std::__invoke_impl<void, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::__invoke_other, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595134)
    #36 std::__invoke_result<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >::type std::__invoke<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #37 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x595134)
    #38 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x595134)
    #39 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x595134)
    #40 <null> <null> (libstdc++.so.6+0xbd6de)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Mutex M133 (0x7b6c000003c8) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x6bb458)
    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:810:10 (calc_server+0x6bb458)
    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/mutex:107:17 (calc_server+0x6bb458)
    #4 std::unique_lock<std::recursive_mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x6bb458)
    #5 std::unique_lock<std::recursive_mutex>::unique_lock(std::recursive_mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x6bb458)
    #6 nuraft::raft_server::restart_election_timer() /home/zyh/NuRaft/src/handle_timeout.cxx:136:5 (calc_server+0x6bb458)
    #7 nuraft::raft_server::start_server(bool) /home/zyh/NuRaft/src/raft_server.cxx:283:9 (calc_server+0x536ee2)
    #8 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #9 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #10 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #11 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #13 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #14 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #15 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #16 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #17 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M168 (0x7b6c000003f0) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x54cae5)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x54cae5)
    #3 std::lock_guard<std::mutex>::lock_guard(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:162:19 (calc_server+0x54cae5)
    #4 nuraft::raft_server::become_leader() /home/zyh/NuRaft/src/raft_server.cxx:919:9 (calc_server+0x54cae5)
    #5 nuraft::raft_server::request_vote(bool) /home/zyh/NuRaft/src/handle_vote.cxx:203:9 (calc_server+0x6c92bb)
    #6 nuraft::raft_server::initiate_vote(bool) /home/zyh/NuRaft/src/handle_vote.cxx:179:9 (calc_server+0x6c87f8)
    #7 nuraft::raft_server::handle_election_timeout() /home/zyh/NuRaft/src/handle_timeout.cxx:296:13 (calc_server+0x6c1064)
    #8 void std::__invoke_impl<void, void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(std::__invoke_memfun_deref, void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x569706)
    #9 std::__invoke_result<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>::type std::__invoke<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x569706)
    #10 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x569706)
    #11 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x569706)
    #12 std::_Function_handler<void (), std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >::_M_invoke(std::_Any_data const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:316:2 (calc_server+0x569706)
    #13 std::function<void ()>::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:706:14 (calc_server+0x57258a)
    #14 nuraft::timer_task<void>::exec() /home/zyh/NuRaft/include/libnuraft/timer_task.hxx:62:13 (calc_server+0x57258a)
    #15 nuraft::delayed_task::execute() /home/zyh/NuRaft/include/libnuraft/delayed_task.hxx:54:13 (calc_server+0x57982d)
    #16 _timer_handler_(std::shared_ptr<nuraft::delayed_task>&, std::error_code) /home/zyh/NuRaft/src/asio_service.cxx:1504:15 (calc_server+0x57982d)
    #17 void std::__invoke_impl<void, void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>(std::__invoke_other, void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595986)
    #18 std::__invoke_result<void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>::type std::__invoke<void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>(void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595986)
    #19 void std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>::__call<void, std::error_code const&, 0ul, 1ul>(std::tuple<std::error_code const&>&&, std::_Index_tuple<0ul, 1ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595986)
    #20 void std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>::operator()<std::error_code const&, void>(std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595986)
    #21 asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>::operator()() /home/zyh/NuRaft/asio/asio/include/asio/detail/bind_handler.hpp:64:5 (calc_server+0x595986)
    #22 void asio::asio_handler_invoke<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, ...) /home/zyh/NuRaft/asio/asio/include/asio/handler_invoke_hook.hpp:68:3 (calc_server+0x595986)
    #23 void asio_handler_invoke_helpers::invoke<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_invoke_helpers.hpp:37:3 (calc_server+0x595986)
    #24 void asio::detail::handler_work<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, asio::system_executor>::complete<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_work.hpp:81:5 (calc_server+0x595986)
    #25 asio::detail::wait_handler<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)> >::do_complete(void*, asio::detail::scheduler_operation*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/wait_handler.hpp:71:9 (calc_server+0x595986)
    #26 asio::detail::scheduler_operation::complete(void*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/scheduler_operation.hpp:39:5 (calc_server+0x589d9b)
    #27 asio::detail::scheduler::do_run_one(asio::detail::conditionally_enabled_mutex::scoped_lock&, asio::detail::scheduler_thread_info&, std::error_code const&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:400:12 (calc_server+0x589d9b)
    #28 asio::detail::scheduler::run(std::error_code&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:153:10 (calc_server+0x588c2a)
    #29 asio::io_context::run() /home/zyh/NuRaft/asio/asio/include/asio/impl/io_context.ipp:61:24 (calc_server+0x57babf)
    #30 nuraft::asio_service_impl::worker_entry() /home/zyh/NuRaft/src/asio_service.cxx:1607:21 (calc_server+0x57babf)
    #31 void std::__invoke_impl<void, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(std::__invoke_memfun_deref, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x595134)
    #32 std::__invoke_result<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>::type std::__invoke<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #33 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595134)
    #34 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595134)
    #35 void std::__invoke_impl<void, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::__invoke_other, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595134)
    #36 std::__invoke_result<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >::type std::__invoke<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #37 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x595134)
    #38 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x595134)
    #39 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x595134)
    #40 <null> <null> (libstdc++.so.6+0xbd6de)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T3 'nuraft_w_0' (tid=83709, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 std::__shared_ptr<std::thread, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x57a46a)
    #3 std::shared_ptr<std::thread>::shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x57a46a)
    #4 std::shared_ptr<std::thread> std::allocate_shared<std::thread, std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x57a46a)
    #5 std::shared_ptr<std::thread> std::make_shared<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x57a46a)
    #6 std::shared_ptr<std::thread> nuraft::cs_new<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x57a46a)
    #7 nuraft::asio_service_impl::asio_service_impl(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1573:13 (calc_server+0x57a46a)
    #8 nuraft::asio_service::asio_service(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1693:17 (calc_server+0x57df93)
    #9 void __gnu_cxx::new_allocator<nuraft::asio_service>::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527802)
    #10 void std::allocator_traits<std::allocator<nuraft::asio_service> >::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>&, nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x5244ec)
    #11 std::_Sp_counted_ptr_inplace<nuraft::asio_service, std::allocator<nuraft::asio_service>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x5244ec)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, nuraft::asio_service*, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x5244ec)
    #13 std::__shared_ptr<nuraft::asio_service, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x5244ec)
    #14 std::shared_ptr<nuraft::asio_service>::shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x5244ec)
    #15 std::shared_ptr<nuraft::asio_service> std::allocate_shared<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x5244ec)
    #16 std::shared_ptr<nuraft::asio_service> std::make_shared<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x5244ec)
    #17 std::shared_ptr<nuraft::asio_service> nuraft::cs_new<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x5244ec)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:38:17 (calc_server+0x5244ec)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f307ec108 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f307ec108 by thread T3 (mutexes: write M133, write M168):
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::become_leader() /home/zyh/NuRaft/src/raft_server.cxx:972:9 (calc_server+0x54f8d3)
    #5 nuraft::raft_server::request_vote(bool) /home/zyh/NuRaft/src/handle_vote.cxx:203:9 (calc_server+0x6c92bb)
    #6 nuraft::raft_server::initiate_vote(bool) /home/zyh/NuRaft/src/handle_vote.cxx:179:9 (calc_server+0x6c87f8)
    #7 nuraft::raft_server::handle_election_timeout() /home/zyh/NuRaft/src/handle_timeout.cxx:296:13 (calc_server+0x6c1064)
    #8 void std::__invoke_impl<void, void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(std::__invoke_memfun_deref, void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x569706)
    #9 std::__invoke_result<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>::type std::__invoke<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x569706)
    #10 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x569706)
    #11 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x569706)
    #12 std::_Function_handler<void (), std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >::_M_invoke(std::_Any_data const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:316:2 (calc_server+0x569706)
    #13 std::function<void ()>::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:706:14 (calc_server+0x57258a)
    #14 nuraft::timer_task<void>::exec() /home/zyh/NuRaft/include/libnuraft/timer_task.hxx:62:13 (calc_server+0x57258a)
    #15 nuraft::delayed_task::execute() /home/zyh/NuRaft/include/libnuraft/delayed_task.hxx:54:13 (calc_server+0x57982d)
    #16 _timer_handler_(std::shared_ptr<nuraft::delayed_task>&, std::error_code) /home/zyh/NuRaft/src/asio_service.cxx:1504:15 (calc_server+0x57982d)
    #17 void std::__invoke_impl<void, void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>(std::__invoke_other, void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595986)
    #18 std::__invoke_result<void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>::type std::__invoke<void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>(void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595986)
    #19 void std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>::__call<void, std::error_code const&, 0ul, 1ul>(std::tuple<std::error_code const&>&&, std::_Index_tuple<0ul, 1ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595986)
    #20 void std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>::operator()<std::error_code const&, void>(std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595986)
    #21 asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>::operator()() /home/zyh/NuRaft/asio/asio/include/asio/detail/bind_handler.hpp:64:5 (calc_server+0x595986)
    #22 void asio::asio_handler_invoke<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, ...) /home/zyh/NuRaft/asio/asio/include/asio/handler_invoke_hook.hpp:68:3 (calc_server+0x595986)
    #23 void asio_handler_invoke_helpers::invoke<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_invoke_helpers.hpp:37:3 (calc_server+0x595986)
    #24 void asio::detail::handler_work<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, asio::system_executor>::complete<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_work.hpp:81:5 (calc_server+0x595986)
    #25 asio::detail::wait_handler<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)> >::do_complete(void*, asio::detail::scheduler_operation*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/wait_handler.hpp:71:9 (calc_server+0x595986)
    #26 asio::detail::scheduler_operation::complete(void*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/scheduler_operation.hpp:39:5 (calc_server+0x589d9b)
    #27 asio::detail::scheduler::do_run_one(asio::detail::conditionally_enabled_mutex::scoped_lock&, asio::detail::scheduler_thread_info&, std::error_code const&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:400:12 (calc_server+0x589d9b)
    #28 asio::detail::scheduler::run(std::error_code&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:153:10 (calc_server+0x588c2a)
    #29 asio::io_context::run() /home/zyh/NuRaft/asio/asio/include/asio/impl/io_context.ipp:61:24 (calc_server+0x57babf)
    #30 nuraft::asio_service_impl::worker_entry() /home/zyh/NuRaft/src/asio_service.cxx:1607:21 (calc_server+0x57babf)
    #31 void std::__invoke_impl<void, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(std::__invoke_memfun_deref, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x595134)
    #32 std::__invoke_result<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>::type std::__invoke<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #33 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595134)
    #34 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595134)
    #35 void std::__invoke_impl<void, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::__invoke_other, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595134)
    #36 std::__invoke_result<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >::type std::__invoke<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #37 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x595134)
    #38 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x595134)
    #39 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x595134)
    #40 <null> <null> (libstdc++.so.6+0xbd6de)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Mutex M133 (0x7b6c000003c8) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x6bb458)
    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:810:10 (calc_server+0x6bb458)
    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/mutex:107:17 (calc_server+0x6bb458)
    #4 std::unique_lock<std::recursive_mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x6bb458)
    #5 std::unique_lock<std::recursive_mutex>::unique_lock(std::recursive_mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x6bb458)
    #6 nuraft::raft_server::restart_election_timer() /home/zyh/NuRaft/src/handle_timeout.cxx:136:5 (calc_server+0x6bb458)
    #7 nuraft::raft_server::start_server(bool) /home/zyh/NuRaft/src/raft_server.cxx:283:9 (calc_server+0x536ee2)
    #8 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #9 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #10 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #11 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #13 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #14 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #15 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #16 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #17 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M168 (0x7b6c000003f0) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x54cae5)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x54cae5)
    #3 std::lock_guard<std::mutex>::lock_guard(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:162:19 (calc_server+0x54cae5)
    #4 nuraft::raft_server::become_leader() /home/zyh/NuRaft/src/raft_server.cxx:919:9 (calc_server+0x54cae5)
    #5 nuraft::raft_server::request_vote(bool) /home/zyh/NuRaft/src/handle_vote.cxx:203:9 (calc_server+0x6c92bb)
    #6 nuraft::raft_server::initiate_vote(bool) /home/zyh/NuRaft/src/handle_vote.cxx:179:9 (calc_server+0x6c87f8)
    #7 nuraft::raft_server::handle_election_timeout() /home/zyh/NuRaft/src/handle_timeout.cxx:296:13 (calc_server+0x6c1064)
    #8 void std::__invoke_impl<void, void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(std::__invoke_memfun_deref, void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x569706)
    #9 std::__invoke_result<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>::type std::__invoke<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x569706)
    #10 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x569706)
    #11 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x569706)
    #12 std::_Function_handler<void (), std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >::_M_invoke(std::_Any_data const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:316:2 (calc_server+0x569706)
    #13 std::function<void ()>::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:706:14 (calc_server+0x57258a)
    #14 nuraft::timer_task<void>::exec() /home/zyh/NuRaft/include/libnuraft/timer_task.hxx:62:13 (calc_server+0x57258a)
    #15 nuraft::delayed_task::execute() /home/zyh/NuRaft/include/libnuraft/delayed_task.hxx:54:13 (calc_server+0x57982d)
    #16 _timer_handler_(std::shared_ptr<nuraft::delayed_task>&, std::error_code) /home/zyh/NuRaft/src/asio_service.cxx:1504:15 (calc_server+0x57982d)
    #17 void std::__invoke_impl<void, void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>(std::__invoke_other, void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595986)
    #18 std::__invoke_result<void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>::type std::__invoke<void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>(void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595986)
    #19 void std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>::__call<void, std::error_code const&, 0ul, 1ul>(std::tuple<std::error_code const&>&&, std::_Index_tuple<0ul, 1ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595986)
    #20 void std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>::operator()<std::error_code const&, void>(std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595986)
    #21 asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>::operator()() /home/zyh/NuRaft/asio/asio/include/asio/detail/bind_handler.hpp:64:5 (calc_server+0x595986)
    #22 void asio::asio_handler_invoke<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, ...) /home/zyh/NuRaft/asio/asio/include/asio/handler_invoke_hook.hpp:68:3 (calc_server+0x595986)
    #23 void asio_handler_invoke_helpers::invoke<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_invoke_helpers.hpp:37:3 (calc_server+0x595986)
    #24 void asio::detail::handler_work<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, asio::system_executor>::complete<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_work.hpp:81:5 (calc_server+0x595986)
    #25 asio::detail::wait_handler<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)> >::do_complete(void*, asio::detail::scheduler_operation*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/wait_handler.hpp:71:9 (calc_server+0x595986)
    #26 asio::detail::scheduler_operation::complete(void*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/scheduler_operation.hpp:39:5 (calc_server+0x589d9b)
    #27 asio::detail::scheduler::do_run_one(asio::detail::conditionally_enabled_mutex::scoped_lock&, asio::detail::scheduler_thread_info&, std::error_code const&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:400:12 (calc_server+0x589d9b)
    #28 asio::detail::scheduler::run(std::error_code&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:153:10 (calc_server+0x588c2a)
    #29 asio::io_context::run() /home/zyh/NuRaft/asio/asio/include/asio/impl/io_context.ipp:61:24 (calc_server+0x57babf)
    #30 nuraft::asio_service_impl::worker_entry() /home/zyh/NuRaft/src/asio_service.cxx:1607:21 (calc_server+0x57babf)
    #31 void std::__invoke_impl<void, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(std::__invoke_memfun_deref, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x595134)
    #32 std::__invoke_result<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>::type std::__invoke<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #33 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595134)
    #34 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595134)
    #35 void std::__invoke_impl<void, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::__invoke_other, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595134)
    #36 std::__invoke_result<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >::type std::__invoke<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #37 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x595134)
    #38 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x595134)
    #39 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x595134)
    #40 <null> <null> (libstdc++.so.6+0xbd6de)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T3 'nuraft_w_0' (tid=83709, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 std::__shared_ptr<std::thread, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x57a46a)
    #3 std::shared_ptr<std::thread>::shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x57a46a)
    #4 std::shared_ptr<std::thread> std::allocate_shared<std::thread, std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x57a46a)
    #5 std::shared_ptr<std::thread> std::make_shared<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x57a46a)
    #6 std::shared_ptr<std::thread> nuraft::cs_new<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x57a46a)
    #7 nuraft::asio_service_impl::asio_service_impl(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1573:13 (calc_server+0x57a46a)
    #8 nuraft::asio_service::asio_service(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1693:17 (calc_server+0x57df93)
    #9 void __gnu_cxx::new_allocator<nuraft::asio_service>::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527802)
    #10 void std::allocator_traits<std::allocator<nuraft::asio_service> >::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>&, nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x5244ec)
    #11 std::_Sp_counted_ptr_inplace<nuraft::asio_service, std::allocator<nuraft::asio_service>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x5244ec)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, nuraft::asio_service*, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x5244ec)
    #13 std::__shared_ptr<nuraft::asio_service, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x5244ec)
    #14 std::shared_ptr<nuraft::asio_service>::shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x5244ec)
    #15 std::shared_ptr<nuraft::asio_service> std::allocate_shared<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x5244ec)
    #16 std::shared_ptr<nuraft::asio_service> std::make_shared<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x5244ec)
    #17 std::shared_ptr<nuraft::asio_service> nuraft::cs_new<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x5244ec)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:38:17 (calc_server+0x5244ec)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f307ed118 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f307ed118 by thread T7 (mutexes: write M193, write M133):
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::commit_conf(unsigned long, std::shared_ptr<nuraft::log_entry>&) /home/zyh/NuRaft/src/handle_commit.cxx:350:5 (calc_server+0x6716e0)
    #5 nuraft::raft_server::commit_in_bg_exec(unsigned long) /home/zyh/NuRaft/src/handle_commit.cxx:215:13 (calc_server+0x66a6bb)
    #6 nuraft::raft_server::commit_in_bg() /home/zyh/NuRaft/src/handle_commit.cxx:134:9 (calc_server+0x6687d0)
    #7 void std::__invoke_impl<void, void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(std::__invoke_memfun_deref, void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x5700b4)
    #8 std::__invoke_result<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>::type std::__invoke<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5700b4)
    #9 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x5700b4)
    #10 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x5700b4)
    #11 void std::__invoke_impl<void, std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >(std::__invoke_other, std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x5700b4)
    #12 std::__invoke_result<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >::type std::__invoke<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >(std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5700b4)
    #13 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x5700b4)
    #14 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x5700b4)
    #15 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x5700b4)
    #16 <null> <null> (libstdc++.so.6+0xbd6de)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Mutex M193 (0x7b6c00000470) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x668c2d)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x668c2d)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x668c2d)
    #4 nuraft::raft_server::commit_in_bg_exec(unsigned long) /home/zyh/NuRaft/src/handle_commit.cxx:151:34 (calc_server+0x668c2d)
    #5 nuraft::raft_server::commit_in_bg() /home/zyh/NuRaft/src/handle_commit.cxx:134:9 (calc_server+0x6687d0)
    #6 void std::__invoke_impl<void, void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(std::__invoke_memfun_deref, void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x5700b4)
    #7 std::__invoke_result<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>::type std::__invoke<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5700b4)
    #8 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x5700b4)
    #9 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x5700b4)
    #10 void std::__invoke_impl<void, std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >(std::__invoke_other, std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x5700b4)
    #11 std::__invoke_result<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >::type std::__invoke<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >(std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5700b4)
    #12 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x5700b4)
    #13 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x5700b4)
    #14 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x5700b4)
    #15 <null> <null> (libstdc++.so.6+0xbd6de)

  Mutex M133 (0x7b6c000003c8) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x6bb458)
    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:810:10 (calc_server+0x6bb458)
    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/mutex:107:17 (calc_server+0x6bb458)
    #4 std::unique_lock<std::recursive_mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x6bb458)
    #5 std::unique_lock<std::recursive_mutex>::unique_lock(std::recursive_mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x6bb458)
    #6 nuraft::raft_server::restart_election_timer() /home/zyh/NuRaft/src/handle_timeout.cxx:136:5 (calc_server+0x6bb458)
    #7 nuraft::raft_server::start_server(bool) /home/zyh/NuRaft/src/raft_server.cxx:283:9 (calc_server+0x536ee2)
    #8 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #9 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #10 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #11 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #13 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #14 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #15 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #16 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #17 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T7 'nuraft_commit' (tid=83718, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #3 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #4 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #5 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #6 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #7 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #8 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #9 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #10 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #11 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #12 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #13 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #14 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f307ee128 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f307ee128 by thread T7 (mutexes: write M193, write M133):
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::reconfigure(std::shared_ptr<nuraft::cluster_config> const&) /home/zyh/NuRaft/src/handle_commit.cxx:531:5 (calc_server+0x67698e)
    #5 nuraft::raft_server::commit_conf(unsigned long, std::shared_ptr<nuraft::log_entry>&) /home/zyh/NuRaft/src/handle_commit.cxx:356:9 (calc_server+0x671a63)
    #6 nuraft::raft_server::commit_in_bg_exec(unsigned long) /home/zyh/NuRaft/src/handle_commit.cxx:215:13 (calc_server+0x66a6bb)
    #7 nuraft::raft_server::commit_in_bg() /home/zyh/NuRaft/src/handle_commit.cxx:134:9 (calc_server+0x6687d0)
    #8 void std::__invoke_impl<void, void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(std::__invoke_memfun_deref, void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x5700b4)
    #9 std::__invoke_result<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>::type std::__invoke<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5700b4)
    #10 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x5700b4)
    #11 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x5700b4)
    #12 void std::__invoke_impl<void, std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >(std::__invoke_other, std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x5700b4)
    #13 std::__invoke_result<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >::type std::__invoke<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >(std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5700b4)
    #14 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x5700b4)
    #15 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x5700b4)
    #16 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x5700b4)
    #17 <null> <null> (libstdc++.so.6+0xbd6de)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Mutex M193 (0x7b6c00000470) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x668c2d)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x668c2d)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x668c2d)
    #4 nuraft::raft_server::commit_in_bg_exec(unsigned long) /home/zyh/NuRaft/src/handle_commit.cxx:151:34 (calc_server+0x668c2d)
    #5 nuraft::raft_server::commit_in_bg() /home/zyh/NuRaft/src/handle_commit.cxx:134:9 (calc_server+0x6687d0)
    #6 void std::__invoke_impl<void, void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(std::__invoke_memfun_deref, void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x5700b4)
    #7 std::__invoke_result<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>::type std::__invoke<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5700b4)
    #8 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x5700b4)
    #9 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x5700b4)
    #10 void std::__invoke_impl<void, std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >(std::__invoke_other, std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x5700b4)
    #11 std::__invoke_result<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >::type std::__invoke<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >(std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5700b4)
    #12 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x5700b4)
    #13 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x5700b4)
    #14 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x5700b4)
    #15 <null> <null> (libstdc++.so.6+0xbd6de)

  Mutex M133 (0x7b6c000003c8) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x6bb458)
    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:810:10 (calc_server+0x6bb458)
    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/mutex:107:17 (calc_server+0x6bb458)
    #4 std::unique_lock<std::recursive_mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x6bb458)
    #5 std::unique_lock<std::recursive_mutex>::unique_lock(std::recursive_mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x6bb458)
    #6 nuraft::raft_server::restart_election_timer() /home/zyh/NuRaft/src/handle_timeout.cxx:136:5 (calc_server+0x6bb458)
    #7 nuraft::raft_server::start_server(bool) /home/zyh/NuRaft/src/raft_server.cxx:283:9 (calc_server+0x536ee2)
    #8 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #9 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #10 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #11 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #13 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #14 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #15 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #16 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #17 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T7 'nuraft_commit' (tid=83718, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #3 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #4 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #5 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #6 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #7 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #8 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #9 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #10 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #11 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #12 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #13 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #14 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f307ef138 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f307ef138 by thread T7 (mutexes: write M193, write M133):
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::reconfigure(std::shared_ptr<nuraft::cluster_config> const&) /home/zyh/NuRaft/src/handle_commit.cxx:741:5 (calc_server+0x67d865)
    #5 nuraft::raft_server::commit_conf(unsigned long, std::shared_ptr<nuraft::log_entry>&) /home/zyh/NuRaft/src/handle_commit.cxx:356:9 (calc_server+0x671a63)
    #6 nuraft::raft_server::commit_in_bg_exec(unsigned long) /home/zyh/NuRaft/src/handle_commit.cxx:215:13 (calc_server+0x66a6bb)
    #7 nuraft::raft_server::commit_in_bg() /home/zyh/NuRaft/src/handle_commit.cxx:134:9 (calc_server+0x6687d0)
    #8 void std::__invoke_impl<void, void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(std::__invoke_memfun_deref, void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x5700b4)
    #9 std::__invoke_result<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>::type std::__invoke<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5700b4)
    #10 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x5700b4)
    #11 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x5700b4)
    #12 void std::__invoke_impl<void, std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >(std::__invoke_other, std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x5700b4)
    #13 std::__invoke_result<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >::type std::__invoke<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >(std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5700b4)
    #14 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x5700b4)
    #15 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x5700b4)
    #16 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x5700b4)
    #17 <null> <null> (libstdc++.so.6+0xbd6de)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Mutex M193 (0x7b6c00000470) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x668c2d)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x668c2d)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x668c2d)
    #4 nuraft::raft_server::commit_in_bg_exec(unsigned long) /home/zyh/NuRaft/src/handle_commit.cxx:151:34 (calc_server+0x668c2d)
    #5 nuraft::raft_server::commit_in_bg() /home/zyh/NuRaft/src/handle_commit.cxx:134:9 (calc_server+0x6687d0)
    #6 void std::__invoke_impl<void, void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(std::__invoke_memfun_deref, void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x5700b4)
    #7 std::__invoke_result<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>::type std::__invoke<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5700b4)
    #8 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x5700b4)
    #9 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x5700b4)
    #10 void std::__invoke_impl<void, std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >(std::__invoke_other, std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x5700b4)
    #11 std::__invoke_result<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >::type std::__invoke<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >(std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5700b4)
    #12 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x5700b4)
    #13 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x5700b4)
    #14 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x5700b4)
    #15 <null> <null> (libstdc++.so.6+0xbd6de)

  Mutex M133 (0x7b6c000003c8) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x6bb458)
    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:810:10 (calc_server+0x6bb458)
    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/mutex:107:17 (calc_server+0x6bb458)
    #4 std::unique_lock<std::recursive_mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x6bb458)
    #5 std::unique_lock<std::recursive_mutex>::unique_lock(std::recursive_mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x6bb458)
    #6 nuraft::raft_server::restart_election_timer() /home/zyh/NuRaft/src/handle_timeout.cxx:136:5 (calc_server+0x6bb458)
    #7 nuraft::raft_server::start_server(bool) /home/zyh/NuRaft/src/raft_server.cxx:283:9 (calc_server+0x536ee2)
    #8 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #9 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #10 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #11 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #13 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #14 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #15 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #16 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #17 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T7 'nuraft_commit' (tid=83718, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #3 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #4 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #5 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #6 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #7 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #8 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #9 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #10 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #11 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #12 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #13 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #14 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f307f0148 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f307f0148 by main thread (mutexes: write M133):
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::invite_srv_to_join_cluster() /home/zyh/NuRaft/src/handle_join_leave.cxx:130:5 (calc_server+0x6864a3)
    #5 nuraft::raft_server::handle_add_srv_req(nuraft::req_msg&) /home/zyh/NuRaft/src/handle_join_leave.cxx:110:5 (calc_server+0x683f9e)
    #6 nuraft::raft_server::handle_ext_msg(nuraft::req_msg&) /home/zyh/NuRaft/src/raft_server.cxx:1280:16 (calc_server+0x543d81)
    #7 nuraft::raft_server::process_req(nuraft::req_msg&) /home/zyh/NuRaft/src/raft_server.cxx:664:16 (calc_server+0x5412cd)
    #8 nuraft::raft_server::send_msg_to_leader(std::shared_ptr<nuraft::req_msg>&) /home/zyh/NuRaft/src/handle_user_cmd.cxx:118:30 (calc_server+0x50b18b)
    #9 nuraft::raft_server::add_srv(nuraft::srv_config const&) /home/zyh/NuRaft/src/handle_user_cmd.cxx:65:12 (calc_server+0x509be3)
    #10 calc_server::add_server(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::vector<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > const&) /home/zyh/NuRaft/examples/example_common.hxx:88:50 (calc_server+0x4bbc6d)
    #11 calc_server::do_cmd(std::vector<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > const&) /home/zyh/NuRaft/examples/calculator/calc_server.cxx:187:9 (calc_server+0x4be8c8)
    #12 calc_server::loop() /home/zyh/NuRaft/examples/example_common.hxx:145:21 (calc_server+0x4be26a)
    #13 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:214:5 (calc_server+0x4c8a55)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Mutex M133 (0x7b6c000003c8) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x6bb458)
    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:810:10 (calc_server+0x6bb458)
    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/mutex:107:17 (calc_server+0x6bb458)
    #4 std::unique_lock<std::recursive_mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x6bb458)
    #5 std::unique_lock<std::recursive_mutex>::unique_lock(std::recursive_mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x6bb458)
    #6 nuraft::raft_server::restart_election_timer() /home/zyh/NuRaft/src/handle_timeout.cxx:136:5 (calc_server+0x6bb458)
    #7 nuraft::raft_server::start_server(bool) /home/zyh/NuRaft/src/raft_server.cxx:283:9 (calc_server+0x536ee2)
    #8 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #9 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #10 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #11 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #13 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #14 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #15 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #16 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #17 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f307f1158 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f307f1158 by thread T3:
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::asio_rpc_client::connected(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>) /home/zyh/NuRaft/src/asio_service.cxx:1187:13 (calc_server+0x5b7653)
    #5 void std::__invoke_impl<void, void (nuraft::asio_rpc_client::*&)(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>), std::shared_ptr<nuraft::asio_rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long&, std::error_code const&, asio::ip::basic_resolver_iterator<asio::ip::tcp> const&>(std::__invoke_memfun_deref, void (nuraft::asio_rpc_client::*&)(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>), std::shared_ptr<nuraft::asio_rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long&, std::error_code const&, asio::ip::basic_resolver_iterator<asio::ip::tcp> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x5bfbfa)
    #6 std::__invoke_result<void (nuraft::asio_rpc_client::*&)(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>), std::shared_ptr<nuraft::asio_rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long&, std::error_code const&, asio::ip::basic_resolver_iterator<asio::ip::tcp> const&>::type std::__invoke<void (nuraft::asio_rpc_client::*&)(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>), std::shared_ptr<nuraft::asio_rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long&, std::error_code const&, asio::ip::basic_resolver_iterator<asio::ip::tcp> const&>(void (nuraft::asio_rpc_client::*&)(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>), std::shared_ptr<nuraft::asio_rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long&, std::error_code const&, asio::ip::basic_resolver_iterator<asio::ip::tcp> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5b9528)
    #7 void std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)>::__call<void, std::error_code const&, asio::ip::basic_resolver_iterator<asio::ip::tcp> const&, 0ul, 1ul, 2ul, 3ul, 4ul, 5ul>(std::tuple<std::error_code const&, asio::ip::basic_resolver_iterator<asio::ip::tcp> const&>&&, std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x5b9528)
    #8 void std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)>::operator()<std::error_code const&, asio::ip::basic_resolver_iterator<asio::ip::tcp> const&, void>(std::error_code const&, asio::ip::basic_resolver_iterator<asio::ip::tcp> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x5b9528)
    #9 asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >::operator()(std::error_code, int) /home/zyh/NuRaft/asio/asio/include/asio/impl/connect.hpp:540:9 (calc_server+0x5b9528)
    #10 asio::detail::binder1<asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >, std::error_code>::operator()() /home/zyh/NuRaft/asio/asio/include/asio/detail/bind_handler.hpp:64:5 (calc_server+0x5bce23)
    #11 void asio::asio_handler_invoke<asio::detail::binder1<asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >, std::error_code> >(asio::detail::binder1<asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >, std::error_code>&, ...) /home/zyh/NuRaft/asio/asio/include/asio/handler_invoke_hook.hpp:68:3 (calc_server+0x5bce23)
    #12 void asio_handler_invoke_helpers::invoke<asio::detail::binder1<asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >, std::error_code>, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >(asio::detail::binder1<asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >, std::error_code>&, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_invoke_helpers.hpp:37:3 (calc_server+0x5bce23)
    #13 void asio::detail::asio_handler_invoke<asio::detail::binder1<asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >, std::error_code>, asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >(asio::detail::binder1<asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >, std::error_code>&, asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >*) /home/zyh/NuRaft/asio/asio/include/asio/impl/connect.hpp:590:5 (calc_server+0x5bce23)
    #14 void asio_handler_invoke_helpers::invoke<asio::detail::binder1<asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >, std::error_code>, asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> > >(asio::detail::binder1<asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >, std::error_code>&, asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_invoke_helpers.hpp:37:3 (calc_server+0x5bce23)
    #15 void asio::detail::handler_work<asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >, asio::system_executor>::complete<asio::detail::binder1<asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >, std::error_code> >(asio::detail::binder1<asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >, std::error_code>&, asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_work.hpp:81:5 (calc_server+0x5bce23)
    #16 asio::detail::reactive_socket_connect_op<asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> > >::do_complete(void*, asio::detail::scheduler_operation*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/reactive_socket_connect_op.hpp:99:9 (calc_server+0x5bce23)
    #17 asio::detail::scheduler_operation::complete(void*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/scheduler_operation.hpp:39:5 (calc_server+0x5bb870)
    #18 asio::detail::epoll_reactor::descriptor_state::do_complete(void*, asio::detail::scheduler_operation*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/epoll_reactor.ipp:775:11 (calc_server+0x5bb870)
    #19 asio::detail::scheduler_operation::complete(void*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/scheduler_operation.hpp:39:5 (calc_server+0x589d9b)
    #20 asio::detail::scheduler::do_run_one(asio::detail::conditionally_enabled_mutex::scoped_lock&, asio::detail::scheduler_thread_info&, std::error_code const&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:400:12 (calc_server+0x589d9b)
    #21 asio::detail::scheduler::run(std::error_code&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:153:10 (calc_server+0x588c2a)
    #22 asio::io_context::run() /home/zyh/NuRaft/asio/asio/include/asio/impl/io_context.ipp:61:24 (calc_server+0x57babf)
    #23 nuraft::asio_service_impl::worker_entry() /home/zyh/NuRaft/src/asio_service.cxx:1607:21 (calc_server+0x57babf)
    #24 void std::__invoke_impl<void, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(std::__invoke_memfun_deref, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x595134)
    #25 std::__invoke_result<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>::type std::__invoke<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #26 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595134)
    #27 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595134)
    #28 void std::__invoke_impl<void, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::__invoke_other, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595134)
    #29 std::__invoke_result<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >::type std::__invoke<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #30 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x595134)
    #31 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x595134)
    #32 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x595134)
    #33 <null> <null> (libstdc++.so.6+0xbd6de)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T3 'nuraft_w_0' (tid=83709, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 std::__shared_ptr<std::thread, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x57a46a)
    #3 std::shared_ptr<std::thread>::shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x57a46a)
    #4 std::shared_ptr<std::thread> std::allocate_shared<std::thread, std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x57a46a)
    #5 std::shared_ptr<std::thread> std::make_shared<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x57a46a)
    #6 std::shared_ptr<std::thread> nuraft::cs_new<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x57a46a)
    #7 nuraft::asio_service_impl::asio_service_impl(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1573:13 (calc_server+0x57a46a)
    #8 nuraft::asio_service::asio_service(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1693:17 (calc_server+0x57df93)
    #9 void __gnu_cxx::new_allocator<nuraft::asio_service>::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527802)
    #10 void std::allocator_traits<std::allocator<nuraft::asio_service> >::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>&, nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x5244ec)
    #11 std::_Sp_counted_ptr_inplace<nuraft::asio_service, std::allocator<nuraft::asio_service>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x5244ec)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, nuraft::asio_service*, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x5244ec)
    #13 std::__shared_ptr<nuraft::asio_service, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x5244ec)
    #14 std::shared_ptr<nuraft::asio_service>::shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x5244ec)
    #15 std::shared_ptr<nuraft::asio_service> std::allocate_shared<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x5244ec)
    #16 std::shared_ptr<nuraft::asio_service> std::make_shared<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x5244ec)
    #17 std::shared_ptr<nuraft::asio_service> nuraft::cs_new<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x5244ec)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:38:17 (calc_server+0x5244ec)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f307f2168 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f307f2168 by thread T6 (mutexes: write M133):
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::handle_join_cluster_resp(nuraft::resp_msg&) /home/zyh/NuRaft/src/handle_join_leave.cxx:189:13 (calc_server+0x6892a1)
    #5 nuraft::raft_server::handle_ext_resp(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /home/zyh/NuRaft/src/raft_server.cxx:1335:9 (calc_server+0x53367f)
    #6 void std::__invoke_impl<void, void (nuraft::raft_server::*&)(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::raft_server*&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>(std::__invoke_memfun_deref, void (nuraft::raft_server::*&)(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::raft_server*&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x56997a)
    #7 std::__invoke_result<void (nuraft::raft_server::*&)(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::raft_server*&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>::type std::__invoke<void (nuraft::raft_server::*&)(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::raft_server*&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>(void (nuraft::raft_server::*&)(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::raft_server*&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x56997a)
    #8 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>::__call<void, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&, 0ul, 1ul, 2ul>(std::tuple<std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>&&, std::_Index_tuple<0ul, 1ul, 2ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x56997a)
    #9 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>::operator()<std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&, void>(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x56997a)
    #10 std::_Function_handler<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)> >::_M_invoke(std::_Any_data const&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:316:2 (calc_server+0x56997a)
    #11 std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>::operator()(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) const /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:706:14 (calc_server+0x6e016f)
    #12 nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> >::set_result(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /home/zyh/NuRaft/include/libnuraft/async.hxx:163:32 (calc_server+0x6e016f)
    #13 nuraft::peer::handle_rpc_result(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /home/zyh/NuRaft/src/peer.cxx:140:25 (calc_server+0x6dbe3b)
    #14 void std::__invoke_impl<void, void (nuraft::peer::*&)(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::peer*&, std::shared_ptr<nuraft::peer>&, std::shared_ptr<nuraft::rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>(std::__invoke_memfun_deref, void (nuraft::peer::*&)(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::peer*&, std::shared_ptr<nuraft::peer>&, std::shared_ptr<nuraft::rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x6e1c67)
    #15 std::__invoke_result<void (nuraft::peer::*&)(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::peer*&, std::shared_ptr<nuraft::peer>&, std::shared_ptr<nuraft::rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>::type std::__invoke<void (nuraft::peer::*&)(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::peer*&, std::shared_ptr<nuraft::peer>&, std::shared_ptr<nuraft::rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>(void (nuraft::peer::*&)(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::peer*&, std::shared_ptr<nuraft::peer>&, std::shared_ptr<nuraft::rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x6e1833)
    #16 void std::_Bind<void (nuraft::peer::* (nuraft::peer*, std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>::__call<void, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&, 0ul, 1ul, 2ul, 3ul, 4ul, 5ul, 6ul>(std::tuple<std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>&&, std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul, 6ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x6e1833)
    #17 void std::_Bind<void (nuraft::peer::* (nuraft::peer*, std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>::operator()<std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&, void>(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x6e1833)
    #18 std::_Function_handler<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), std::_Bind<void (nuraft::peer::* (nuraft::peer*, std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)> >::_M_invoke(std::_Any_data const&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:316:2 (calc_server+0x6e1833)
    #19 std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>::operator()(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) const /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:706:14 (calc_server+0x5d1b05)
    #20 nuraft::asio_rpc_client::response_read(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long) /home/zyh/NuRaft/src/asio_service.cxx:1373:13 (calc_server+0x5d1b05)
    #21 void std::__invoke_impl<void, void (nuraft::asio_rpc_client::*&)(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long), std::shared_ptr<nuraft::asio_rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code const&, unsigned long>(std::__invoke_memfun_deref, void (nuraft::asio_rpc_client::*&)(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long), std::shared_ptr<nuraft::asio_rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code const&, unsigned long&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x5d7af5)
    #22 std::__invoke_result<void (nuraft::asio_rpc_client::*&)(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long), std::shared_ptr<nuraft::asio_rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code const&, unsigned long>::type std::__invoke<void (nuraft::asio_rpc_client::*&)(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long), std::shared_ptr<nuraft::asio_rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code const&, unsigned long>(void (nuraft::asio_rpc_client::*&)(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long), std::shared_ptr<nuraft::asio_rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code const&, unsigned long&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5d7af5)
    #23 void std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)>::__call<void, std::error_code const&, unsigned long&&, 0ul, 1ul, 2ul, 3ul, 4ul, 5ul>(std::tuple<std::error_code const&, unsigned long&&>&&, std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x5d7af5)
    #24 void std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)>::operator()<std::error_code const&, unsigned long, void>(std::error_code const&, unsigned long&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x5d7af5)
    #25 asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >::operator()(std::error_code const&, unsigned long, int) /home/zyh/NuRaft/asio/asio/include/asio/impl/read.hpp:284:9 (calc_server+0x5d7af5)
    #26 asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long>::operator()() /home/zyh/NuRaft/asio/asio/include/asio/detail/bind_handler.hpp:163:5 (calc_server+0x5d7af5)
    #27 void asio::asio_handler_invoke<asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long> >(asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long>&, ...) /home/zyh/NuRaft/asio/asio/include/asio/handler_invoke_hook.hpp:68:3 (calc_server+0x5d77ff)
    #28 void asio_handler_invoke_helpers::invoke<asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long>, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >(asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long>&, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_invoke_helpers.hpp:37:3 (calc_server+0x5d77ff)
    #29 void asio::detail::asio_handler_invoke<asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long>, asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >(asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long>&, asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >*) /home/zyh/NuRaft/asio/asio/include/asio/impl/read.hpp:337:5 (calc_server+0x5d77ff)
    #30 void asio_handler_invoke_helpers::invoke<asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long>, asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> > >(asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long>&, asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_invoke_helpers.hpp:37:3 (calc_server+0x5d77ff)
    #31 void asio::detail::handler_work<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, asio::system_executor>::complete<asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long> >(asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long>&, asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_work.hpp:81:5 (calc_server+0x5d77ff)
    #32 asio::detail::reactive_socket_recv_op<asio::mutable_buffers_1, asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> > >::do_complete(void*, asio::detail::scheduler_operation*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/reactive_socket_recv_op.hpp:121:9 (calc_server+0x5d77ff)
    #33 asio::detail::scheduler_operation::complete(void*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/scheduler_operation.hpp:39:5 (calc_server+0x5bb870)
    #34 asio::detail::epoll_reactor::descriptor_state::do_complete(void*, asio::detail::scheduler_operation*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/epoll_reactor.ipp:775:11 (calc_server+0x5bb870)
    #35 asio::detail::scheduler_operation::complete(void*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/scheduler_operation.hpp:39:5 (calc_server+0x589d9b)
    #36 asio::detail::scheduler::do_run_one(asio::detail::conditionally_enabled_mutex::scoped_lock&, asio::detail::scheduler_thread_info&, std::error_code const&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:400:12 (calc_server+0x589d9b)
    #37 asio::detail::scheduler::run(std::error_code&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:153:10 (calc_server+0x588c2a)
    #38 asio::io_context::run() /home/zyh/NuRaft/asio/asio/include/asio/impl/io_context.ipp:61:24 (calc_server+0x57babf)
    #39 nuraft::asio_service_impl::worker_entry() /home/zyh/NuRaft/src/asio_service.cxx:1607:21 (calc_server+0x57babf)
    #40 void std::__invoke_impl<void, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(std::__invoke_memfun_deref, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x595134)
    #41 std::__invoke_result<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>::type std::__invoke<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #42 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595134)
    #43 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595134)
    #44 void std::__invoke_impl<void, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::__invoke_other, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595134)
    #45 std::__invoke_result<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >::type std::__invoke<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #46 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x595134)
    #47 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x595134)
    #48 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x595134)
    #49 <null> <null> (libstdc++.so.6+0xbd6de)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Mutex M133 (0x7b6c000003c8) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x6bb458)
    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:810:10 (calc_server+0x6bb458)
    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/mutex:107:17 (calc_server+0x6bb458)
    #4 std::unique_lock<std::recursive_mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x6bb458)
    #5 std::unique_lock<std::recursive_mutex>::unique_lock(std::recursive_mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x6bb458)
    #6 nuraft::raft_server::restart_election_timer() /home/zyh/NuRaft/src/handle_timeout.cxx:136:5 (calc_server+0x6bb458)
    #7 nuraft::raft_server::start_server(bool) /home/zyh/NuRaft/src/raft_server.cxx:283:9 (calc_server+0x536ee2)
    #8 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #9 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #10 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #11 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #13 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #14 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #15 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #16 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #17 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T6 'nuraft_w_3' (tid=83715, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 std::__shared_ptr<std::thread, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x57a46a)
    #3 std::shared_ptr<std::thread>::shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x57a46a)
    #4 std::shared_ptr<std::thread> std::allocate_shared<std::thread, std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x57a46a)
    #5 std::shared_ptr<std::thread> std::make_shared<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x57a46a)
    #6 std::shared_ptr<std::thread> nuraft::cs_new<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x57a46a)
    #7 nuraft::asio_service_impl::asio_service_impl(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1573:13 (calc_server+0x57a46a)
    #8 nuraft::asio_service::asio_service(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1693:17 (calc_server+0x57df93)
    #9 void __gnu_cxx::new_allocator<nuraft::asio_service>::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527802)
    #10 void std::allocator_traits<std::allocator<nuraft::asio_service> >::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>&, nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x5244ec)
    #11 std::_Sp_counted_ptr_inplace<nuraft::asio_service, std::allocator<nuraft::asio_service>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x5244ec)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, nuraft::asio_service*, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x5244ec)
    #13 std::__shared_ptr<nuraft::asio_service, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x5244ec)
    #14 std::shared_ptr<nuraft::asio_service>::shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x5244ec)
    #15 std::shared_ptr<nuraft::asio_service> std::allocate_shared<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x5244ec)
    #16 std::shared_ptr<nuraft::asio_service> std::make_shared<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x5244ec)
    #17 std::shared_ptr<nuraft::asio_service> nuraft::cs_new<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x5244ec)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:38:17 (calc_server+0x5244ec)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f307f3178 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f307f3178 by thread T6 (mutexes: write M133):
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::sync_log_to_new_srv(unsigned long) /home/zyh/NuRaft/src/handle_join_leave.cxx:212:9 (calc_server+0x68a010)
    #5 nuraft::raft_server::handle_join_cluster_resp(nuraft::resp_msg&) /home/zyh/NuRaft/src/handle_join_leave.cxx:191:13 (calc_server+0x6893b2)
    #6 nuraft::raft_server::handle_ext_resp(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /home/zyh/NuRaft/src/raft_server.cxx:1335:9 (calc_server+0x53367f)
    #7 void std::__invoke_impl<void, void (nuraft::raft_server::*&)(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::raft_server*&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>(std::__invoke_memfun_deref, void (nuraft::raft_server::*&)(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::raft_server*&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x56997a)
    #8 std::__invoke_result<void (nuraft::raft_server::*&)(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::raft_server*&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>::type std::__invoke<void (nuraft::raft_server::*&)(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::raft_server*&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>(void (nuraft::raft_server::*&)(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::raft_server*&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x56997a)
    #9 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>::__call<void, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&, 0ul, 1ul, 2ul>(std::tuple<std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>&&, std::_Index_tuple<0ul, 1ul, 2ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x56997a)
    #10 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>::operator()<std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&, void>(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x56997a)
    #11 std::_Function_handler<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)> >::_M_invoke(std::_Any_data const&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:316:2 (calc_server+0x56997a)
    #12 std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>::operator()(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) const /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:706:14 (calc_server+0x6e016f)
    #13 nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> >::set_result(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /home/zyh/NuRaft/include/libnuraft/async.hxx:163:32 (calc_server+0x6e016f)
    #14 nuraft::peer::handle_rpc_result(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /home/zyh/NuRaft/src/peer.cxx:140:25 (calc_server+0x6dbe3b)
    #15 void std::__invoke_impl<void, void (nuraft::peer::*&)(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::peer*&, std::shared_ptr<nuraft::peer>&, std::shared_ptr<nuraft::rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>(std::__invoke_memfun_deref, void (nuraft::peer::*&)(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::peer*&, std::shared_ptr<nuraft::peer>&, std::shared_ptr<nuraft::rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x6e1c67)
    #16 std::__invoke_result<void (nuraft::peer::*&)(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::peer*&, std::shared_ptr<nuraft::peer>&, std::shared_ptr<nuraft::rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>::type std::__invoke<void (nuraft::peer::*&)(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::peer*&, std::shared_ptr<nuraft::peer>&, std::shared_ptr<nuraft::rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>(void (nuraft::peer::*&)(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::peer*&, std::shared_ptr<nuraft::peer>&, std::shared_ptr<nuraft::rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x6e1833)
    #17 void std::_Bind<void (nuraft::peer::* (nuraft::peer*, std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>::__call<void, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&, 0ul, 1ul, 2ul, 3ul, 4ul, 5ul, 6ul>(std::tuple<std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>&&, std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul, 6ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x6e1833)
    #18 void std::_Bind<void (nuraft::peer::* (nuraft::peer*, std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>::operator()<std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&, void>(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x6e1833)
    #19 std::_Function_handler<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), std::_Bind<void (nuraft::peer::* (nuraft::peer*, std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)> >::_M_invoke(std::_Any_data const&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:316:2 (calc_server+0x6e1833)
    #20 std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>::operator()(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) const /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:706:14 (calc_server+0x5d1b05)
    #21 nuraft::asio_rpc_client::response_read(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long) /home/zyh/NuRaft/src/asio_service.cxx:1373:13 (calc_server+0x5d1b05)
    #22 void std::__invoke_impl<void, void (nuraft::asio_rpc_client::*&)(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long), std::shared_ptr<nuraft::asio_rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code const&, unsigned long>(std::__invoke_memfun_deref, void (nuraft::asio_rpc_client::*&)(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long), std::shared_ptr<nuraft::asio_rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code const&, unsigned long&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x5d7af5)
    #23 std::__invoke_result<void (nuraft::asio_rpc_client::*&)(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long), std::shared_ptr<nuraft::asio_rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code const&, unsigned long>::type std::__invoke<void (nuraft::asio_rpc_client::*&)(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long), std::shared_ptr<nuraft::asio_rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code const&, unsigned long>(void (nuraft::asio_rpc_client::*&)(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long), std::shared_ptr<nuraft::asio_rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code const&, unsigned long&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5d7af5)
    #24 void std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)>::__call<void, std::error_code const&, unsigned long&&, 0ul, 1ul, 2ul, 3ul, 4ul, 5ul>(std::tuple<std::error_code const&, unsigned long&&>&&, std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x5d7af5)
    #25 void std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)>::operator()<std::error_code const&, unsigned long, void>(std::error_code const&, unsigned long&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x5d7af5)
    #26 asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >::operator()(std::error_code const&, unsigned long, int) /home/zyh/NuRaft/asio/asio/include/asio/impl/read.hpp:284:9 (calc_server+0x5d7af5)
    #27 asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long>::operator()() /home/zyh/NuRaft/asio/asio/include/asio/detail/bind_handler.hpp:163:5 (calc_server+0x5d7af5)
    #28 void asio::asio_handler_invoke<asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long> >(asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long>&, ...) /home/zyh/NuRaft/asio/asio/include/asio/handler_invoke_hook.hpp:68:3 (calc_server+0x5d77ff)
    #29 void asio_handler_invoke_helpers::invoke<asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long>, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >(asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long>&, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_invoke_helpers.hpp:37:3 (calc_server+0x5d77ff)
    #30 void asio::detail::asio_handler_invoke<asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long>, asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >(asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long>&, asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >*) /home/zyh/NuRaft/asio/asio/include/asio/impl/read.hpp:337:5 (calc_server+0x5d77ff)
    #31 void asio_handler_invoke_helpers::invoke<asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long>, asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> > >(asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long>&, asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_invoke_helpers.hpp:37:3 (calc_server+0x5d77ff)
    #32 void asio::detail::handler_work<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, asio::system_executor>::complete<asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long> >(asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long>&, asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_work.hpp:81:5 (calc_server+0x5d77ff)
    #33 asio::detail::reactive_socket_recv_op<asio::mutable_buffers_1, asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> > >::do_complete(void*, asio::detail::scheduler_operation*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/reactive_socket_recv_op.hpp:121:9 (calc_server+0x5d77ff)
    #34 asio::detail::scheduler_operation::complete(void*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/scheduler_operation.hpp:39:5 (calc_server+0x5bb870)
    #35 asio::detail::epoll_reactor::descriptor_state::do_complete(void*, asio::detail::scheduler_operation*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/epoll_reactor.ipp:775:11 (calc_server+0x5bb870)
    #36 asio::detail::scheduler_operation::complete(void*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/scheduler_operation.hpp:39:5 (calc_server+0x589d9b)
    #37 asio::detail::scheduler::do_run_one(asio::detail::conditionally_enabled_mutex::scoped_lock&, asio::detail::scheduler_thread_info&, std::error_code const&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:400:12 (calc_server+0x589d9b)
    #38 asio::detail::scheduler::run(std::error_code&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:153:10 (calc_server+0x588c2a)
    #39 asio::io_context::run() /home/zyh/NuRaft/asio/asio/include/asio/impl/io_context.ipp:61:24 (calc_server+0x57babf)
    #40 nuraft::asio_service_impl::worker_entry() /home/zyh/NuRaft/src/asio_service.cxx:1607:21 (calc_server+0x57babf)
    #41 void std::__invoke_impl<void, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(std::__invoke_memfun_deref, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x595134)
    #42 std::__invoke_result<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>::type std::__invoke<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #43 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595134)
    #44 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595134)
    #45 void std::__invoke_impl<void, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::__invoke_other, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595134)
    #46 std::__invoke_result<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >::type std::__invoke<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #47 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x595134)
    #48 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x595134)
    #49 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x595134)
    #50 <null> <null> (libstdc++.so.6+0xbd6de)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Mutex M133 (0x7b6c000003c8) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x6bb458)
    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:810:10 (calc_server+0x6bb458)
    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/mutex:107:17 (calc_server+0x6bb458)
    #4 std::unique_lock<std::recursive_mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x6bb458)
    #5 std::unique_lock<std::recursive_mutex>::unique_lock(std::recursive_mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x6bb458)
    #6 nuraft::raft_server::restart_election_timer() /home/zyh/NuRaft/src/handle_timeout.cxx:136:5 (calc_server+0x6bb458)
    #7 nuraft::raft_server::start_server(bool) /home/zyh/NuRaft/src/raft_server.cxx:283:9 (calc_server+0x536ee2)
    #8 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #9 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #10 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #11 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #13 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #14 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #15 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #16 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #17 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T6 'nuraft_w_3' (tid=83715, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 std::__shared_ptr<std::thread, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x57a46a)
    #3 std::shared_ptr<std::thread>::shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x57a46a)
    #4 std::shared_ptr<std::thread> std::allocate_shared<std::thread, std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x57a46a)
    #5 std::shared_ptr<std::thread> std::make_shared<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x57a46a)
    #6 std::shared_ptr<std::thread> nuraft::cs_new<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x57a46a)
    #7 nuraft::asio_service_impl::asio_service_impl(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1573:13 (calc_server+0x57a46a)
    #8 nuraft::asio_service::asio_service(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1693:17 (calc_server+0x57df93)
    #9 void __gnu_cxx::new_allocator<nuraft::asio_service>::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527802)
    #10 void std::allocator_traits<std::allocator<nuraft::asio_service> >::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>&, nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x5244ec)
    #11 std::_Sp_counted_ptr_inplace<nuraft::asio_service, std::allocator<nuraft::asio_service>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x5244ec)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, nuraft::asio_service*, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x5244ec)
    #13 std::__shared_ptr<nuraft::asio_service, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x5244ec)
    #14 std::shared_ptr<nuraft::asio_service>::shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x5244ec)
    #15 std::shared_ptr<nuraft::asio_service> std::allocate_shared<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x5244ec)
    #16 std::shared_ptr<nuraft::asio_service> std::make_shared<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x5244ec)
    #17 std::shared_ptr<nuraft::asio_service> nuraft::cs_new<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x5244ec)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:38:17 (calc_server+0x5244ec)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
async request is in progress (check with `list` command)
[32mcalc 1> [0m==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f307f61a8 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f307f61a8 by thread T7 (mutexes: write M193, write M133):
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::reconfigure(std::shared_ptr<nuraft::cluster_config> const&) /home/zyh/NuRaft/src/handle_commit.cxx:609:9 (calc_server+0x67993c)
    #5 nuraft::raft_server::commit_conf(unsigned long, std::shared_ptr<nuraft::log_entry>&) /home/zyh/NuRaft/src/handle_commit.cxx:356:9 (calc_server+0x671a63)
    #6 nuraft::raft_server::commit_in_bg_exec(unsigned long) /home/zyh/NuRaft/src/handle_commit.cxx:215:13 (calc_server+0x66a6bb)
    #7 nuraft::raft_server::commit_in_bg() /home/zyh/NuRaft/src/handle_commit.cxx:134:9 (calc_server+0x6687d0)
    #8 void std::__invoke_impl<void, void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(std::__invoke_memfun_deref, void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x5700b4)
    #9 std::__invoke_result<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>::type std::__invoke<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5700b4)
    #10 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x5700b4)
    #11 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x5700b4)
    #12 void std::__invoke_impl<void, std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >(std::__invoke_other, std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x5700b4)
    #13 std::__invoke_result<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >::type std::__invoke<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >(std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5700b4)
    #14 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x5700b4)
    #15 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x5700b4)
    #16 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x5700b4)
    #17 <null> <null> (libstdc++.so.6+0xbd6de)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Mutex M193 (0x7b6c00000470) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x668c2d)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x668c2d)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x668c2d)
    #4 nuraft::raft_server::commit_in_bg_exec(unsigned long) /home/zyh/NuRaft/src/handle_commit.cxx:151:34 (calc_server+0x668c2d)
    #5 nuraft::raft_server::commit_in_bg() /home/zyh/NuRaft/src/handle_commit.cxx:134:9 (calc_server+0x6687d0)
    #6 void std::__invoke_impl<void, void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(std::__invoke_memfun_deref, void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x5700b4)
    #7 std::__invoke_result<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>::type std::__invoke<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5700b4)
    #8 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x5700b4)
    #9 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x5700b4)
    #10 void std::__invoke_impl<void, std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >(std::__invoke_other, std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x5700b4)
    #11 std::__invoke_result<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >::type std::__invoke<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >(std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5700b4)
    #12 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x5700b4)
    #13 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x5700b4)
    #14 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x5700b4)
    #15 <null> <null> (libstdc++.so.6+0xbd6de)

  Mutex M133 (0x7b6c000003c8) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x6bb458)
    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:810:10 (calc_server+0x6bb458)
    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/mutex:107:17 (calc_server+0x6bb458)
    #4 std::unique_lock<std::recursive_mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x6bb458)
    #5 std::unique_lock<std::recursive_mutex>::unique_lock(std::recursive_mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x6bb458)
    #6 nuraft::raft_server::restart_election_timer() /home/zyh/NuRaft/src/handle_timeout.cxx:136:5 (calc_server+0x6bb458)
    #7 nuraft::raft_server::start_server(bool) /home/zyh/NuRaft/src/raft_server.cxx:283:9 (calc_server+0x536ee2)
    #8 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #9 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #10 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #11 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #13 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #14 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #15 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #16 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #17 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T7 'nuraft_commit' (tid=83718, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #3 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #4 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #5 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #6 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #7 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #8 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #9 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #10 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #11 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #12 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #13 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #14 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f307f71b8 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f307f71b8 by thread T7 (mutexes: write M193, write M133):
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::reconfigure(std::shared_ptr<nuraft::cluster_config> const&) /home/zyh/NuRaft/src/handle_commit.cxx:613:13 (calc_server+0x67a0be)
    #5 nuraft::raft_server::commit_conf(unsigned long, std::shared_ptr<nuraft::log_entry>&) /home/zyh/NuRaft/src/handle_commit.cxx:356:9 (calc_server+0x671a63)
    #6 nuraft::raft_server::commit_in_bg_exec(unsigned long) /home/zyh/NuRaft/src/handle_commit.cxx:215:13 (calc_server+0x66a6bb)
    #7 nuraft::raft_server::commit_in_bg() /home/zyh/NuRaft/src/handle_commit.cxx:134:9 (calc_server+0x6687d0)
    #8 void std::__invoke_impl<void, void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(std::__invoke_memfun_deref, void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x5700b4)
    #9 std::__invoke_result<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>::type std::__invoke<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5700b4)
    #10 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x5700b4)
    #11 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x5700b4)
    #12 void std::__invoke_impl<void, std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >(std::__invoke_other, std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x5700b4)
    #13 std::__invoke_result<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >::type std::__invoke<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >(std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5700b4)
    #14 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x5700b4)
    #15 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x5700b4)
    #16 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x5700b4)
    #17 <null> <null> (libstdc++.so.6+0xbd6de)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Mutex M193 (0x7b6c00000470) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x668c2d)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x668c2d)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x668c2d)
    #4 nuraft::raft_server::commit_in_bg_exec(unsigned long) /home/zyh/NuRaft/src/handle_commit.cxx:151:34 (calc_server+0x668c2d)
    #5 nuraft::raft_server::commit_in_bg() /home/zyh/NuRaft/src/handle_commit.cxx:134:9 (calc_server+0x6687d0)
    #6 void std::__invoke_impl<void, void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(std::__invoke_memfun_deref, void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x5700b4)
    #7 std::__invoke_result<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>::type std::__invoke<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5700b4)
    #8 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x5700b4)
    #9 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x5700b4)
    #10 void std::__invoke_impl<void, std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >(std::__invoke_other, std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x5700b4)
    #11 std::__invoke_result<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >::type std::__invoke<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >(std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5700b4)
    #12 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x5700b4)
    #13 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x5700b4)
    #14 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x5700b4)
    #15 <null> <null> (libstdc++.so.6+0xbd6de)

  Mutex M133 (0x7b6c000003c8) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x6bb458)
    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:810:10 (calc_server+0x6bb458)
    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/mutex:107:17 (calc_server+0x6bb458)
    #4 std::unique_lock<std::recursive_mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x6bb458)
    #5 std::unique_lock<std::recursive_mutex>::unique_lock(std::recursive_mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x6bb458)
    #6 nuraft::raft_server::restart_election_timer() /home/zyh/NuRaft/src/handle_timeout.cxx:136:5 (calc_server+0x6bb458)
    #7 nuraft::raft_server::start_server(bool) /home/zyh/NuRaft/src/raft_server.cxx:283:9 (calc_server+0x536ee2)
    #8 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #9 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #10 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #11 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #13 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #14 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #15 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #16 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #17 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T7 'nuraft_commit' (tid=83718, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #3 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #4 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #5 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #6 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #7 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #8 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #9 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #10 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #11 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #12 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #13 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #14 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f307f81c8 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f307f81c8 by thread T7 (mutexes: write M193, write M133):
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::reconfigure(std::shared_ptr<nuraft::cluster_config> const&) /home/zyh/NuRaft/src/handle_commit.cxx:699:9 (calc_server+0x67bf79)
    #5 nuraft::raft_server::commit_conf(unsigned long, std::shared_ptr<nuraft::log_entry>&) /home/zyh/NuRaft/src/handle_commit.cxx:356:9 (calc_server+0x671a63)
    #6 nuraft::raft_server::commit_in_bg_exec(unsigned long) /home/zyh/NuRaft/src/handle_commit.cxx:215:13 (calc_server+0x66a6bb)
    #7 nuraft::raft_server::commit_in_bg() /home/zyh/NuRaft/src/handle_commit.cxx:134:9 (calc_server+0x6687d0)
    #8 void std::__invoke_impl<void, void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(std::__invoke_memfun_deref, void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x5700b4)
    #9 std::__invoke_result<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>::type std::__invoke<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5700b4)
    #10 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x5700b4)
    #11 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x5700b4)
    #12 void std::__invoke_impl<void, std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >(std::__invoke_other, std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x5700b4)
    #13 std::__invoke_result<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >::type std::__invoke<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >(std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5700b4)
    #14 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x5700b4)
    #15 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x5700b4)
    #16 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x5700b4)
    #17 <null> <null> (libstdc++.so.6+0xbd6de)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Mutex M193 (0x7b6c00000470) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x668c2d)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x668c2d)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x668c2d)
    #4 nuraft::raft_server::commit_in_bg_exec(unsigned long) /home/zyh/NuRaft/src/handle_commit.cxx:151:34 (calc_server+0x668c2d)
    #5 nuraft::raft_server::commit_in_bg() /home/zyh/NuRaft/src/handle_commit.cxx:134:9 (calc_server+0x6687d0)
    #6 void std::__invoke_impl<void, void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(std::__invoke_memfun_deref, void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x5700b4)
    #7 std::__invoke_result<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>::type std::__invoke<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5700b4)
    #8 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x5700b4)
    #9 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x5700b4)
    #10 void std::__invoke_impl<void, std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >(std::__invoke_other, std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x5700b4)
    #11 std::__invoke_result<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >::type std::__invoke<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >(std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5700b4)
    #12 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x5700b4)
    #13 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x5700b4)
    #14 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x5700b4)
    #15 <null> <null> (libstdc++.so.6+0xbd6de)

  Mutex M133 (0x7b6c000003c8) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x6bb458)
    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:810:10 (calc_server+0x6bb458)
    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/mutex:107:17 (calc_server+0x6bb458)
    #4 std::unique_lock<std::recursive_mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x6bb458)
    #5 std::unique_lock<std::recursive_mutex>::unique_lock(std::recursive_mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x6bb458)
    #6 nuraft::raft_server::restart_election_timer() /home/zyh/NuRaft/src/handle_timeout.cxx:136:5 (calc_server+0x6bb458)
    #7 nuraft::raft_server::start_server(bool) /home/zyh/NuRaft/src/raft_server.cxx:283:9 (calc_server+0x536ee2)
    #8 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #9 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #10 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #11 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #13 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #14 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #15 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #16 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #17 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T7 'nuraft_commit' (tid=83718, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #3 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #4 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #5 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #6 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #7 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #8 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #9 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #10 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #11 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #12 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #13 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #14 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f307f91d8 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f307f91d8 by thread T7 (mutexes: write M193, write M133):
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::reconfigure(std::shared_ptr<nuraft::cluster_config> const&) /home/zyh/NuRaft/src/handle_commit.cxx:707:9 (calc_server+0x67c2e8)
    #5 nuraft::raft_server::commit_conf(unsigned long, std::shared_ptr<nuraft::log_entry>&) /home/zyh/NuRaft/src/handle_commit.cxx:356:9 (calc_server+0x671a63)
    #6 nuraft::raft_server::commit_in_bg_exec(unsigned long) /home/zyh/NuRaft/src/handle_commit.cxx:215:13 (calc_server+0x66a6bb)
    #7 nuraft::raft_server::commit_in_bg() /home/zyh/NuRaft/src/handle_commit.cxx:134:9 (calc_server+0x6687d0)
    #8 void std::__invoke_impl<void, void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(std::__invoke_memfun_deref, void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x5700b4)
    #9 std::__invoke_result<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>::type std::__invoke<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5700b4)
    #10 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x5700b4)
    #11 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x5700b4)
    #12 void std::__invoke_impl<void, std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >(std::__invoke_other, std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x5700b4)
    #13 std::__invoke_result<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >::type std::__invoke<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >(std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5700b4)
    #14 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x5700b4)
    #15 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x5700b4)
    #16 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x5700b4)
    #17 <null> <null> (libstdc++.so.6+0xbd6de)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Mutex M193 (0x7b6c00000470) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x668c2d)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x668c2d)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x668c2d)
    #4 nuraft::raft_server::commit_in_bg_exec(unsigned long) /home/zyh/NuRaft/src/handle_commit.cxx:151:34 (calc_server+0x668c2d)
    #5 nuraft::raft_server::commit_in_bg() /home/zyh/NuRaft/src/handle_commit.cxx:134:9 (calc_server+0x6687d0)
    #6 void std::__invoke_impl<void, void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(std::__invoke_memfun_deref, void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x5700b4)
    #7 std::__invoke_result<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>::type std::__invoke<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5700b4)
    #8 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x5700b4)
    #9 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x5700b4)
    #10 void std::__invoke_impl<void, std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >(std::__invoke_other, std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x5700b4)
    #11 std::__invoke_result<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >::type std::__invoke<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >(std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5700b4)
    #12 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x5700b4)
    #13 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x5700b4)
    #14 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x5700b4)
    #15 <null> <null> (libstdc++.so.6+0xbd6de)

  Mutex M133 (0x7b6c000003c8) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x6bb458)
    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:810:10 (calc_server+0x6bb458)
    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/mutex:107:17 (calc_server+0x6bb458)
    #4 std::unique_lock<std::recursive_mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x6bb458)
    #5 std::unique_lock<std::recursive_mutex>::unique_lock(std::recursive_mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x6bb458)
    #6 nuraft::raft_server::restart_election_timer() /home/zyh/NuRaft/src/handle_timeout.cxx:136:5 (calc_server+0x6bb458)
    #7 nuraft::raft_server::start_server(bool) /home/zyh/NuRaft/src/raft_server.cxx:283:9 (calc_server+0x536ee2)
    #8 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #9 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #10 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #11 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #13 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #14 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #15 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #16 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #17 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T7 'nuraft_commit' (tid=83718, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #3 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #4 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #5 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #6 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #7 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #8 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #9 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #10 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #11 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #12 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #13 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #14 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f307fc208 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f307fc208 by thread T6 (mutexes: write M133, write M322):
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::handle_append_entries_resp(nuraft::resp_msg&) /home/zyh/NuRaft/src/handle_append_entries.cxx:901:9 (calc_server+0x64440f)
    #5 nuraft::raft_server::handle_peer_resp(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /home/zyh/NuRaft/src/raft_server.cxx:792:9 (calc_server+0x532599)
    #6 void std::__invoke_impl<void, void (nuraft::raft_server::*&)(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::raft_server*&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>(std::__invoke_memfun_deref, void (nuraft::raft_server::*&)(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::raft_server*&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x56997a)
    #7 std::__invoke_result<void (nuraft::raft_server::*&)(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::raft_server*&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>::type std::__invoke<void (nuraft::raft_server::*&)(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::raft_server*&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>(void (nuraft::raft_server::*&)(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::raft_server*&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x56997a)
    #8 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>::__call<void, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&, 0ul, 1ul, 2ul>(std::tuple<std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>&&, std::_Index_tuple<0ul, 1ul, 2ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x56997a)
    #9 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>::operator()<std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&, void>(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x56997a)
    #10 std::_Function_handler<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)> >::_M_invoke(std::_Any_data const&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:316:2 (calc_server+0x56997a)
    #11 std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>::operator()(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) const /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:706:14 (calc_server+0x6e016f)
    #12 nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> >::set_result(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /home/zyh/NuRaft/include/libnuraft/async.hxx:163:32 (calc_server+0x6e016f)
    #13 nuraft::peer::handle_rpc_result(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /home/zyh/NuRaft/src/peer.cxx:140:25 (calc_server+0x6dbe3b)
    #14 void std::__invoke_impl<void, void (nuraft::peer::*&)(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::peer*&, std::shared_ptr<nuraft::peer>&, std::shared_ptr<nuraft::rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>(std::__invoke_memfun_deref, void (nuraft::peer::*&)(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::peer*&, std::shared_ptr<nuraft::peer>&, std::shared_ptr<nuraft::rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x6e1c67)
    #15 std::__invoke_result<void (nuraft::peer::*&)(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::peer*&, std::shared_ptr<nuraft::peer>&, std::shared_ptr<nuraft::rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>::type std::__invoke<void (nuraft::peer::*&)(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::peer*&, std::shared_ptr<nuraft::peer>&, std::shared_ptr<nuraft::rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>(void (nuraft::peer::*&)(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::peer*&, std::shared_ptr<nuraft::peer>&, std::shared_ptr<nuraft::rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x6e1833)
    #16 void std::_Bind<void (nuraft::peer::* (nuraft::peer*, std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>::__call<void, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&, 0ul, 1ul, 2ul, 3ul, 4ul, 5ul, 6ul>(std::tuple<std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>&&, std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul, 6ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x6e1833)
    #17 void std::_Bind<void (nuraft::peer::* (nuraft::peer*, std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>::operator()<std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&, void>(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x6e1833)
    #18 std::_Function_handler<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), std::_Bind<void (nuraft::peer::* (nuraft::peer*, std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)> >::_M_invoke(std::_Any_data const&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:316:2 (calc_server+0x6e1833)
    #19 std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>::operator()(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) const /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:706:14 (calc_server+0x5d1b05)
    #20 nuraft::asio_rpc_client::response_read(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long) /home/zyh/NuRaft/src/asio_service.cxx:1373:13 (calc_server+0x5d1b05)
    #21 void std::__invoke_impl<void, void (nuraft::asio_rpc_client::*&)(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long), std::shared_ptr<nuraft::asio_rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code const&, unsigned long>(std::__invoke_memfun_deref, void (nuraft::asio_rpc_client::*&)(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long), std::shared_ptr<nuraft::asio_rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code const&, unsigned long&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x5d7af5)
    #22 std::__invoke_result<void (nuraft::asio_rpc_client::*&)(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long), std::shared_ptr<nuraft::asio_rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code const&, unsigned long>::type std::__invoke<void (nuraft::asio_rpc_client::*&)(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long), std::shared_ptr<nuraft::asio_rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code const&, unsigned long>(void (nuraft::asio_rpc_client::*&)(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long), std::shared_ptr<nuraft::asio_rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code const&, unsigned long&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5d7af5)
    #23 void std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)>::__call<void, std::error_code const&, unsigned long&&, 0ul, 1ul, 2ul, 3ul, 4ul, 5ul>(std::tuple<std::error_code const&, unsigned long&&>&&, std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x5d7af5)
    #24 void std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)>::operator()<std::error_code const&, unsigned long, void>(std::error_code const&, unsigned long&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x5d7af5)
    #25 asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >::operator()(std::error_code const&, unsigned long, int) /home/zyh/NuRaft/asio/asio/include/asio/impl/read.hpp:284:9 (calc_server+0x5d7af5)
    #26 asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long>::operator()() /home/zyh/NuRaft/asio/asio/include/asio/detail/bind_handler.hpp:163:5 (calc_server+0x5d7af5)
    #27 void asio::asio_handler_invoke<asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long> >(asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long>&, ...) /home/zyh/NuRaft/asio/asio/include/asio/handler_invoke_hook.hpp:68:3 (calc_server+0x5d77ff)
    #28 void asio_handler_invoke_helpers::invoke<asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long>, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >(asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long>&, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_invoke_helpers.hpp:37:3 (calc_server+0x5d77ff)
    #29 void asio::detail::asio_handler_invoke<asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long>, asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >(asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long>&, asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >*) /home/zyh/NuRaft/asio/asio/include/asio/impl/read.hpp:337:5 (calc_server+0x5d77ff)
    #30 void asio_handler_invoke_helpers::invoke<asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long>, asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> > >(asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long>&, asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_invoke_helpers.hpp:37:3 (calc_server+0x5d77ff)
    #31 void asio::detail::handler_work<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, asio::system_executor>::complete<asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long> >(asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long>&, asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_work.hpp:81:5 (calc_server+0x5d77ff)
    #32 asio::detail::reactive_socket_recv_op<asio::mutable_buffers_1, asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> > >::do_complete(void*, asio::detail::scheduler_operation*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/reactive_socket_recv_op.hpp:121:9 (calc_server+0x5d77ff)
    #33 asio::detail::scheduler_operation::complete(void*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/scheduler_operation.hpp:39:5 (calc_server+0x5bb870)
    #34 asio::detail::epoll_reactor::descriptor_state::do_complete(void*, asio::detail::scheduler_operation*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/epoll_reactor.ipp:775:11 (calc_server+0x5bb870)
    #35 asio::detail::scheduler_operation::complete(void*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/scheduler_operation.hpp:39:5 (calc_server+0x589d9b)
    #36 asio::detail::scheduler::do_run_one(asio::detail::conditionally_enabled_mutex::scoped_lock&, asio::detail::scheduler_thread_info&, std::error_code const&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:400:12 (calc_server+0x589d9b)
    #37 asio::detail::scheduler::run(std::error_code&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:153:10 (calc_server+0x588c2a)
    #38 asio::io_context::run() /home/zyh/NuRaft/asio/asio/include/asio/impl/io_context.ipp:61:24 (calc_server+0x57babf)
    #39 nuraft::asio_service_impl::worker_entry() /home/zyh/NuRaft/src/asio_service.cxx:1607:21 (calc_server+0x57babf)
    #40 void std::__invoke_impl<void, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(std::__invoke_memfun_deref, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x595134)
    #41 std::__invoke_result<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>::type std::__invoke<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #42 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595134)
    #43 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595134)
    #44 void std::__invoke_impl<void, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::__invoke_other, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595134)
    #45 std::__invoke_result<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >::type std::__invoke<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #46 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x595134)
    #47 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x595134)
    #48 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x595134)
    #49 <null> <null> (libstdc++.so.6+0xbd6de)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
my server id: 1
leader id: 1
Raft log range: 1 - 2
last committed index: 2
state machine value: 0
[32mcalc 1> [0m    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Mutex M133 (0x7b6c000003c8) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x6bb458)
    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:810:10 (calc_server+0x6bb458)
    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/mutex:107:17 (calc_server+0x6bb458)
    #4 std::unique_lock<std::recursive_mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x6bb458)
    #5 std::unique_lock<std::recursive_mutex>::unique_lock(std::recursive_mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x6bb458)
    #6 nuraft::raft_server::restart_election_timer() /home/zyh/NuRaft/src/handle_timeout.cxx:136:5 (calc_server+0x6bb458)
    #7 nuraft::raft_server::start_server(bool) /home/zyh/NuRaft/src/raft_server.cxx:283:9 (calc_server+0x536ee2)
    #8 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #9 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #10 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #11 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #13 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #14 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #15 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #16 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #17 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M322 (0x7b580000ffb8) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x631bc1)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x631bc1)
    #3 std::lock_guard<std::mutex>::lock_guard(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:162:19 (calc_server+0x631bc1)
    #4 nuraft::raft_server::create_append_entries_req(nuraft::peer&) /home/zyh/NuRaft/src/handle_append_entries.cxx:306:37 (calc_server+0x631bc1)
    #5 nuraft::raft_server::request_append_entries(std::shared_ptr<nuraft::peer>) /home/zyh/NuRaft/src/handle_append_entries.cxx:209:19 (calc_server+0x62e70e)
    #6 nuraft::raft_server::handle_hb_timeout(int) /home/zyh/NuRaft/src/handle_timeout.cxx:115:9 (calc_server+0x6ba256)
    #7 void std::__invoke_impl<void, void (nuraft::raft_server::*&)(int), nuraft::raft_server*&, int>(std::__invoke_memfun_deref, void (nuraft::raft_server::*&)(int), nuraft::raft_server*&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x56a842)
    #8 std::__invoke_result<void (nuraft::raft_server::*&)(int), nuraft::raft_server*&, int>::type std::__invoke<void (nuraft::raft_server::*&)(int), nuraft::raft_server*&, int>(void (nuraft::raft_server::*&)(int), nuraft::raft_server*&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x56a842)
    #9 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*, std::_Placeholder<1>))(int)>::__call<void, int&&, 0ul, 1ul>(std::tuple<int&&>&&, std::_Index_tuple<0ul, 1ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x56a842)
    #10 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*, std::_Placeholder<1>))(int)>::operator()<int, void>(int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x56a842)
    #11 std::_Function_handler<void (int), std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*, std::_Placeholder<1>))(int)> >::_M_invoke(std::_Any_data const&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:316:2 (calc_server+0x56a842)
    #12 std::function<void (int)>::operator()(int) const /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:706:14 (calc_server+0x56e2b9)
    #13 nuraft::timer_task<int>::exec() /home/zyh/NuRaft/include/libnuraft/timer_task.hxx:43:13 (calc_server+0x56e2b9)
    #14 nuraft::delayed_task::execute() /home/zyh/NuRaft/include/libnuraft/delayed_task.hxx:54:13 (calc_server+0x57982d)
    #15 _timer_handler_(std::shared_ptr<nuraft::delayed_task>&, std::error_code) /home/zyh/NuRaft/src/asio_service.cxx:1504:15 (calc_server+0x57982d)
    #16 void std::__invoke_impl<void, void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>(std::__invoke_other, void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595986)
    #17 std::__invoke_result<void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>::type std::__invoke<void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>(void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595986)
    #18 void std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>::__call<void, std::error_code const&, 0ul, 1ul>(std::tuple<std::error_code const&>&&, std::_Index_tuple<0ul, 1ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595986)
    #19 void std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>::operator()<std::error_code const&, void>(std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595986)
    #20 asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>::operator()() /home/zyh/NuRaft/asio/asio/include/asio/detail/bind_handler.hpp:64:5 (calc_server+0x595986)
    #21 void asio::asio_handler_invoke<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, ...) /home/zyh/NuRaft/asio/asio/include/asio/handler_invoke_hook.hpp:68:3 (calc_server+0x595986)
    #22 void asio_handler_invoke_helpers::invoke<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_invoke_helpers.hpp:37:3 (calc_server+0x595986)
    #23 void asio::detail::handler_work<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, asio::system_executor>::complete<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_work.hpp:81:5 (calc_server+0x595986)
    #24 asio::detail::wait_handler<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)> >::do_complete(void*, asio::detail::scheduler_operation*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/wait_handler.hpp:71:9 (calc_server+0x595986)
    #25 asio::detail::scheduler_operation::complete(void*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/scheduler_operation.hpp:39:5 (calc_server+0x589d9b)
    #26 asio::detail::scheduler::do_run_one(asio::detail::conditionally_enabled_mutex::scoped_lock&, asio::detail::scheduler_thread_info&, std::error_code const&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:400:12 (calc_server+0x589d9b)
    #27 asio::detail::scheduler::run(std::error_code&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:153:10 (calc_server+0x588c2a)
    #28 asio::io_context::run() /home/zyh/NuRaft/asio/asio/include/asio/impl/io_context.ipp:61:24 (calc_server+0x57babf)
    #29 nuraft::asio_service_impl::worker_entry() /home/zyh/NuRaft/src/asio_service.cxx:1607:21 (calc_server+0x57babf)
    #30 void std::__invoke_impl<void, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(std::__invoke_memfun_deref, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x595134)
    #31 std::__invoke_result<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>::type std::__invoke<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #32 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595134)
    #33 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595134)
    #34 void std::__invoke_impl<void, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::__invoke_other, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595134)
    #35 std::__invoke_result<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >::type std::__invoke<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #36 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x595134)
    #37 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x595134)
    #38 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x595134)
    #39 <null> <null> (libstdc++.so.6+0xbd6de)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T6 'nuraft_w_3' (tid=83715, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 std::__shared_ptr<std::thread, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x57a46a)
    #3 std::shared_ptr<std::thread>::shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x57a46a)
    #4 std::shared_ptr<std::thread> std::allocate_shared<std::thread, std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x57a46a)
    #5 std::shared_ptr<std::thread> std::make_shared<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x57a46a)
    #6 std::shared_ptr<std::thread> nuraft::cs_new<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x57a46a)
    #7 nuraft::asio_service_impl::asio_service_impl(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1573:13 (calc_server+0x57a46a)
    #8 nuraft::asio_service::asio_service(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1693:17 (calc_server+0x57df93)
    #9 void __gnu_cxx::new_allocator<nuraft::asio_service>::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527802)
    #10 void std::allocator_traits<std::allocator<nuraft::asio_service> >::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>&, nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x5244ec)
    #11 std::_Sp_counted_ptr_inplace<nuraft::asio_service, std::allocator<nuraft::asio_service>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x5244ec)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, nuraft::asio_service*, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x5244ec)
    #13 std::__shared_ptr<nuraft::asio_service, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x5244ec)
    #14 std::shared_ptr<nuraft::asio_service>::shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x5244ec)
    #15 std::shared_ptr<nuraft::asio_service> std::allocate_shared<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x5244ec)
    #16 std::shared_ptr<nuraft::asio_service> std::make_shared<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x5244ec)
    #17 std::shared_ptr<nuraft::asio_service> nuraft::cs_new<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x5244ec)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:38:17 (calc_server+0x5244ec)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f307fd218 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f307fd218 by thread T3 (mutexes: write M133):
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::request_append_entries(std::shared_ptr<nuraft::peer>) /home/zyh/NuRaft/src/handle_append_entries.cxx:277:13 (calc_server+0x630def)
    #5 nuraft::raft_server::handle_hb_timeout(int) /home/zyh/NuRaft/src/handle_timeout.cxx:115:9 (calc_server+0x6ba256)
    #6 void std::__invoke_impl<void, void (nuraft::raft_server::*&)(int), nuraft::raft_server*&, int>(std::__invoke_memfun_deref, void (nuraft::raft_server::*&)(int), nuraft::raft_server*&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x56a842)
    #7 std::__invoke_result<void (nuraft::raft_server::*&)(int), nuraft::raft_server*&, int>::type std::__invoke<void (nuraft::raft_server::*&)(int), nuraft::raft_server*&, int>(void (nuraft::raft_server::*&)(int), nuraft::raft_server*&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x56a842)
    #8 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*, std::_Placeholder<1>))(int)>::__call<void, int&&, 0ul, 1ul>(std::tuple<int&&>&&, std::_Index_tuple<0ul, 1ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x56a842)
    #9 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*, std::_Placeholder<1>))(int)>::operator()<int, void>(int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x56a842)
    #10 std::_Function_handler<void (int), std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*, std::_Placeholder<1>))(int)> >::_M_invoke(std::_Any_data const&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:316:2 (calc_server+0x56a842)
    #11 std::function<void (int)>::operator()(int) const /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:706:14 (calc_server+0x56e2b9)
    #12 nuraft::timer_task<int>::exec() /home/zyh/NuRaft/include/libnuraft/timer_task.hxx:43:13 (calc_server+0x56e2b9)
    #13 nuraft::delayed_task::execute() /home/zyh/NuRaft/include/libnuraft/delayed_task.hxx:54:13 (calc_server+0x57982d)
    #14 _timer_handler_(std::shared_ptr<nuraft::delayed_task>&, std::error_code) /home/zyh/NuRaft/src/asio_service.cxx:1504:15 (calc_server+0x57982d)
    #15 void std::__invoke_impl<void, void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>(std::__invoke_other, void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595986)
    #16 std::__invoke_result<void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>::type std::__invoke<void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>(void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595986)
    #17 void std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>::__call<void, std::error_code const&, 0ul, 1ul>(std::tuple<std::error_code const&>&&, std::_Index_tuple<0ul, 1ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595986)
    #18 void std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>::operator()<std::error_code const&, void>(std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595986)
    #19 asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>::operator()() /home/zyh/NuRaft/asio/asio/include/asio/detail/bind_handler.hpp:64:5 (calc_server+0x595986)
    #20 void asio::asio_handler_invoke<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, ...) /home/zyh/NuRaft/asio/asio/include/asio/handler_invoke_hook.hpp:68:3 (calc_server+0x595986)
    #21 void asio_handler_invoke_helpers::invoke<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_invoke_helpers.hpp:37:3 (calc_server+0x595986)
    #22 void asio::detail::handler_work<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, asio::system_executor>::complete<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_work.hpp:81:5 (calc_server+0x595986)
    #23 asio::detail::wait_handler<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)> >::do_complete(void*, asio::detail::scheduler_operation*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/wait_handler.hpp:71:9 (calc_server+0x595986)
    #24 asio::detail::scheduler_operation::complete(void*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/scheduler_operation.hpp:39:5 (calc_server+0x589d9b)
    #25 asio::detail::scheduler::do_run_one(asio::detail::conditionally_enabled_mutex::scoped_lock&, asio::detail::scheduler_thread_info&, std::error_code const&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:400:12 (calc_server+0x589d9b)
    #26 asio::detail::scheduler::run(std::error_code&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:153:10 (calc_server+0x588c2a)
    #27 asio::io_context::run() /home/zyh/NuRaft/asio/asio/include/asio/impl/io_context.ipp:61:24 (calc_server+0x57babf)
    #28 nuraft::asio_service_impl::worker_entry() /home/zyh/NuRaft/src/asio_service.cxx:1607:21 (calc_server+0x57babf)
    #29 void std::__invoke_impl<void, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(std::__invoke_memfun_deref, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x595134)
    #30 std::__invoke_result<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>::type std::__invoke<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #31 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595134)
    #32 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595134)
    #33 void std::__invoke_impl<void, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::__invoke_other, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595134)
    #34 std::__invoke_result<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >::type std::__invoke<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #35 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x595134)
    #36 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x595134)
    #37 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x595134)
    #38 <null> <null> (libstdc++.so.6+0xbd6de)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Mutex M133 (0x7b6c000003c8) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x6bb458)
    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:810:10 (calc_server+0x6bb458)
    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/mutex:107:17 (calc_server+0x6bb458)
    #4 std::unique_lock<std::recursive_mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x6bb458)
    #5 std::unique_lock<std::recursive_mutex>::unique_lock(std::recursive_mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x6bb458)
    #6 nuraft::raft_server::restart_election_timer() /home/zyh/NuRaft/src/handle_timeout.cxx:136:5 (calc_server+0x6bb458)
    #7 nuraft::raft_server::start_server(bool) /home/zyh/NuRaft/src/raft_server.cxx:283:9 (calc_server+0x536ee2)
    #8 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #9 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #10 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #11 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #13 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #14 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #15 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #16 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #17 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T3 'nuraft_w_0' (tid=83709, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 std::__shared_ptr<std::thread, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x57a46a)
    #3 std::shared_ptr<std::thread>::shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x57a46a)
    #4 std::shared_ptr<std::thread> std::allocate_shared<std::thread, std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x57a46a)
    #5 std::shared_ptr<std::thread> std::make_shared<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x57a46a)
    #6 std::shared_ptr<std::thread> nuraft::cs_new<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x57a46a)
    #7 nuraft::asio_service_impl::asio_service_impl(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1573:13 (calc_server+0x57a46a)
    #8 nuraft::asio_service::asio_service(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1693:17 (calc_server+0x57df93)
    #9 void __gnu_cxx::new_allocator<nuraft::asio_service>::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527802)
    #10 void std::allocator_traits<std::allocator<nuraft::asio_service> >::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>&, nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x5244ec)
    #11 std::_Sp_counted_ptr_inplace<nuraft::asio_service, std::allocator<nuraft::asio_service>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x5244ec)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, nuraft::asio_service*, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x5244ec)
    #13 std::__shared_ptr<nuraft::asio_service, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x5244ec)
    #14 std::shared_ptr<nuraft::asio_service>::shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x5244ec)
    #15 std::shared_ptr<nuraft::asio_service> std::allocate_shared<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x5244ec)
    #16 std::shared_ptr<nuraft::asio_service> std::make_shared<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x5244ec)
    #17 std::shared_ptr<nuraft::asio_service> nuraft::cs_new<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x5244ec)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:38:17 (calc_server+0x5244ec)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f307fe228 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f307fe228 by thread T6:
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::asio_rpc_listener::handle_accept(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&) /home/zyh/NuRaft/src/asio_service.cxx:765:13 (calc_server+0x5e62fd)
    #5 void std::__invoke_impl<void, void (nuraft::asio_rpc_listener::*&)(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&), nuraft::asio_rpc_listener*&, std::shared_ptr<nuraft::asio_rpc_listener>&, std::shared_ptr<nuraft::rpc_session>&, std::error_code const&>(std::__invoke_memfun_deref, void (nuraft::asio_rpc_listener::*&)(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&), nuraft::asio_rpc_listener*&, std::shared_ptr<nuraft::asio_rpc_listener>&, std::shared_ptr<nuraft::rpc_session>&, std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x5eb9db)
    #6 std::__invoke_result<void (nuraft::asio_rpc_listener::*&)(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&), nuraft::asio_rpc_listener*&, std::shared_ptr<nuraft::asio_rpc_listener>&, std::shared_ptr<nuraft::rpc_session>&, std::error_code const&>::type std::__invoke<void (nuraft::asio_rpc_listener::*&)(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&), nuraft::asio_rpc_listener*&, std::shared_ptr<nuraft::asio_rpc_listener>&, std::shared_ptr<nuraft::rpc_session>&, std::error_code const&>(void (nuraft::asio_rpc_listener::*&)(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&), nuraft::asio_rpc_listener*&, std::shared_ptr<nuraft::asio_rpc_listener>&, std::shared_ptr<nuraft::rpc_session>&, std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5ea253)
    #7 void std::_Bind<void (nuraft::asio_rpc_listener::* (nuraft::asio_rpc_listener*, std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::_Placeholder<1>))(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&)>::__call<void, std::error_code const&, 0ul, 1ul, 2ul, 3ul>(std::tuple<std::error_code const&>&&, std::_Index_tuple<0ul, 1ul, 2ul, 3ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x5ea253)
    #8 void std::_Bind<void (nuraft::asio_rpc_listener::* (nuraft::asio_rpc_listener*, std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::_Placeholder<1>))(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&)>::operator()<std::error_code const&, void>(std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x5ea253)
    #9 asio::detail::binder1<std::_Bind<void (nuraft::asio_rpc_listener::* (nuraft::asio_rpc_listener*, std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::_Placeholder<1>))(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&)>, std::error_code>::operator()() /home/zyh/NuRaft/asio/asio/include/asio/detail/bind_handler.hpp:64:5 (calc_server+0x5ea253)
    #10 void asio::asio_handler_invoke<asio::detail::binder1<std::_Bind<void (nuraft::asio_rpc_listener::* (nuraft::asio_rpc_listener*, std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::_Placeholder<1>))(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&)>, std::error_code> >(asio::detail::binder1<std::_Bind<void (nuraft::asio_rpc_listener::* (nuraft::asio_rpc_listener*, std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::_Placeholder<1>))(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&)>, std::error_code>&, ...) /home/zyh/NuRaft/asio/asio/include/asio/handler_invoke_hook.hpp:68:3 (calc_server+0x5ea253)
    #11 void asio_handler_invoke_helpers::invoke<asio::detail::binder1<std::_Bind<void (nuraft::asio_rpc_listener::* (nuraft::asio_rpc_listener*, std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::_Placeholder<1>))(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&)>, std::error_code>, std::_Bind<void (nuraft::asio_rpc_listener::* (nuraft::asio_rpc_listener*, std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::_Placeholder<1>))(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&)> >(asio::detail::binder1<std::_Bind<void (nuraft::asio_rpc_listener::* (nuraft::asio_rpc_listener*, std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::_Placeholder<1>))(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&)>, std::error_code>&, std::_Bind<void (nuraft::asio_rpc_listener::* (nuraft::asio_rpc_listener*, std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::_Placeholder<1>))(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_invoke_helpers.hpp:37:3 (calc_server+0x5ea253)
    #12 void asio::detail::handler_work<std::_Bind<void (nuraft::asio_rpc_listener::* (nuraft::asio_rpc_listener*, std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::_Placeholder<1>))(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&)>, asio::system_executor>::complete<asio::detail::binder1<std::_Bind<void (nuraft::asio_rpc_listener::* (nuraft::asio_rpc_listener*, std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::_Placeholder<1>))(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&)>, std::error_code> >(asio::detail::binder1<std::_Bind<void (nuraft::asio_rpc_listener::* (nuraft::asio_rpc_listener*, std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::_Placeholder<1>))(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&)>, std::error_code>&, std::_Bind<void (nuraft::asio_rpc_listener::* (nuraft::asio_rpc_listener*, std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::_Placeholder<1>))(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_work.hpp:81:5 (calc_server+0x5ea253)
    #13 asio::detail::reactive_socket_accept_op<asio::basic_socket<asio::ip::tcp>, asio::ip::tcp, std::_Bind<void (nuraft::asio_rpc_listener::* (nuraft::asio_rpc_listener*, std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::_Placeholder<1>))(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&)> >::do_complete(void*, asio::detail::scheduler_operation*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/reactive_socket_accept_op.hpp:136:9 (calc_server+0x5ea253)
    #14 asio::detail::scheduler_operation::complete(void*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/scheduler_operation.hpp:39:5 (calc_server+0x5bb870)
    #15 asio::detail::epoll_reactor::descriptor_state::do_complete(void*, asio::detail::scheduler_operation*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/epoll_reactor.ipp:775:11 (calc_server+0x5bb870)
    #16 asio::detail::scheduler_operation::complete(void*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/scheduler_operation.hpp:39:5 (calc_server+0x589d9b)
    #17 asio::detail::scheduler::do_run_one(asio::detail::conditionally_enabled_mutex::scoped_lock&, asio::detail::scheduler_thread_info&, std::error_code const&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:400:12 (calc_server+0x589d9b)
    #18 asio::detail::scheduler::run(std::error_code&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:153:10 (calc_server+0x588c2a)
    #19 asio::io_context::run() /home/zyh/NuRaft/asio/asio/include/asio/impl/io_context.ipp:61:24 (calc_server+0x57babf)
    #20 nuraft::asio_service_impl::worker_entry() /home/zyh/NuRaft/src/asio_service.cxx:1607:21 (calc_server+0x57babf)
    #21 void std::__invoke_impl<void, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(std::__invoke_memfun_deref, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x595134)
    #22 std::__invoke_result<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>::type std::__invoke<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #23 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595134)
    #24 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595134)
    #25 void std::__invoke_impl<void, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::__invoke_other, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595134)
    #26 std::__invoke_result<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >::type std::__invoke<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #27 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x595134)
    #28 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x595134)
    #29 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x595134)
    #30 <null> <null> (libstdc++.so.6+0xbd6de)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T6 'nuraft_w_3' (tid=83715, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 std::__shared_ptr<std::thread, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x57a46a)
    #3 std::shared_ptr<std::thread>::shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x57a46a)
    #4 std::shared_ptr<std::thread> std::allocate_shared<std::thread, std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x57a46a)
    #5 std::shared_ptr<std::thread> std::make_shared<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x57a46a)
    #6 std::shared_ptr<std::thread> nuraft::cs_new<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x57a46a)
    #7 nuraft::asio_service_impl::asio_service_impl(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1573:13 (calc_server+0x57a46a)
    #8 nuraft::asio_service::asio_service(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1693:17 (calc_server+0x57df93)
    #9 void __gnu_cxx::new_allocator<nuraft::asio_service>::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527802)
    #10 void std::allocator_traits<std::allocator<nuraft::asio_service> >::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>&, nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x5244ec)
    #11 std::_Sp_counted_ptr_inplace<nuraft::asio_service, std::allocator<nuraft::asio_service>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x5244ec)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, nuraft::asio_service*, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x5244ec)
    #13 std::__shared_ptr<nuraft::asio_service, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x5244ec)
    #14 std::shared_ptr<nuraft::asio_service>::shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x5244ec)
    #15 std::shared_ptr<nuraft::asio_service> std::allocate_shared<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x5244ec)
    #16 std::shared_ptr<nuraft::asio_service> std::make_shared<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x5244ec)
    #17 std::shared_ptr<nuraft::asio_service> nuraft::cs_new<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x5244ec)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:38:17 (calc_server+0x5244ec)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f307ff238 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f307ff238 by thread T6:
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::rpc_session::prepare_handshake() /home/zyh/NuRaft/src/asio_service.cxx:244:9 (calc_server+0x5ed441)
    #5 nuraft::asio_rpc_listener::handle_accept(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&) /home/zyh/NuRaft/src/asio_service.cxx:766:22 (calc_server+0x5e6403)
    #6 void std::__invoke_impl<void, void (nuraft::asio_rpc_listener::*&)(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&), nuraft::asio_rpc_listener*&, std::shared_ptr<nuraft::asio_rpc_listener>&, std::shared_ptr<nuraft::rpc_session>&, std::error_code const&>(std::__invoke_memfun_deref, void (nuraft::asio_rpc_listener::*&)(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&), nuraft::asio_rpc_listener*&, std::shared_ptr<nuraft::asio_rpc_listener>&, std::shared_ptr<nuraft::rpc_session>&, std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x5eb9db)
    #7 std::__invoke_result<void (nuraft::asio_rpc_listener::*&)(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&), nuraft::asio_rpc_listener*&, std::shared_ptr<nuraft::asio_rpc_listener>&, std::shared_ptr<nuraft::rpc_session>&, std::error_code const&>::type std::__invoke<void (nuraft::asio_rpc_listener::*&)(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&), nuraft::asio_rpc_listener*&, std::shared_ptr<nuraft::asio_rpc_listener>&, std::shared_ptr<nuraft::rpc_session>&, std::error_code const&>(void (nuraft::asio_rpc_listener::*&)(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&), nuraft::asio_rpc_listener*&, std::shared_ptr<nuraft::asio_rpc_listener>&, std::shared_ptr<nuraft::rpc_session>&, std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5ea253)
    #8 void std::_Bind<void (nuraft::asio_rpc_listener::* (nuraft::asio_rpc_listener*, std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::_Placeholder<1>))(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&)>::__call<void, std::error_code const&, 0ul, 1ul, 2ul, 3ul>(std::tuple<std::error_code const&>&&, std::_Index_tuple<0ul, 1ul, 2ul, 3ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x5ea253)
    #9 void std::_Bind<void (nuraft::asio_rpc_listener::* (nuraft::asio_rpc_listener*, std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::_Placeholder<1>))(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&)>::operator()<std::error_code const&, void>(std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x5ea253)
    #10 asio::detail::binder1<std::_Bind<void (nuraft::asio_rpc_listener::* (nuraft::asio_rpc_listener*, std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::_Placeholder<1>))(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&)>, std::error_code>::operator()() /home/zyh/NuRaft/asio/asio/include/asio/detail/bind_handler.hpp:64:5 (calc_server+0x5ea253)
    #11 void asio::asio_handler_invoke<asio::detail::binder1<std::_Bind<void (nuraft::asio_rpc_listener::* (nuraft::asio_rpc_listener*, std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::_Placeholder<1>))(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&)>, std::error_code> >(asio::detail::binder1<std::_Bind<void (nuraft::asio_rpc_listener::* (nuraft::asio_rpc_listener*, std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::_Placeholder<1>))(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&)>, std::error_code>&, ...) /home/zyh/NuRaft/asio/asio/include/asio/handler_invoke_hook.hpp:68:3 (calc_server+0x5ea253)
    #12 void asio_handler_invoke_helpers::invoke<asio::detail::binder1<std::_Bind<void (nuraft::asio_rpc_listener::* (nuraft::asio_rpc_listener*, std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::_Placeholder<1>))(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&)>, std::error_code>, std::_Bind<void (nuraft::asio_rpc_listener::* (nuraft::asio_rpc_listener*, std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::_Placeholder<1>))(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&)> >(asio::detail::binder1<std::_Bind<void (nuraft::asio_rpc_listener::* (nuraft::asio_rpc_listener*, std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::_Placeholder<1>))(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&)>, std::error_code>&, std::_Bind<void (nuraft::asio_rpc_listener::* (nuraft::asio_rpc_listener*, std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::_Placeholder<1>))(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_invoke_helpers.hpp:37:3 (calc_server+0x5ea253)
    #13 void asio::detail::handler_work<std::_Bind<void (nuraft::asio_rpc_listener::* (nuraft::asio_rpc_listener*, std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::_Placeholder<1>))(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&)>, asio::system_executor>::complete<asio::detail::binder1<std::_Bind<void (nuraft::asio_rpc_listener::* (nuraft::asio_rpc_listener*, std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::_Placeholder<1>))(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&)>, std::error_code> >(asio::detail::binder1<std::_Bind<void (nuraft::asio_rpc_listener::* (nuraft::asio_rpc_listener*, std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::_Placeholder<1>))(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&)>, std::error_code>&, std::_Bind<void (nuraft::asio_rpc_listener::* (nuraft::asio_rpc_listener*, std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::_Placeholder<1>))(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_work.hpp:81:5 (calc_server+0x5ea253)
    #14 asio::detail::reactive_socket_accept_op<asio::basic_socket<asio::ip::tcp>, asio::ip::tcp, std::_Bind<void (nuraft::asio_rpc_listener::* (nuraft::asio_rpc_listener*, std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::_Placeholder<1>))(std::shared_ptr<nuraft::asio_rpc_listener>, std::shared_ptr<nuraft::rpc_session>, std::error_code const&)> >::do_complete(void*, asio::detail::scheduler_operation*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/reactive_socket_accept_op.hpp:136:9 (calc_server+0x5ea253)
    #15 asio::detail::scheduler_operation::complete(void*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/scheduler_operation.hpp:39:5 (calc_server+0x5bb870)
    #16 asio::detail::epoll_reactor::descriptor_state::do_complete(void*, asio::detail::scheduler_operation*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/epoll_reactor.ipp:775:11 (calc_server+0x5bb870)
    #17 asio::detail::scheduler_operation::complete(void*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/scheduler_operation.hpp:39:5 (calc_server+0x589d9b)
    #18 asio::detail::scheduler::do_run_one(asio::detail::conditionally_enabled_mutex::scoped_lock&, asio::detail::scheduler_thread_info&, std::error_code const&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:400:12 (calc_server+0x589d9b)
    #19 asio::detail::scheduler::run(std::error_code&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:153:10 (calc_server+0x588c2a)
    #20 asio::io_context::run() /home/zyh/NuRaft/asio/asio/include/asio/impl/io_context.ipp:61:24 (calc_server+0x57babf)
    #21 nuraft::asio_service_impl::worker_entry() /home/zyh/NuRaft/src/asio_service.cxx:1607:21 (calc_server+0x57babf)
    #22 void std::__invoke_impl<void, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(std::__invoke_memfun_deref, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x595134)
    #23 std::__invoke_result<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>::type std::__invoke<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #24 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595134)
    #25 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595134)
    #26 void std::__invoke_impl<void, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::__invoke_other, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595134)
    #27 std::__invoke_result<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >::type std::__invoke<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #28 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x595134)
    #29 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x595134)
    #30 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x595134)
    #31 <null> <null> (libstdc++.so.6+0xbd6de)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T6 'nuraft_w_3' (tid=83715, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 std::__shared_ptr<std::thread, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x57a46a)
    #3 std::shared_ptr<std::thread>::shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x57a46a)
    #4 std::shared_ptr<std::thread> std::allocate_shared<std::thread, std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x57a46a)
    #5 std::shared_ptr<std::thread> std::make_shared<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x57a46a)
    #6 std::shared_ptr<std::thread> nuraft::cs_new<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x57a46a)
    #7 nuraft::asio_service_impl::asio_service_impl(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1573:13 (calc_server+0x57a46a)
    #8 nuraft::asio_service::asio_service(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1693:17 (calc_server+0x57df93)
    #9 void __gnu_cxx::new_allocator<nuraft::asio_service>::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527802)
    #10 void std::allocator_traits<std::allocator<nuraft::asio_service> >::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>&, nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x5244ec)
    #11 std::_Sp_counted_ptr_inplace<nuraft::asio_service, std::allocator<nuraft::asio_service>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x5244ec)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, nuraft::asio_service*, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x5244ec)
    #13 std::__shared_ptr<nuraft::asio_service, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x5244ec)
    #14 std::shared_ptr<nuraft::asio_service>::shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x5244ec)
    #15 std::shared_ptr<nuraft::asio_service> std::allocate_shared<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x5244ec)
    #16 std::shared_ptr<nuraft::asio_service> std::make_shared<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x5244ec)
    #17 std::shared_ptr<nuraft::asio_service> nuraft::cs_new<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x5244ec)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:38:17 (calc_server+0x5244ec)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f30800248 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f30800248 by thread T4 (mutexes: write M133):
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::handle_prevote_req(nuraft::req_msg&) /home/zyh/NuRaft/src/handle_vote.cxx:360:5 (calc_server+0x6d3436)
    #5 nuraft::raft_server::process_req(nuraft::req_msg&) /home/zyh/NuRaft/src/raft_server.cxx:650:16 (calc_server+0x540d21)
    #6 nuraft::rpc_session::read_complete(std::shared_ptr<nuraft::buffer>, std::shared_ptr<nuraft::buffer>) /home/zyh/NuRaft/src/asio_service.cxx:548:40 (calc_server+0x602390)
    #7 nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)::operator()(std::error_code const&, unsigned long) const /home/zyh/NuRaft/src/asio_service.cxx:363:23 (calc_server+0x5f99f8)
    #8 asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>::operator()(std::error_code const&, unsigned long, int) /home/zyh/NuRaft/asio/asio/include/asio/impl/read.hpp:284:9 (calc_server+0x61b2e9)
    #9 asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>, std::error_code, unsigned long>::operator()() /home/zyh/NuRaft/asio/asio/include/asio/detail/bind_handler.hpp:163:5 (calc_server+0x61b2e9)
    #10 void asio::asio_handler_invoke<asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>, std::error_code, unsigned long> >(asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>, std::error_code, unsigned long>&, ...) /home/zyh/NuRaft/asio/asio/include/asio/handler_invoke_hook.hpp:68:3 (calc_server+0x61b2e9)
    #11 void asio_handler_invoke_helpers::invoke<asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>, std::error_code, unsigned long>, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>(asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>, std::error_code, unsigned long>&, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_invoke_helpers.hpp:37:3 (calc_server+0x61b2e9)
    #12 void asio::detail::asio_handler_invoke<asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>, std::error_code, unsigned long>, asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>(asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>, std::error_code, unsigned long>&, asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>*) /home/zyh/NuRaft/asio/asio/include/asio/impl/read.hpp:337:5 (calc_server+0x61b2e9)
    #13 void asio_handler_invoke_helpers::invoke<asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>, std::error_code, unsigned long>, asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)> >(asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>, std::error_code, unsigned long>&, asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_invoke_helpers.hpp:37:3 (calc_server+0x61b2e9)
    #14 void asio::detail::handler_work<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>, asio::system_executor>::complete<asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>, std::error_code, unsigned long> >(asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>, std::error_code, unsigned long>&, asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_work.hpp:81:5 (calc_server+0x61b2e9)
    #15 asio::detail::reactive_socket_recv_op<asio::mutable_buffers_1, asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)> >::do_complete(void*, asio::detail::scheduler_operation*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/reactive_socket_recv_op.hpp:121:9 (calc_server+0x61b2e9)
    #16 asio::detail::scheduler_operation::complete(void*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/scheduler_operation.hpp:39:5 (calc_server+0x5bb870)
    #17 asio::detail::epoll_reactor::descriptor_state::do_complete(void*, asio::detail::scheduler_operation*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/epoll_reactor.ipp:775:11 (calc_server+0x5bb870)
    #18 asio::detail::scheduler_operation::complete(void*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/scheduler_operation.hpp:39:5 (calc_server+0x589d9b)
    #19 asio::detail::scheduler::do_run_one(asio::detail::conditionally_enabled_mutex::scoped_lock&, asio::detail::scheduler_thread_info&, std::error_code const&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:400:12 (calc_server+0x589d9b)
my server id: 1
leader id: 1
    #20 asio::detail::scheduler::run(std::error_code&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:153:10 (calc_server+0x588c2a)
Raft log range: 1 - 2
last committed index: 2
    #21 asio::io_context::run() /home/zyh/NuRaft/asio/asio/include/asio/impl/io_context.ipp:61:24 (calc_server+0x57babf)
state machine value: 0
    #22 nuraft::asio_service_impl::worker_entry() /home/zyh/NuRaft/src/asio_service.cxx:1607:21 (calc_server+0x57babf)
[32mcalc 1> [0m    #23 void std::__invoke_impl<void, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(std::__invoke_memfun_deref, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x595134)
    #24 std::__invoke_result<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>::type std::__invoke<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #25 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595134)
    #26 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595134)
    #27 void std::__invoke_impl<void, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::__invoke_other, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595134)
    #28 std::__invoke_result<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >::type std::__invoke<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #29 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x595134)
    #30 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x595134)
    #31 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x595134)
    #32 <null> <null> (libstdc++.so.6+0xbd6de)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Mutex M133 (0x7b6c000003c8) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x6bb458)
    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:810:10 (calc_server+0x6bb458)
    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/mutex:107:17 (calc_server+0x6bb458)
    #4 std::unique_lock<std::recursive_mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x6bb458)
    #5 std::unique_lock<std::recursive_mutex>::unique_lock(std::recursive_mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x6bb458)
    #6 nuraft::raft_server::restart_election_timer() /home/zyh/NuRaft/src/handle_timeout.cxx:136:5 (calc_server+0x6bb458)
    #7 nuraft::raft_server::start_server(bool) /home/zyh/NuRaft/src/raft_server.cxx:283:9 (calc_server+0x536ee2)
    #8 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
my server id: 1
    #9 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
leader id: 1
Raft log range: 1 - 2
last committed index: 2
state machine value: 0
    #10 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
[32mcalc 1> [0m    #11 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #13 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #14 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #15 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #16 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #17 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T4 'nuraft_w_1' (tid=83711, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 std::__shared_ptr<std::thread, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x57a46a)
    #3 std::shared_ptr<std::thread>::shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x57a46a)
    #4 std::shared_ptr<std::thread> std::allocate_shared<std::thread, std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x57a46a)
    #5 std::shared_ptr<std::thread> std::make_shared<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x57a46a)
    #6 std::shared_ptr<std::thread> nuraft::cs_new<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x57a46a)
    #7 nuraft::asio_service_impl::asio_service_impl(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1573:13 (calc_server+0x57a46a)
    #8 nuraft::asio_service::asio_service(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1693:17 (calc_server+0x57df93)
    #9 void __gnu_cxx::new_allocator<nuraft::asio_service>::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527802)
    #10 void std::allocator_traits<std::allocator<nuraft::asio_service> >::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>&, nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x5244ec)
    #11 std::_Sp_counted_ptr_inplace<nuraft::asio_service, std::allocator<nuraft::asio_service>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x5244ec)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, nuraft::asio_service*, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x5244ec)
    #13 std::__shared_ptr<nuraft::asio_service, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x5244ec)
    #14 std::shared_ptr<nuraft::asio_service>::shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x5244ec)
    #15 std::shared_ptr<nuraft::asio_service> std::allocate_shared<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x5244ec)
    #16 std::shared_ptr<nuraft::asio_service> std::make_shared<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x5244ec)
    #17 std::shared_ptr<nuraft::asio_service> nuraft::cs_new<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x5244ec)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:38:17 (calc_server+0x5244ec)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f30801258 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f30801258 by thread T4 (mutexes: write M133):
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::handle_prevote_req(nuraft::req_msg&) /home/zyh/NuRaft/src/handle_vote.cxx:391:13 (calc_server+0x6d43ca)
    #5 nuraft::raft_server::process_req(nuraft::req_msg&) /home/zyh/NuRaft/src/raft_server.cxx:650:16 (calc_server+0x540d21)
    #6 nuraft::rpc_session::read_complete(std::shared_ptr<nuraft::buffer>, std::shared_ptr<nuraft::buffer>) /home/zyh/NuRaft/src/asio_service.cxx:548:40 (calc_server+0x602390)
    #7 nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)::operator()(std::error_code const&, unsigned long) const /home/zyh/NuRaft/src/asio_service.cxx:363:23 (calc_server+0x5f99f8)
    #8 asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>::operator()(std::error_code const&, unsigned long, int) /home/zyh/NuRaft/asio/asio/include/asio/impl/read.hpp:284:9 (calc_server+0x61b2e9)
    #9 asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>, std::error_code, unsigned long>::operator()() /home/zyh/NuRaft/asio/asio/include/asio/detail/bind_handler.hpp:163:5 (calc_server+0x61b2e9)
    #10 void asio::asio_handler_invoke<asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>, std::error_code, unsigned long> >(asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>, std::error_code, unsigned long>&, ...) /home/zyh/NuRaft/asio/asio/include/asio/handler_invoke_hook.hpp:68:3 (calc_server+0x61b2e9)
    #11 void asio_handler_invoke_helpers::invoke<asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>, std::error_code, unsigned long>, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>(asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>, std::error_code, unsigned long>&, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_invoke_helpers.hpp:37:3 (calc_server+0x61b2e9)
    #12 void asio::detail::asio_handler_invoke<asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>, std::error_code, unsigned long>, asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>(asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>, std::error_code, unsigned long>&, asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>*) /home/zyh/NuRaft/asio/asio/include/asio/impl/read.hpp:337:5 (calc_server+0x61b2e9)
    #13 void asio_handler_invoke_helpers::invoke<asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>, std::error_code, unsigned long>, asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)> >(asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>, std::error_code, unsigned long>&, asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_invoke_helpers.hpp:37:3 (calc_server+0x61b2e9)
    #14 void asio::detail::handler_work<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>, asio::system_executor>::complete<asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>, std::error_code, unsigned long> >(asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>, std::error_code, unsigned long>&, asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_work.hpp:81:5 (calc_server+0x61b2e9)
    #15 asio::detail::reactive_socket_recv_op<asio::mutable_buffers_1, asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)> >::do_complete(void*, asio::detail::scheduler_operation*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/reactive_socket_recv_op.hpp:121:9 (calc_server+0x61b2e9)
    #16 asio::detail::scheduler_operation::complete(void*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/scheduler_operation.hpp:39:5 (calc_server+0x5bb870)
    #17 asio::detail::epoll_reactor::descriptor_state::do_complete(void*, asio::detail::scheduler_operation*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/epoll_reactor.ipp:775:11 (calc_server+0x5bb870)
    #18 asio::detail::scheduler_operation::complete(void*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/scheduler_operation.hpp:39:5 (calc_server+0x589d9b)
    #19 asio::detail::scheduler::do_run_one(asio::detail::conditionally_enabled_mutex::scoped_lock&, asio::detail::scheduler_thread_info&, std::error_code const&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:400:12 (calc_server+0x589d9b)
    #20 asio::detail::scheduler::run(std::error_code&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:153:10 (calc_server+0x588c2a)
    #21 asio::io_context::run() /home/zyh/NuRaft/asio/asio/include/asio/impl/io_context.ipp:61:24 (calc_server+0x57babf)
    #22 nuraft::asio_service_impl::worker_entry() /home/zyh/NuRaft/src/asio_service.cxx:1607:21 (calc_server+0x57babf)
    #23 void std::__invoke_impl<void, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(std::__invoke_memfun_deref, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x595134)
    #24 std::__invoke_result<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>::type std::__invoke<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #25 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595134)
    #26 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595134)
    #27 void std::__invoke_impl<void, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::__invoke_other, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595134)
    #28 std::__invoke_result<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >::type std::__invoke<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #29 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x595134)
    #30 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x595134)
    #31 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x595134)
    #32 <null> <null> (libstdc++.so.6+0xbd6de)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Mutex M133 (0x7b6c000003c8) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x6bb458)
    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:810:10 (calc_server+0x6bb458)
    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/mutex:107:17 (calc_server+0x6bb458)
    #4 std::unique_lock<std::recursive_mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x6bb458)
    #5 std::unique_lock<std::recursive_mutex>::unique_lock(std::recursive_mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x6bb458)
    #6 nuraft::raft_server::restart_election_timer() /home/zyh/NuRaft/src/handle_timeout.cxx:136:5 (calc_server+0x6bb458)
    #7 nuraft::raft_server::start_server(bool) /home/zyh/NuRaft/src/raft_server.cxx:283:9 (calc_server+0x536ee2)
    #8 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #9 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #10 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #11 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #13 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #14 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #15 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #16 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #17 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T4 'nuraft_w_1' (tid=83711, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 std::__shared_ptr<std::thread, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x57a46a)
    #3 std::shared_ptr<std::thread>::shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x57a46a)
    #4 std::shared_ptr<std::thread> std::allocate_shared<std::thread, std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x57a46a)
    #5 std::shared_ptr<std::thread> std::make_shared<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x57a46a)
    #6 std::shared_ptr<std::thread> nuraft::cs_new<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x57a46a)
    #7 nuraft::asio_service_impl::asio_service_impl(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1573:13 (calc_server+0x57a46a)
    #8 nuraft::asio_service::asio_service(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1693:17 (calc_server+0x57df93)
    #9 void __gnu_cxx::new_allocator<nuraft::asio_service>::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527802)
    #10 void std::allocator_traits<std::allocator<nuraft::asio_service> >::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>&, nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x5244ec)
    #11 std::_Sp_counted_ptr_inplace<nuraft::asio_service, std::allocator<nuraft::asio_service>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x5244ec)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, nuraft::asio_service*, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x5244ec)
    #13 std::__shared_ptr<nuraft::asio_service, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x5244ec)
    #14 std::shared_ptr<nuraft::asio_service>::shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x5244ec)
    #15 std::shared_ptr<nuraft::asio_service> std::allocate_shared<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x5244ec)
    #16 std::shared_ptr<nuraft::asio_service> std::make_shared<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x5244ec)
    #17 std::shared_ptr<nuraft::asio_service> nuraft::cs_new<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x5244ec)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:38:17 (calc_server+0x5244ec)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
my server id: 1
leader id: 1
Raft log range: 1 - 2
last committed index: 2
state machine value: 0
[32mcalc 1> [0mmy server id: 1
leader id: 1
Raft log range: 1 - 2
last committed index: 2
state machine value: 0
[32mcalc 1> [0mmy server id: 1
leader id: 1
Raft log range: 1 - 2
last committed index: 2
state machine value: 0
[32mcalc 1> [0mop=set!
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f3080a2e8 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f3080a2e8 by thread T8 (mutexes: write M133):
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::request_append_entries(std::shared_ptr<nuraft::peer>) /home/zyh/NuRaft/src/handle_append_entries.cxx:277:13 (calc_server+0x630def)
    #5 nuraft::raft_server::request_append_entries() /home/zyh/NuRaft/src/handle_append_entries.cxx:79:9 (calc_server+0x62a681)
    #6 nuraft::raft_server::append_entries_in_bg_exec() /home/zyh/NuRaft/src/handle_append_entries.cxx:61:5 (calc_server+0x6299c2)
    #7 nuraft::raft_server::append_entries_in_bg() /home/zyh/NuRaft/src/handle_append_entries.cxx:53:9 (calc_server+0x6299c2)
    #8 void std::__invoke_impl<void, void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(std::__invoke_memfun_deref, void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x5700b4)
    #9 std::__invoke_result<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>::type std::__invoke<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5700b4)
    #10 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x5700b4)
    #11 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x5700b4)
    #12 void std::__invoke_impl<void, std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >(std::__invoke_other, std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x5700b4)
    #13 std::__invoke_result<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >::type std::__invoke<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >(std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5700b4)
    #14 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x5700b4)
    #15 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x5700b4)
    #16 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x5700b4)
    #17 <null> <null> (libstdc++.so.6+0xbd6de)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Mutex M133 (0x7b6c000003c8) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x6bb458)
    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:810:10 (calc_server+0x6bb458)
    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/mutex:107:17 (calc_server+0x6bb458)
    #4 std::unique_lock<std::recursive_mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x6bb458)
    #5 std::unique_lock<std::recursive_mutex>::unique_lock(std::recursive_mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x6bb458)
    #6 nuraft::raft_server::restart_election_timer() /home/zyh/NuRaft/src/handle_timeout.cxx:136:5 (calc_server+0x6bb458)
    #7 nuraft::raft_server::start_server(bool) /home/zyh/NuRaft/src/raft_server.cxx:283:9 (calc_server+0x536ee2)
    #8 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #9 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #10 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #11 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #13 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #14 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #15 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #16 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #17 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T8 'nuraft_append' (tid=83720, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #3 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #4 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #5 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #6 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #7 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #8 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #9 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #10 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #11 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #12 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #13 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #14 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f308193d8 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f308193d8 by thread T5 (mutexes: write M133):
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::check_leadership_validity() /home/zyh/NuRaft/src/raft_server.cxx:1008:9 (calc_server+0x555182)
    #5 nuraft::raft_server::handle_hb_timeout(int) /home/zyh/NuRaft/src/handle_timeout.cxx:110:10 (calc_server+0x6b9e1f)
    #6 void std::__invoke_impl<void, void (nuraft::raft_server::*&)(int), nuraft::raft_server*&, int>(std::__invoke_memfun_deref, void (nuraft::raft_server::*&)(int), nuraft::raft_server*&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x56a842)
    #7 std::__invoke_result<void (nuraft::raft_server::*&)(int), nuraft::raft_server*&, int>::type std::__invoke<void (nuraft::raft_server::*&)(int), nuraft::raft_server*&, int>(void (nuraft::raft_server::*&)(int), nuraft::raft_server*&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x56a842)
    #8 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*, std::_Placeholder<1>))(int)>::__call<void, int&&, 0ul, 1ul>(std::tuple<int&&>&&, std::_Index_tuple<0ul, 1ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x56a842)
    #9 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*, std::_Placeholder<1>))(int)>::operator()<int, void>(int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x56a842)
    #10 std::_Function_handler<void (int), std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*, std::_Placeholder<1>))(int)> >::_M_invoke(std::_Any_data const&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:316:2 (calc_server+0x56a842)
    #11 std::function<void (int)>::operator()(int) const /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:706:14 (calc_server+0x56e2b9)
    #12 nuraft::timer_task<int>::exec() /home/zyh/NuRaft/include/libnuraft/timer_task.hxx:43:13 (calc_server+0x56e2b9)
    #13 nuraft::delayed_task::execute() /home/zyh/NuRaft/include/libnuraft/delayed_task.hxx:54:13 (calc_server+0x57982d)
    #14 _timer_handler_(std::shared_ptr<nuraft::delayed_task>&, std::error_code) /home/zyh/NuRaft/src/asio_service.cxx:1504:15 (calc_server+0x57982d)
    #15 void std::__invoke_impl<void, void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>(std::__invoke_other, void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595986)
    #16 std::__invoke_result<void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>::type std::__invoke<void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>(void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595986)
    #17 void std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>::__call<void, std::error_code const&, 0ul, 1ul>(std::tuple<std::error_code const&>&&, std::_Index_tuple<0ul, 1ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595986)
    #18 void std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>::operator()<std::error_code const&, void>(std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595986)
    #19 asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>::operator()() /home/zyh/NuRaft/asio/asio/include/asio/detail/bind_handler.hpp:64:5 (calc_server+0x595986)
    #20 void asio::asio_handler_invoke<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, ...) /home/zyh/NuRaft/asio/asio/include/asio/handler_invoke_hook.hpp:68:3 (calc_server+0x595986)
    #21 void asio_handler_invoke_helpers::invoke<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_invoke_helpers.hpp:37:3 (calc_server+0x595986)
    #22 void asio::detail::handler_work<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, asio::system_executor>::complete<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_work.hpp:81:5 (calc_server+0x595986)
    #23 asio::detail::wait_handler<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)> >::do_complete(void*, asio::detail::scheduler_operation*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/wait_handler.hpp:71:9 (calc_server+0x595986)
    #24 asio::detail::scheduler_operation::complete(void*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/scheduler_operation.hpp:39:5 (calc_server+0x589d9b)
    #25 asio::detail::scheduler::do_run_one(asio::detail::conditionally_enabled_mutex::scoped_lock&, asio::detail::scheduler_thread_info&, std::error_code const&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:400:12 (calc_server+0x589d9b)
    #26 asio::detail::scheduler::run(std::error_code&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:153:10 (calc_server+0x588c2a)
    #27 asio::io_context::run() /home/zyh/NuRaft/asio/asio/include/asio/impl/io_context.ipp:61:24 (calc_server+0x57babf)
    #28 nuraft::asio_service_impl::worker_entry() /home/zyh/NuRaft/src/asio_service.cxx:1607:21 (calc_server+0x57babf)
    #29 void std::__invoke_impl<void, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(std::__invoke_memfun_deref, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x595134)
    #30 std::__invoke_result<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>::type std::__invoke<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #31 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595134)
    #32 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595134)
    #33 void std::__invoke_impl<void, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::__invoke_other, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595134)
    #34 std::__invoke_result<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >::type std::__invoke<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #35 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x595134)
    #36 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x595134)
    #37 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x595134)
    #38 <null> <null> (libstdc++.so.6+0xbd6de)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Mutex M133 (0x7b6c000003c8) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x6bb458)
    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:810:10 (calc_server+0x6bb458)
    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/mutex:107:17 (calc_server+0x6bb458)
    #4 std::unique_lock<std::recursive_mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x6bb458)
    #5 std::unique_lock<std::recursive_mutex>::unique_lock(std::recursive_mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x6bb458)
    #6 nuraft::raft_server::restart_election_timer() /home/zyh/NuRaft/src/handle_timeout.cxx:136:5 (calc_server+0x6bb458)
    #7 nuraft::raft_server::start_server(bool) /home/zyh/NuRaft/src/raft_server.cxx:283:9 (calc_server+0x536ee2)
    #8 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #9 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #10 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #11 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #13 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #14 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #15 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #16 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #17 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T5 'nuraft_w_2' (tid=83713, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 std::__shared_ptr<std::thread, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x57a46a)
    #3 std::shared_ptr<std::thread>::shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x57a46a)
    #4 std::shared_ptr<std::thread> std::allocate_shared<std::thread, std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x57a46a)
    #5 std::shared_ptr<std::thread> std::make_shared<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x57a46a)
    #6 std::shared_ptr<std::thread> nuraft::cs_new<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x57a46a)
    #7 nuraft::asio_service_impl::asio_service_impl(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1573:13 (calc_server+0x57a46a)
    #8 nuraft::asio_service::asio_service(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1693:17 (calc_server+0x57df93)
    #9 void __gnu_cxx::new_allocator<nuraft::asio_service>::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527802)
    #10 void std::allocator_traits<std::allocator<nuraft::asio_service> >::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>&, nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x5244ec)
    #11 std::_Sp_counted_ptr_inplace<nuraft::asio_service, std::allocator<nuraft::asio_service>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x5244ec)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, nuraft::asio_service*, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x5244ec)
    #13 std::__shared_ptr<nuraft::asio_service, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x5244ec)
    #14 std::shared_ptr<nuraft::asio_service>::shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x5244ec)
    #15 std::shared_ptr<nuraft::asio_service> std::allocate_shared<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x5244ec)
    #16 std::shared_ptr<nuraft::asio_service> std::make_shared<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x5244ec)
    #17 std::shared_ptr<nuraft::asio_service> nuraft::cs_new<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x5244ec)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:38:17 (calc_server+0x5244ec)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f3081a3e8 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f3081a3e8 by thread T5 (mutexes: write M133):
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::check_leadership_validity() /home/zyh/NuRaft/src/raft_server.cxx:1023:13 (calc_server+0x555500)
    #5 nuraft::raft_server::handle_hb_timeout(int) /home/zyh/NuRaft/src/handle_timeout.cxx:110:10 (calc_server+0x6b9e1f)
    #6 void std::__invoke_impl<void, void (nuraft::raft_server::*&)(int), nuraft::raft_server*&, int>(std::__invoke_memfun_deref, void (nuraft::raft_server::*&)(int), nuraft::raft_server*&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x56a842)
    #7 std::__invoke_result<void (nuraft::raft_server::*&)(int), nuraft::raft_server*&, int>::type std::__invoke<void (nuraft::raft_server::*&)(int), nuraft::raft_server*&, int>(void (nuraft::raft_server::*&)(int), nuraft::raft_server*&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x56a842)
    #8 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*, std::_Placeholder<1>))(int)>::__call<void, int&&, 0ul, 1ul>(std::tuple<int&&>&&, std::_Index_tuple<0ul, 1ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x56a842)
    #9 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*, std::_Placeholder<1>))(int)>::operator()<int, void>(int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x56a842)
    #10 std::_Function_handler<void (int), std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*, std::_Placeholder<1>))(int)> >::_M_invoke(std::_Any_data const&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:316:2 (calc_server+0x56a842)
    #11 std::function<void (int)>::operator()(int) const /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:706:14 (calc_server+0x56e2b9)
    #12 nuraft::timer_task<int>::exec() /home/zyh/NuRaft/include/libnuraft/timer_task.hxx:43:13 (calc_server+0x56e2b9)
    #13 nuraft::delayed_task::execute() /home/zyh/NuRaft/include/libnuraft/delayed_task.hxx:54:13 (calc_server+0x57982d)
    #14 _timer_handler_(std::shared_ptr<nuraft::delayed_task>&, std::error_code) /home/zyh/NuRaft/src/asio_service.cxx:1504:15 (calc_server+0x57982d)
    #15 void std::__invoke_impl<void, void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>(std::__invoke_other, void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595986)
    #16 std::__invoke_result<void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>::type std::__invoke<void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>(void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595986)
    #17 void std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>::__call<void, std::error_code const&, 0ul, 1ul>(std::tuple<std::error_code const&>&&, std::_Index_tuple<0ul, 1ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595986)
    #18 void std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>::operator()<std::error_code const&, void>(std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595986)
    #19 asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>::operator()() /home/zyh/NuRaft/asio/asio/include/asio/detail/bind_handler.hpp:64:5 (calc_server+0x595986)
    #20 void asio::asio_handler_invoke<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, ...) /home/zyh/NuRaft/asio/asio/include/asio/handler_invoke_hook.hpp:68:3 (calc_server+0x595986)
    #21 void asio_handler_invoke_helpers::invoke<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_invoke_helpers.hpp:37:3 (calc_server+0x595986)
    #22 void asio::detail::handler_work<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, asio::system_executor>::complete<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_work.hpp:81:5 (calc_server+0x595986)
    #23 asio::detail::wait_handler<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)> >::do_complete(void*, asio::detail::scheduler_operation*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/wait_handler.hpp:71:9 (calc_server+0x595986)
    #24 asio::detail::scheduler_operation::complete(void*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/scheduler_operation.hpp:39:5 (calc_server+0x589d9b)
    #25 asio::detail::scheduler::do_run_one(asio::detail::conditionally_enabled_mutex::scoped_lock&, asio::detail::scheduler_thread_info&, std::error_code const&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:400:12 (calc_server+0x589d9b)
    #26 asio::detail::scheduler::run(std::error_code&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:153:10 (calc_server+0x588c2a)
    #27 asio::io_context::run() /home/zyh/NuRaft/asio/asio/include/asio/impl/io_context.ipp:61:24 (calc_server+0x57babf)
    #28 nuraft::asio_service_impl::worker_entry() /home/zyh/NuRaft/src/asio_service.cxx:1607:21 (calc_server+0x57babf)
    #29 void std::__invoke_impl<void, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(std::__invoke_memfun_deref, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x595134)
    #30 std::__invoke_result<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>::type std::__invoke<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #31 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595134)
    #32 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595134)
    #33 void std::__invoke_impl<void, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::__invoke_other, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595134)
    #34 std::__invoke_result<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >::type std::__invoke<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #35 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x595134)
    #36 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x595134)
    #37 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x595134)
    #38 <null> <null> (libstdc++.so.6+0xbd6de)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Mutex M133 (0x7b6c000003c8) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x6bb458)
    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:810:10 (calc_server+0x6bb458)
    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/mutex:107:17 (calc_server+0x6bb458)
    #4 std::unique_lock<std::recursive_mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x6bb458)
    #5 std::unique_lock<std::recursive_mutex>::unique_lock(std::recursive_mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x6bb458)
    #6 nuraft::raft_server::restart_election_timer() /home/zyh/NuRaft/src/handle_timeout.cxx:136:5 (calc_server+0x6bb458)
    #7 nuraft::raft_server::start_server(bool) /home/zyh/NuRaft/src/raft_server.cxx:283:9 (calc_server+0x536ee2)
    #8 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #9 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #10 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #11 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #13 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #14 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #15 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #16 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #17 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T5 'nuraft_w_2' (tid=83713, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 std::__shared_ptr<std::thread, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x57a46a)
    #3 std::shared_ptr<std::thread>::shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x57a46a)
    #4 std::shared_ptr<std::thread> std::allocate_shared<std::thread, std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x57a46a)
    #5 std::shared_ptr<std::thread> std::make_shared<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x57a46a)
    #6 std::shared_ptr<std::thread> nuraft::cs_new<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x57a46a)
    #7 nuraft::asio_service_impl::asio_service_impl(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1573:13 (calc_server+0x57a46a)
    #8 nuraft::asio_service::asio_service(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1693:17 (calc_server+0x57df93)
    #9 void __gnu_cxx::new_allocator<nuraft::asio_service>::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527802)
    #10 void std::allocator_traits<std::allocator<nuraft::asio_service> >::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>&, nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x5244ec)
    #11 std::_Sp_counted_ptr_inplace<nuraft::asio_service, std::allocator<nuraft::asio_service>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x5244ec)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, nuraft::asio_service*, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x5244ec)
    #13 std::__shared_ptr<nuraft::asio_service, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x5244ec)
    #14 std::shared_ptr<nuraft::asio_service>::shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x5244ec)
    #15 std::shared_ptr<nuraft::asio_service> std::allocate_shared<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x5244ec)
    #16 std::shared_ptr<nuraft::asio_service> std::make_shared<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x5244ec)
    #17 std::shared_ptr<nuraft::asio_service> nuraft::cs_new<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x5244ec)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:38:17 (calc_server+0x5244ec)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f3081e428 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f3081e428 by thread T6 (mutexes: write M133):
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::request_append_entries(std::shared_ptr<nuraft::peer>) /home/zyh/NuRaft/src/handle_append_entries.cxx:283:13 (calc_server+0x6311a5)
    #5 nuraft::raft_server::handle_hb_timeout(int) /home/zyh/NuRaft/src/handle_timeout.cxx:115:9 (calc_server+0x6ba256)
    #6 void std::__invoke_impl<void, void (nuraft::raft_server::*&)(int), nuraft::raft_server*&, int>(std::__invoke_memfun_deref, void (nuraft::raft_server::*&)(int), nuraft::raft_server*&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x56a842)
    #7 std::__invoke_result<void (nuraft::raft_server::*&)(int), nuraft::raft_server*&, int>::type std::__invoke<void (nuraft::raft_server::*&)(int), nuraft::raft_server*&, int>(void (nuraft::raft_server::*&)(int), nuraft::raft_server*&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x56a842)
    #8 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*, std::_Placeholder<1>))(int)>::__call<void, int&&, 0ul, 1ul>(std::tuple<int&&>&&, std::_Index_tuple<0ul, 1ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x56a842)
    #9 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*, std::_Placeholder<1>))(int)>::operator()<int, void>(int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x56a842)
    #10 std::_Function_handler<void (int), std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*, std::_Placeholder<1>))(int)> >::_M_invoke(std::_Any_data const&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:316:2 (calc_server+0x56a842)
    #11 std::function<void (int)>::operator()(int) const /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:706:14 (calc_server+0x56e2b9)
    #12 nuraft::timer_task<int>::exec() /home/zyh/NuRaft/include/libnuraft/timer_task.hxx:43:13 (calc_server+0x56e2b9)
    #13 nuraft::delayed_task::execute() /home/zyh/NuRaft/include/libnuraft/delayed_task.hxx:54:13 (calc_server+0x57982d)
    #14 _timer_handler_(std::shared_ptr<nuraft::delayed_task>&, std::error_code) /home/zyh/NuRaft/src/asio_service.cxx:1504:15 (calc_server+0x57982d)
    #15 void std::__invoke_impl<void, void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>(std::__invoke_other, void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595986)
    #16 std::__invoke_result<void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>::type std::__invoke<void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&>(void (*&)(std::shared_ptr<nuraft::delayed_task>&, std::error_code), std::shared_ptr<nuraft::delayed_task>&, std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595986)
    #17 void std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>::__call<void, std::error_code const&, 0ul, 1ul>(std::tuple<std::error_code const&>&&, std::_Index_tuple<0ul, 1ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595986)
    #18 void std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>::operator()<std::error_code const&, void>(std::error_code const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595986)
    #19 asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>::operator()() /home/zyh/NuRaft/asio/asio/include/asio/detail/bind_handler.hpp:64:5 (calc_server+0x595986)
    #20 void asio::asio_handler_invoke<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, ...) /home/zyh/NuRaft/asio/asio/include/asio/handler_invoke_hook.hpp:68:3 (calc_server+0x595986)
    #21 void asio_handler_invoke_helpers::invoke<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_invoke_helpers.hpp:37:3 (calc_server+0x595986)
    #22 void asio::detail::handler_work<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, asio::system_executor>::complete<asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code> >(asio::detail::binder1<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>, std::error_code>&, std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_work.hpp:81:5 (calc_server+0x595986)
    #23 asio::detail::wait_handler<std::_Bind<void (* (std::shared_ptr<nuraft::delayed_task>, std::_Placeholder<1>))(std::shared_ptr<nuraft::delayed_task>&, std::error_code)> >::do_complete(void*, asio::detail::scheduler_operation*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/wait_handler.hpp:71:9 (calc_server+0x595986)
    #24 asio::detail::scheduler_operation::complete(void*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/scheduler_operation.hpp:39:5 (calc_server+0x589d9b)
    #25 asio::detail::scheduler::do_run_one(asio::detail::conditionally_enabled_mutex::scoped_lock&, asio::detail::scheduler_thread_info&, std::error_code const&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:400:12 (calc_server+0x589d9b)
    #26 asio::detail::scheduler::run(std::error_code&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:153:10 (calc_server+0x588c2a)
    #27 asio::io_context::run() /home/zyh/NuRaft/asio/asio/include/asio/impl/io_context.ipp:61:24 (calc_server+0x57babf)
    #28 nuraft::asio_service_impl::worker_entry() /home/zyh/NuRaft/src/asio_service.cxx:1607:21 (calc_server+0x57babf)
    #29 void std::__invoke_impl<void, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(std::__invoke_memfun_deref, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x595134)
    #30 std::__invoke_result<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>::type std::__invoke<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #31 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595134)
    #32 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595134)
    #33 void std::__invoke_impl<void, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::__invoke_other, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595134)
    #34 std::__invoke_result<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >::type std::__invoke<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #35 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x595134)
    #36 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x595134)
    #37 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x595134)
    #38 <null> <null> (libstdc++.so.6+0xbd6de)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Mutex M133 (0x7b6c000003c8) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x6bb458)
    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:810:10 (calc_server+0x6bb458)
    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/mutex:107:17 (calc_server+0x6bb458)
    #4 std::unique_lock<std::recursive_mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x6bb458)
    #5 std::unique_lock<std::recursive_mutex>::unique_lock(std::recursive_mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x6bb458)
    #6 nuraft::raft_server::restart_election_timer() /home/zyh/NuRaft/src/handle_timeout.cxx:136:5 (calc_server+0x6bb458)
    #7 nuraft::raft_server::start_server(bool) /home/zyh/NuRaft/src/raft_server.cxx:283:9 (calc_server+0x536ee2)
    #8 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #9 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #10 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #11 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #13 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #14 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #15 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #16 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #17 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T6 'nuraft_w_3' (tid=83715, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 std::__shared_ptr<std::thread, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x57a46a)
    #3 std::shared_ptr<std::thread>::shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x57a46a)
    #4 std::shared_ptr<std::thread> std::allocate_shared<std::thread, std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x57a46a)
    #5 std::shared_ptr<std::thread> std::make_shared<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x57a46a)
    #6 std::shared_ptr<std::thread> nuraft::cs_new<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x57a46a)
    #7 nuraft::asio_service_impl::asio_service_impl(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1573:13 (calc_server+0x57a46a)
    #8 nuraft::asio_service::asio_service(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1693:17 (calc_server+0x57df93)
    #9 void __gnu_cxx::new_allocator<nuraft::asio_service>::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527802)
    #10 void std::allocator_traits<std::allocator<nuraft::asio_service> >::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>&, nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x5244ec)
    #11 std::_Sp_counted_ptr_inplace<nuraft::asio_service, std::allocator<nuraft::asio_service>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x5244ec)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, nuraft::asio_service*, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x5244ec)
    #13 std::__shared_ptr<nuraft::asio_service, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x5244ec)
    #14 std::shared_ptr<nuraft::asio_service>::shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x5244ec)
    #15 std::shared_ptr<nuraft::asio_service> std::allocate_shared<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x5244ec)
    #16 std::shared_ptr<nuraft::asio_service> std::make_shared<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x5244ec)
    #17 std::shared_ptr<nuraft::asio_service> nuraft::cs_new<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x5244ec)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:38:17 (calc_server+0x5244ec)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
failed: -2, 3.0 s
[32mcalc 1> [0mop=set!
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f3083f638 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f3083f638 by main thread:
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::handle_cli_req_callback(std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::shared_ptr<nuraft::resp_msg>) /home/zyh/NuRaft/src/handle_client_request.cxx:191:9 (calc_server+0x65681a)
    #5 std::shared_ptr<nuraft::resp_msg> std::__invoke_impl<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::resp_msg> (nuraft::raft_server::*&)(std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::shared_ptr<nuraft::resp_msg>), nuraft::raft_server*&, std::shared_ptr<nuraft::raft_server::commit_ret_elem>&, std::shared_ptr<nuraft::resp_msg> >(std::__invoke_memfun_deref, std::shared_ptr<nuraft::resp_msg> (nuraft::raft_server::*&)(std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::shared_ptr<nuraft::resp_msg>), nuraft::raft_server*&, std::shared_ptr<nuraft::raft_server::commit_ret_elem>&, std::shared_ptr<nuraft::resp_msg>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x65c0fe)
    #6 std::__invoke_result<std::shared_ptr<nuraft::resp_msg> (nuraft::raft_server::*&)(std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::shared_ptr<nuraft::resp_msg>), nuraft::raft_server*&, std::shared_ptr<nuraft::raft_server::commit_ret_elem>&, std::shared_ptr<nuraft::resp_msg> >::type std::__invoke<std::shared_ptr<nuraft::resp_msg> (nuraft::raft_server::*&)(std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::shared_ptr<nuraft::resp_msg>), nuraft::raft_server*&, std::shared_ptr<nuraft::raft_server::commit_ret_elem>&, std::shared_ptr<nuraft::resp_msg> >(std::shared_ptr<nuraft::resp_msg> (nuraft::raft_server::*&)(std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::shared_ptr<nuraft::resp_msg>), nuraft::raft_server*&, std::shared_ptr<nuraft::raft_server::commit_ret_elem>&, std::shared_ptr<nuraft::resp_msg>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x65bb08)
    #7 std::shared_ptr<nuraft::resp_msg> std::_Bind<std::shared_ptr<nuraft::resp_msg> (nuraft::raft_server::* (nuraft::raft_server*, std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::_Placeholder<1>))(std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::shared_ptr<nuraft::resp_msg>)>::__call<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::resp_msg>&&, 0ul, 1ul, 2ul>(std::tuple<std::shared_ptr<nuraft::resp_msg>&&>&&, std::_Index_tuple<0ul, 1ul, 2ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x65bb08)
    #8 std::shared_ptr<nuraft::resp_msg> std::_Bind<std::shared_ptr<nuraft::resp_msg> (nuraft::raft_server::* (nuraft::raft_server*, std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::_Placeholder<1>))(std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::shared_ptr<nuraft::resp_msg>)>::operator()<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::resp_msg> >(std::shared_ptr<nuraft::resp_msg>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x65bb08)
    #9 std::_Function_handler<std::shared_ptr<nuraft::resp_msg> (std::shared_ptr<nuraft::resp_msg>), std::_Bind<std::shared_ptr<nuraft::resp_msg> (nuraft::raft_server::* (nuraft::raft_server*, std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::_Placeholder<1>))(std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::shared_ptr<nuraft::resp_msg>)> >::_M_invoke(std::_Any_data const&, std::shared_ptr<nuraft::resp_msg>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:301:9 (calc_server+0x65bb08)
    #10 std::function<std::shared_ptr<nuraft::resp_msg> (std::shared_ptr<nuraft::resp_msg>)>::operator()(std::shared_ptr<nuraft::resp_msg>) const /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:706:14 (calc_server+0x51e0a3)
    #11 nuraft::resp_msg::call_cb(std::shared_ptr<nuraft::resp_msg>&) /home/zyh/NuRaft/include/libnuraft/resp_msg.hxx:105:16 (calc_server+0x51e0a3)
    #12 nuraft::raft_server::send_msg_to_leader(std::shared_ptr<nuraft::req_msg>&) /home/zyh/NuRaft/src/handle_user_cmd.cxx:132:26 (calc_server+0x50b9e1)
    #13 nuraft::raft_server::append_entries(std::vector<std::shared_ptr<nuraft::buffer>, std::allocator<std::shared_ptr<nuraft::buffer> > > const&) /home/zyh/NuRaft/src/handle_user_cmd.cxx:102:12 (calc_server+0x516b2c)
    #14 calc_server::append_log(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::vector<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > const&) /home/zyh/NuRaft/examples/calculator/calc_server.cxx:96:50 (calc_server+0x4c51b1)
    #15 calc_server::do_cmd(std::vector<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > const&) /home/zyh/NuRaft/examples/calculator/calc_server.cxx:183:9 (calc_server+0x4be876)
    #16 calc_server::loop() /home/zyh/NuRaft/examples/example_common.hxx:145:21 (calc_server+0x4be26a)
    #17 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:214:5 (calc_server+0x4c8a55)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f30840648 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f30840648 by main thread (mutexes: write M133):
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::check_leadership_validity() /home/zyh/NuRaft/src/raft_server.cxx:1008:9 (calc_server+0x555182)
    #5 nuraft::raft_server::handle_cli_req_callback(std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::shared_ptr<nuraft::resp_msg>) /home/zyh/NuRaft/src/handle_client_request.cxx:194:29 (calc_server+0x6569ab)
    #6 std::shared_ptr<nuraft::resp_msg> std::__invoke_impl<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::resp_msg> (nuraft::raft_server::*&)(std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::shared_ptr<nuraft::resp_msg>), nuraft::raft_server*&, std::shared_ptr<nuraft::raft_server::commit_ret_elem>&, std::shared_ptr<nuraft::resp_msg> >(std::__invoke_memfun_deref, std::shared_ptr<nuraft::resp_msg> (nuraft::raft_server::*&)(std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::shared_ptr<nuraft::resp_msg>), nuraft::raft_server*&, std::shared_ptr<nuraft::raft_server::commit_ret_elem>&, std::shared_ptr<nuraft::resp_msg>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x65c0fe)
    #7 std::__invoke_result<std::shared_ptr<nuraft::resp_msg> (nuraft::raft_server::*&)(std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::shared_ptr<nuraft::resp_msg>), nuraft::raft_server*&, std::shared_ptr<nuraft::raft_server::commit_ret_elem>&, std::shared_ptr<nuraft::resp_msg> >::type std::__invoke<std::shared_ptr<nuraft::resp_msg> (nuraft::raft_server::*&)(std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::shared_ptr<nuraft::resp_msg>), nuraft::raft_server*&, std::shared_ptr<nuraft::raft_server::commit_ret_elem>&, std::shared_ptr<nuraft::resp_msg> >(std::shared_ptr<nuraft::resp_msg> (nuraft::raft_server::*&)(std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::shared_ptr<nuraft::resp_msg>), nuraft::raft_server*&, std::shared_ptr<nuraft::raft_server::commit_ret_elem>&, std::shared_ptr<nuraft::resp_msg>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x65bb08)
    #8 std::shared_ptr<nuraft::resp_msg> std::_Bind<std::shared_ptr<nuraft::resp_msg> (nuraft::raft_server::* (nuraft::raft_server*, std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::_Placeholder<1>))(std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::shared_ptr<nuraft::resp_msg>)>::__call<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::resp_msg>&&, 0ul, 1ul, 2ul>(std::tuple<std::shared_ptr<nuraft::resp_msg>&&>&&, std::_Index_tuple<0ul, 1ul, 2ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x65bb08)
    #9 std::shared_ptr<nuraft::resp_msg> std::_Bind<std::shared_ptr<nuraft::resp_msg> (nuraft::raft_server::* (nuraft::raft_server*, std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::_Placeholder<1>))(std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::shared_ptr<nuraft::resp_msg>)>::operator()<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::resp_msg> >(std::shared_ptr<nuraft::resp_msg>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x65bb08)
    #10 std::_Function_handler<std::shared_ptr<nuraft::resp_msg> (std::shared_ptr<nuraft::resp_msg>), std::_Bind<std::shared_ptr<nuraft::resp_msg> (nuraft::raft_server::* (nuraft::raft_server*, std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::_Placeholder<1>))(std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::shared_ptr<nuraft::resp_msg>)> >::_M_invoke(std::_Any_data const&, std::shared_ptr<nuraft::resp_msg>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:301:9 (calc_server+0x65bb08)
    #11 std::function<std::shared_ptr<nuraft::resp_msg> (std::shared_ptr<nuraft::resp_msg>)>::operator()(std::shared_ptr<nuraft::resp_msg>) const /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:706:14 (calc_server+0x51e0a3)
    #12 nuraft::resp_msg::call_cb(std::shared_ptr<nuraft::resp_msg>&) /home/zyh/NuRaft/include/libnuraft/resp_msg.hxx:105:16 (calc_server+0x51e0a3)
    #13 nuraft::raft_server::send_msg_to_leader(std::shared_ptr<nuraft::req_msg>&) /home/zyh/NuRaft/src/handle_user_cmd.cxx:132:26 (calc_server+0x50b9e1)
    #14 nuraft::raft_server::append_entries(std::vector<std::shared_ptr<nuraft::buffer>, std::allocator<std::shared_ptr<nuraft::buffer> > > const&) /home/zyh/NuRaft/src/handle_user_cmd.cxx:102:12 (calc_server+0x516b2c)
    #15 calc_server::append_log(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::vector<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > const&) /home/zyh/NuRaft/examples/calculator/calc_server.cxx:96:50 (calc_server+0x4c51b1)
    #16 calc_server::do_cmd(std::vector<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > const&) /home/zyh/NuRaft/examples/calculator/calc_server.cxx:183:9 (calc_server+0x4be876)
    #17 calc_server::loop() /home/zyh/NuRaft/examples/example_common.hxx:145:21 (calc_server+0x4be26a)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:214:5 (calc_server+0x4c8a55)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Mutex M133 (0x7b6c000003c8) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x6bb458)
    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:810:10 (calc_server+0x6bb458)
    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/mutex:107:17 (calc_server+0x6bb458)
    #4 std::unique_lock<std::recursive_mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x6bb458)
    #5 std::unique_lock<std::recursive_mutex>::unique_lock(std::recursive_mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x6bb458)
    #6 nuraft::raft_server::restart_election_timer() /home/zyh/NuRaft/src/handle_timeout.cxx:136:5 (calc_server+0x6bb458)
    #7 nuraft::raft_server::start_server(bool) /home/zyh/NuRaft/src/raft_server.cxx:283:9 (calc_server+0x536ee2)
    #8 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #9 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #10 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #11 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #13 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #14 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #15 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #16 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #17 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f30841658 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f30841658 by main thread (mutexes: write M133):
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::check_leadership_validity() /home/zyh/NuRaft/src/raft_server.cxx:1023:13 (calc_server+0x555500)
    #5 nuraft::raft_server::handle_cli_req_callback(std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::shared_ptr<nuraft::resp_msg>) /home/zyh/NuRaft/src/handle_client_request.cxx:194:29 (calc_server+0x6569ab)
    #6 std::shared_ptr<nuraft::resp_msg> std::__invoke_impl<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::resp_msg> (nuraft::raft_server::*&)(std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::shared_ptr<nuraft::resp_msg>), nuraft::raft_server*&, std::shared_ptr<nuraft::raft_server::commit_ret_elem>&, std::shared_ptr<nuraft::resp_msg> >(std::__invoke_memfun_deref, std::shared_ptr<nuraft::resp_msg> (nuraft::raft_server::*&)(std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::shared_ptr<nuraft::resp_msg>), nuraft::raft_server*&, std::shared_ptr<nuraft::raft_server::commit_ret_elem>&, std::shared_ptr<nuraft::resp_msg>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x65c0fe)
    #7 std::__invoke_result<std::shared_ptr<nuraft::resp_msg> (nuraft::raft_server::*&)(std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::shared_ptr<nuraft::resp_msg>), nuraft::raft_server*&, std::shared_ptr<nuraft::raft_server::commit_ret_elem>&, std::shared_ptr<nuraft::resp_msg> >::type std::__invoke<std::shared_ptr<nuraft::resp_msg> (nuraft::raft_server::*&)(std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::shared_ptr<nuraft::resp_msg>), nuraft::raft_server*&, std::shared_ptr<nuraft::raft_server::commit_ret_elem>&, std::shared_ptr<nuraft::resp_msg> >(std::shared_ptr<nuraft::resp_msg> (nuraft::raft_server::*&)(std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::shared_ptr<nuraft::resp_msg>), nuraft::raft_server*&, std::shared_ptr<nuraft::raft_server::commit_ret_elem>&, std::shared_ptr<nuraft::resp_msg>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x65bb08)
    #8 std::shared_ptr<nuraft::resp_msg> std::_Bind<std::shared_ptr<nuraft::resp_msg> (nuraft::raft_server::* (nuraft::raft_server*, std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::_Placeholder<1>))(std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::shared_ptr<nuraft::resp_msg>)>::__call<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::resp_msg>&&, 0ul, 1ul, 2ul>(std::tuple<std::shared_ptr<nuraft::resp_msg>&&>&&, std::_Index_tuple<0ul, 1ul, 2ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x65bb08)
    #9 std::shared_ptr<nuraft::resp_msg> std::_Bind<std::shared_ptr<nuraft::resp_msg> (nuraft::raft_server::* (nuraft::raft_server*, std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::_Placeholder<1>))(std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::shared_ptr<nuraft::resp_msg>)>::operator()<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::resp_msg> >(std::shared_ptr<nuraft::resp_msg>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x65bb08)
    #10 std::_Function_handler<std::shared_ptr<nuraft::resp_msg> (std::shared_ptr<nuraft::resp_msg>), std::_Bind<std::shared_ptr<nuraft::resp_msg> (nuraft::raft_server::* (nuraft::raft_server*, std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::_Placeholder<1>))(std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::shared_ptr<nuraft::resp_msg>)> >::_M_invoke(std::_Any_data const&, std::shared_ptr<nuraft::resp_msg>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:301:9 (calc_server+0x65bb08)
    #11 std::function<std::shared_ptr<nuraft::resp_msg> (std::shared_ptr<nuraft::resp_msg>)>::operator()(std::shared_ptr<nuraft::resp_msg>) const /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:706:14 (calc_server+0x51e0a3)
    #12 nuraft::resp_msg::call_cb(std::shared_ptr<nuraft::resp_msg>&) /home/zyh/NuRaft/include/libnuraft/resp_msg.hxx:105:16 (calc_server+0x51e0a3)
    #13 nuraft::raft_server::send_msg_to_leader(std::shared_ptr<nuraft::req_msg>&) /home/zyh/NuRaft/src/handle_user_cmd.cxx:132:26 (calc_server+0x50b9e1)
    #14 nuraft::raft_server::append_entries(std::vector<std::shared_ptr<nuraft::buffer>, std::allocator<std::shared_ptr<nuraft::buffer> > > const&) /home/zyh/NuRaft/src/handle_user_cmd.cxx:102:12 (calc_server+0x516b2c)
    #15 calc_server::append_log(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::vector<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > const&) /home/zyh/NuRaft/examples/calculator/calc_server.cxx:96:50 (calc_server+0x4c51b1)
    #16 calc_server::do_cmd(std::vector<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > const&) /home/zyh/NuRaft/examples/calculator/calc_server.cxx:183:9 (calc_server+0x4be876)
    #17 calc_server::loop() /home/zyh/NuRaft/examples/example_common.hxx:145:21 (calc_server+0x4be26a)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:214:5 (calc_server+0x4c8a55)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Mutex M133 (0x7b6c000003c8) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x6bb458)
    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:810:10 (calc_server+0x6bb458)
    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/mutex:107:17 (calc_server+0x6bb458)
    #4 std::unique_lock<std::recursive_mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x6bb458)
    #5 std::unique_lock<std::recursive_mutex>::unique_lock(std::recursive_mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x6bb458)
    #6 nuraft::raft_server::restart_election_timer() /home/zyh/NuRaft/src/handle_timeout.cxx:136:5 (calc_server+0x6bb458)
    #7 nuraft::raft_server::start_server(bool) /home/zyh/NuRaft/src/raft_server.cxx:283:9 (calc_server+0x536ee2)
    #8 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #9 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #10 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #11 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #13 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #14 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #15 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #16 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #17 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f30842668 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f30842668 by main thread:
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::handle_cli_req_callback(std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::shared_ptr<nuraft::resp_msg>) /home/zyh/NuRaft/src/handle_client_request.cxx:196:13 (calc_server+0x656b23)
    #5 std::shared_ptr<nuraft::resp_msg> std::__invoke_impl<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::resp_msg> (nuraft::raft_server::*&)(std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::shared_ptr<nuraft::resp_msg>), nuraft::raft_server*&, std::shared_ptr<nuraft::raft_server::commit_ret_elem>&, std::shared_ptr<nuraft::resp_msg> >(std::__invoke_memfun_deref, std::shared_ptr<nuraft::resp_msg> (nuraft::raft_server::*&)(std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::shared_ptr<nuraft::resp_msg>), nuraft::raft_server*&, std::shared_ptr<nuraft::raft_server::commit_ret_elem>&, std::shared_ptr<nuraft::resp_msg>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x65c0fe)
    #6 std::__invoke_result<std::shared_ptr<nuraft::resp_msg> (nuraft::raft_server::*&)(std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::shared_ptr<nuraft::resp_msg>), nuraft::raft_server*&, std::shared_ptr<nuraft::raft_server::commit_ret_elem>&, std::shared_ptr<nuraft::resp_msg> >::type std::__invoke<std::shared_ptr<nuraft::resp_msg> (nuraft::raft_server::*&)(std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::shared_ptr<nuraft::resp_msg>), nuraft::raft_server*&, std::shared_ptr<nuraft::raft_server::commit_ret_elem>&, std::shared_ptr<nuraft::resp_msg> >(std::shared_ptr<nuraft::resp_msg> (nuraft::raft_server::*&)(std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::shared_ptr<nuraft::resp_msg>), nuraft::raft_server*&, std::shared_ptr<nuraft::raft_server::commit_ret_elem>&, std::shared_ptr<nuraft::resp_msg>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x65bb08)
    #7 std::shared_ptr<nuraft::resp_msg> std::_Bind<std::shared_ptr<nuraft::resp_msg> (nuraft::raft_server::* (nuraft::raft_server*, std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::_Placeholder<1>))(std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::shared_ptr<nuraft::resp_msg>)>::__call<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::resp_msg>&&, 0ul, 1ul, 2ul>(std::tuple<std::shared_ptr<nuraft::resp_msg>&&>&&, std::_Index_tuple<0ul, 1ul, 2ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x65bb08)
    #8 std::shared_ptr<nuraft::resp_msg> std::_Bind<std::shared_ptr<nuraft::resp_msg> (nuraft::raft_server::* (nuraft::raft_server*, std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::_Placeholder<1>))(std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::shared_ptr<nuraft::resp_msg>)>::operator()<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::resp_msg> >(std::shared_ptr<nuraft::resp_msg>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x65bb08)
    #9 std::_Function_handler<std::shared_ptr<nuraft::resp_msg> (std::shared_ptr<nuraft::resp_msg>), std::_Bind<std::shared_ptr<nuraft::resp_msg> (nuraft::raft_server::* (nuraft::raft_server*, std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::_Placeholder<1>))(std::shared_ptr<nuraft::raft_server::commit_ret_elem>, std::shared_ptr<nuraft::resp_msg>)> >::_M_invoke(std::_Any_data const&, std::shared_ptr<nuraft::resp_msg>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:301:9 (calc_server+0x65bb08)
    #10 std::function<std::shared_ptr<nuraft::resp_msg> (std::shared_ptr<nuraft::resp_msg>)>::operator()(std::shared_ptr<nuraft::resp_msg>) const /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:706:14 (calc_server+0x51e0a3)
    #11 nuraft::resp_msg::call_cb(std::shared_ptr<nuraft::resp_msg>&) /home/zyh/NuRaft/include/libnuraft/resp_msg.hxx:105:16 (calc_server+0x51e0a3)
    #12 nuraft::raft_server::send_msg_to_leader(std::shared_ptr<nuraft::req_msg>&) /home/zyh/NuRaft/src/handle_user_cmd.cxx:132:26 (calc_server+0x50b9e1)
    #13 nuraft::raft_server::append_entries(std::vector<std::shared_ptr<nuraft::buffer>, std::allocator<std::shared_ptr<nuraft::buffer> > > const&) /home/zyh/NuRaft/src/handle_user_cmd.cxx:102:12 (calc_server+0x516b2c)
    #14 calc_server::append_log(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::vector<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > const&) /home/zyh/NuRaft/examples/calculator/calc_server.cxx:96:50 (calc_server+0x4c51b1)
    #15 calc_server::do_cmd(std::vector<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > const&) /home/zyh/NuRaft/examples/calculator/calc_server.cxx:183:9 (calc_server+0x4be876)
    #16 calc_server::loop() /home/zyh/NuRaft/examples/example_common.hxx:145:21 (calc_server+0x4be26a)
    #17 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:214:5 (calc_server+0x4c8a55)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f30843678 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f30843678 by thread T6:
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)::operator()(std::error_code const&, unsigned long) const /home/zyh/NuRaft/src/asio_service.cxx:309:17 (calc_server+0x5f8fe5)
    #5 asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>::operator()(std::error_code const&, unsigned long, int) /home/zyh/NuRaft/asio/asio/include/asio/impl/read.hpp:284:9 (calc_server+0x61b2e9)
    #6 asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>, std::error_code, unsigned long>::operator()() /home/zyh/NuRaft/asio/asio/include/asio/detail/bind_handler.hpp:163:5 (calc_server+0x61b2e9)
    #7 void asio::asio_handler_invoke<asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>, std::error_code, unsigned long> >(asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>, std::error_code, unsigned long>&, ...) /home/zyh/NuRaft/asio/asio/include/asio/handler_invoke_hook.hpp:68:3 (calc_server+0x61b2e9)
    #8 void asio_handler_invoke_helpers::invoke<asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>, std::error_code, unsigned long>, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>(asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>, std::error_code, unsigned long>&, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_invoke_helpers.hpp:37:3 (calc_server+0x61b2e9)
    #9 void asio::detail::asio_handler_invoke<asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>, std::error_code, unsigned long>, asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>(asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>, std::error_code, unsigned long>&, asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>*) /home/zyh/NuRaft/asio/asio/include/asio/impl/read.hpp:337:5 (calc_server+0x61b2e9)
    #10 void asio_handler_invoke_helpers::invoke<asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>, std::error_code, unsigned long>, asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)> >(asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>, std::error_code, unsigned long>&, asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_invoke_helpers.hpp:37:3 (calc_server+0x61b2e9)
    #11 void asio::detail::handler_work<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>, asio::system_executor>::complete<asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>, std::error_code, unsigned long> >(asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>, std::error_code, unsigned long>&, asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_work.hpp:81:5 (calc_server+0x61b2e9)
    #12 asio::detail::reactive_socket_recv_op<asio::mutable_buffers_1, asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, nuraft::rpc_session::start(std::shared_ptr<nuraft::rpc_session>)::'lambda'(std::error_code const&, unsigned long)> >::do_complete(void*, asio::detail::scheduler_operation*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/reactive_socket_recv_op.hpp:121:9 (calc_server+0x61b2e9)
    #13 asio::detail::scheduler_operation::complete(void*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/scheduler_operation.hpp:39:5 (calc_server+0x5bb870)
    #14 asio::detail::epoll_reactor::descriptor_state::do_complete(void*, asio::detail::scheduler_operation*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/epoll_reactor.ipp:775:11 (calc_server+0x5bb870)
    #15 asio::detail::scheduler_operation::complete(void*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/scheduler_operation.hpp:39:5 (calc_server+0x589d9b)
    #16 asio::detail::scheduler::do_run_one(asio::detail::conditionally_enabled_mutex::scoped_lock&, asio::detail::scheduler_thread_info&, std::error_code const&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:400:12 (calc_server+0x589d9b)
    #17 asio::detail::scheduler::run(std::error_code&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:153:10 (calc_server+0x588c2a)
    #18 asio::io_context::run() /home/zyh/NuRaft/asio/asio/include/asio/impl/io_context.ipp:61:24 (calc_server+0x57babf)
    #19 nuraft::asio_service_impl::worker_entry() /home/zyh/NuRaft/src/asio_service.cxx:1607:21 (calc_server+0x57babf)
    #20 void std::__invoke_impl<void, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(std::__invoke_memfun_deref, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x595134)
    #21 std::__invoke_result<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>::type std::__invoke<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #22 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595134)
    #23 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595134)
    #24 void std::__invoke_impl<void, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::__invoke_other, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595134)
    #25 std::__invoke_result<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >::type std::__invoke<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #26 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x595134)
    #27 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x595134)
    #28 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x595134)
    #29 <null> <null> (libstdc++.so.6+0xbd6de)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T6 'nuraft_w_3' (tid=83715, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 std::__shared_ptr<std::thread, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x57a46a)
    #3 std::shared_ptr<std::thread>::shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x57a46a)
    #4 std::shared_ptr<std::thread> std::allocate_shared<std::thread, std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x57a46a)
    #5 std::shared_ptr<std::thread> std::make_shared<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x57a46a)
    #6 std::shared_ptr<std::thread> nuraft::cs_new<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x57a46a)
    #7 nuraft::asio_service_impl::asio_service_impl(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1573:13 (calc_server+0x57a46a)
    #8 nuraft::asio_service::asio_service(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1693:17 (calc_server+0x57df93)
    #9 void __gnu_cxx::new_allocator<nuraft::asio_service>::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527802)
    #10 void std::allocator_traits<std::allocator<nuraft::asio_service> >::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>&, nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x5244ec)
    #11 std::_Sp_counted_ptr_inplace<nuraft::asio_service, std::allocator<nuraft::asio_service>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x5244ec)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, nuraft::asio_service*, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x5244ec)
    #13 std::__shared_ptr<nuraft::asio_service, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x5244ec)
    #14 std::shared_ptr<nuraft::asio_service>::shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x5244ec)
    #15 std::shared_ptr<nuraft::asio_service> std::allocate_shared<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x5244ec)
    #16 std::shared_ptr<nuraft::asio_service> std::make_shared<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x5244ec)
    #17 std::shared_ptr<nuraft::asio_service> nuraft::cs_new<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x5244ec)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:38:17 (calc_server+0x5244ec)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f30844688 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f30844688 by thread T5 (mutexes: write M133):
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::handle_peer_resp(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /home/zyh/NuRaft/src/raft_server.cxx:728:13 (calc_server+0x5304fc)
    #5 void std::__invoke_impl<void, void (nuraft::raft_server::*&)(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::raft_server*&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>(std::__invoke_memfun_deref, void (nuraft::raft_server::*&)(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::raft_server*&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x56997a)
    #6 std::__invoke_result<void (nuraft::raft_server::*&)(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::raft_server*&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>::type std::__invoke<void (nuraft::raft_server::*&)(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::raft_server*&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>(void (nuraft::raft_server::*&)(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::raft_server*&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x56997a)
    #7 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>::__call<void, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&, 0ul, 1ul, 2ul>(std::tuple<std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>&&, std::_Index_tuple<0ul, 1ul, 2ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x56997a)
    #8 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>::operator()<std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&, void>(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x56997a)
    #9 std::_Function_handler<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)> >::_M_invoke(std::_Any_data const&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:316:2 (calc_server+0x56997a)
    #10 std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>::operator()(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) const /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:706:14 (calc_server+0x6e016f)
    #11 nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> >::set_result(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /home/zyh/NuRaft/include/libnuraft/async.hxx:163:32 (calc_server+0x6e016f)
    #12 nuraft::peer::handle_rpc_result(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /home/zyh/NuRaft/src/peer.cxx:153:25 (calc_server+0x6dc595)
    #13 void std::__invoke_impl<void, void (nuraft::peer::*&)(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::peer*&, std::shared_ptr<nuraft::peer>&, std::shared_ptr<nuraft::rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>(std::__invoke_memfun_deref, void (nuraft::peer::*&)(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::peer*&, std::shared_ptr<nuraft::peer>&, std::shared_ptr<nuraft::rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x6e1c67)
    #14 std::__invoke_result<void (nuraft::peer::*&)(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::peer*&, std::shared_ptr<nuraft::peer>&, std::shared_ptr<nuraft::rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>::type std::__invoke<void (nuraft::peer::*&)(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::peer*&, std::shared_ptr<nuraft::peer>&, std::shared_ptr<nuraft::rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>(void (nuraft::peer::*&)(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::peer*&, std::shared_ptr<nuraft::peer>&, std::shared_ptr<nuraft::rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x6e1833)
    #15 void std::_Bind<void (nuraft::peer::* (nuraft::peer*, std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>::__call<void, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&, 0ul, 1ul, 2ul, 3ul, 4ul, 5ul, 6ul>(std::tuple<std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>&&, std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul, 6ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x6e1833)
    #16 void std::_Bind<void (nuraft::peer::* (nuraft::peer*, std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>::operator()<std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&, void>(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x6e1833)
    #17 std::_Function_handler<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), std::_Bind<void (nuraft::peer::* (nuraft::peer*, std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)> >::_M_invoke(std::_Any_data const&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:316:2 (calc_server+0x6e1833)
    #18 std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>::operator()(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) const /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:706:14 (calc_server+0x5cf10a)
    #19 nuraft::asio_rpc_client::response_read(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long) /home/zyh/NuRaft/src/asio_service.cxx:1306:13 (calc_server+0x5cf10a)
    #20 void std::__invoke_impl<void, void (nuraft::asio_rpc_client::*&)(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long), std::shared_ptr<nuraft::asio_rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code const&, unsigned long>(std::__invoke_memfun_deref, void (nuraft::asio_rpc_client::*&)(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long), std::shared_ptr<nuraft::asio_rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code const&, unsigned long&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x5d7af5)
    #21 std::__invoke_result<void (nuraft::asio_rpc_client::*&)(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long), std::shared_ptr<nuraft::asio_rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code const&, unsigned long>::type std::__invoke<void (nuraft::asio_rpc_client::*&)(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long), std::shared_ptr<nuraft::asio_rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code const&, unsigned long>(void (nuraft::asio_rpc_client::*&)(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long), std::shared_ptr<nuraft::asio_rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code const&, unsigned long&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5d7af5)
    #22 void std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)>::__call<void, std::error_code const&, unsigned long&&, 0ul, 1ul, 2ul, 3ul, 4ul, 5ul>(std::tuple<std::error_code const&, unsigned long&&>&&, std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x5d7af5)
    #23 void std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)>::operator()<std::error_code const&, unsigned long, void>(std::error_code const&, unsigned long&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x5d7af5)
    #24 asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >::operator()(std::error_code const&, unsigned long, int) /home/zyh/NuRaft/asio/asio/include/asio/impl/read.hpp:284:9 (calc_server+0x5d7af5)
    #25 asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long>::operator()() /home/zyh/NuRaft/asio/asio/include/asio/detail/bind_handler.hpp:163:5 (calc_server+0x5d7af5)
    #26 void asio::asio_handler_invoke<asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long> >(asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long>&, ...) /home/zyh/NuRaft/asio/asio/include/asio/handler_invoke_hook.hpp:68:3 (calc_server+0x5d77ff)
    #27 void asio_handler_invoke_helpers::invoke<asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long>, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >(asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long>&, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_invoke_helpers.hpp:37:3 (calc_server+0x5d77ff)
    #28 void asio::detail::asio_handler_invoke<asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long>, asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >(asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long>&, asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >*) /home/zyh/NuRaft/asio/asio/include/asio/impl/read.hpp:337:5 (calc_server+0x5d77ff)
    #29 void asio_handler_invoke_helpers::invoke<asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long>, asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> > >(asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long>&, asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_invoke_helpers.hpp:37:3 (calc_server+0x5d77ff)
    #30 void asio::detail::handler_work<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, asio::system_executor>::complete<asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long> >(asio::detail::binder2<asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >, std::error_code, unsigned long>&, asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> >&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_work.hpp:81:5 (calc_server+0x5d77ff)
    #31 asio::detail::reactive_socket_recv_op<asio::mutable_buffers_1, asio::detail::read_op<asio::basic_stream_socket<asio::ip::tcp>, asio::mutable_buffers_1, asio::mutable_buffer const*, asio::detail::transfer_all_t, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, std::shared_ptr<nuraft::buffer>, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, std::shared_ptr<nuraft::buffer>&, std::error_code, unsigned long)> > >::do_complete(void*, asio::detail::scheduler_operation*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/reactive_socket_recv_op.hpp:121:9 (calc_server+0x5d77ff)
    #32 asio::detail::scheduler_operation::complete(void*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/scheduler_operation.hpp:39:5 (calc_server+0x5bb870)
    #33 asio::detail::epoll_reactor::descriptor_state::do_complete(void*, asio::detail::scheduler_operation*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/epoll_reactor.ipp:775:11 (calc_server+0x5bb870)
    #34 asio::detail::scheduler_operation::complete(void*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/scheduler_operation.hpp:39:5 (calc_server+0x589d9b)
    #35 asio::detail::scheduler::do_run_one(asio::detail::conditionally_enabled_mutex::scoped_lock&, asio::detail::scheduler_thread_info&, std::error_code const&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:400:12 (calc_server+0x589d9b)
    #36 asio::detail::scheduler::run(std::error_code&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:153:10 (calc_server+0x588c2a)
    #37 asio::io_context::run() /home/zyh/NuRaft/asio/asio/include/asio/impl/io_context.ipp:61:24 (calc_server+0x57babf)
    #38 nuraft::asio_service_impl::worker_entry() /home/zyh/NuRaft/src/asio_service.cxx:1607:21 (calc_server+0x57babf)
    #39 void std::__invoke_impl<void, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(std::__invoke_memfun_deref, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x595134)
    #40 std::__invoke_result<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>::type std::__invoke<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #41 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595134)
    #42 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595134)
    #43 void std::__invoke_impl<void, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::__invoke_other, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595134)
    #44 std::__invoke_result<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >::type std::__invoke<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #45 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x595134)
    #46 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x595134)
    #47 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x595134)
    #48 <null> <null> (libstdc++.so.6+0xbd6de)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Mutex M133 (0x7b6c000003c8) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x6bb458)
    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:810:10 (calc_server+0x6bb458)
    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/mutex:107:17 (calc_server+0x6bb458)
    #4 std::unique_lock<std::recursive_mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x6bb458)
    #5 std::unique_lock<std::recursive_mutex>::unique_lock(std::recursive_mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x6bb458)
    #6 nuraft::raft_server::restart_election_timer() /home/zyh/NuRaft/src/handle_timeout.cxx:136:5 (calc_server+0x6bb458)
    #7 nuraft::raft_server::start_server(bool) /home/zyh/NuRaft/src/raft_server.cxx:283:9 (calc_server+0x536ee2)
    #8 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #9 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #10 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #11 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #13 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #14 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #15 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #16 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #17 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T5 'nuraft_w_2' (tid=83713, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 std::__shared_ptr<std::thread, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x57a46a)
    #3 std::shared_ptr<std::thread>::shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x57a46a)
    #4 std::shared_ptr<std::thread> std::allocate_shared<std::thread, std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x57a46a)
    #5 std::shared_ptr<std::thread> std::make_shared<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x57a46a)
    #6 std::shared_ptr<std::thread> nuraft::cs_new<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x57a46a)
    #7 nuraft::asio_service_impl::asio_service_impl(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1573:13 (calc_server+0x57a46a)
    #8 nuraft::asio_service::asio_service(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1693:17 (calc_server+0x57df93)
    #9 void __gnu_cxx::new_allocator<nuraft::asio_service>::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527802)
    #10 void std::allocator_traits<std::allocator<nuraft::asio_service> >::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>&, nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x5244ec)
    #11 std::_Sp_counted_ptr_inplace<nuraft::asio_service, std::allocator<nuraft::asio_service>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x5244ec)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, nuraft::asio_service*, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x5244ec)
    #13 std::__shared_ptr<nuraft::asio_service, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x5244ec)
    #14 std::shared_ptr<nuraft::asio_service>::shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x5244ec)
    #15 std::shared_ptr<nuraft::asio_service> std::allocate_shared<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x5244ec)
    #16 std::shared_ptr<nuraft::asio_service> std::make_shared<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x5244ec)
    #17 std::shared_ptr<nuraft::asio_service> nuraft::cs_new<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x5244ec)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:38:17 (calc_server+0x5244ec)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f308476b8 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f308476b8 by thread T6 (mutexes: write M133):
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::handle_peer_resp(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /home/zyh/NuRaft/src/raft_server.cxx:728:13 (calc_server+0x5304fc)
    #5 void std::__invoke_impl<void, void (nuraft::raft_server::*&)(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::raft_server*&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>(std::__invoke_memfun_deref, void (nuraft::raft_server::*&)(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::raft_server*&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x56997a)
    #6 std::__invoke_result<void (nuraft::raft_server::*&)(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::raft_server*&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>::type std::__invoke<void (nuraft::raft_server::*&)(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::raft_server*&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>(void (nuraft::raft_server::*&)(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::raft_server*&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x56997a)
    #7 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>::__call<void, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&, 0ul, 1ul, 2ul>(std::tuple<std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>&&, std::_Index_tuple<0ul, 1ul, 2ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x56997a)
    #8 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>::operator()<std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&, void>(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x56997a)
    #9 std::_Function_handler<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)> >::_M_invoke(std::_Any_data const&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:316:2 (calc_server+0x56997a)
    #10 std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>::operator()(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) const /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:706:14 (calc_server+0x6e016f)
    #11 nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> >::set_result(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /home/zyh/NuRaft/include/libnuraft/async.hxx:163:32 (calc_server+0x6e016f)
    #12 nuraft::peer::handle_rpc_result(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /home/zyh/NuRaft/src/peer.cxx:153:25 (calc_server+0x6dc595)
    #13 void std::__invoke_impl<void, void (nuraft::peer::*&)(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::peer*&, std::shared_ptr<nuraft::peer>&, std::shared_ptr<nuraft::rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>(std::__invoke_memfun_deref, void (nuraft::peer::*&)(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::peer*&, std::shared_ptr<nuraft::peer>&, std::shared_ptr<nuraft::rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x6e1c67)
    #14 std::__invoke_result<void (nuraft::peer::*&)(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::peer*&, std::shared_ptr<nuraft::peer>&, std::shared_ptr<nuraft::rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>::type std::__invoke<void (nuraft::peer::*&)(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::peer*&, std::shared_ptr<nuraft::peer>&, std::shared_ptr<nuraft::rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>(void (nuraft::peer::*&)(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::peer*&, std::shared_ptr<nuraft::peer>&, std::shared_ptr<nuraft::rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x6e1833)
    #15 void std::_Bind<void (nuraft::peer::* (nuraft::peer*, std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>::__call<void, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&, 0ul, 1ul, 2ul, 3ul, 4ul, 5ul, 6ul>(std::tuple<std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>&&, std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul, 6ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x6e1833)
    #16 void std::_Bind<void (nuraft::peer::* (nuraft::peer*, std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>::operator()<std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&, void>(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x6e1833)
    #17 std::_Function_handler<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), std::_Bind<void (nuraft::peer::* (nuraft::peer*, std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)> >::_M_invoke(std::_Any_data const&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:316:2 (calc_server+0x6e1833)
    #18 std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>::operator()(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) const /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:706:14 (calc_server+0x5b8224)
    #19 nuraft::asio_rpc_client::connected(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>) /home/zyh/NuRaft/src/asio_service.cxx:1215:13 (calc_server+0x5b8224)
    #20 void std::__invoke_impl<void, void (nuraft::asio_rpc_client::*&)(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>), std::shared_ptr<nuraft::asio_rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long&, std::error_code const&, asio::ip::basic_resolver_iterator<asio::ip::tcp> const&>(std::__invoke_memfun_deref, void (nuraft::asio_rpc_client::*&)(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>), std::shared_ptr<nuraft::asio_rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long&, std::error_code const&, asio::ip::basic_resolver_iterator<asio::ip::tcp> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x5bfbfa)
    #21 std::__invoke_result<void (nuraft::asio_rpc_client::*&)(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>), std::shared_ptr<nuraft::asio_rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long&, std::error_code const&, asio::ip::basic_resolver_iterator<asio::ip::tcp> const&>::type std::__invoke<void (nuraft::asio_rpc_client::*&)(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>), std::shared_ptr<nuraft::asio_rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long&, std::error_code const&, asio::ip::basic_resolver_iterator<asio::ip::tcp> const&>(void (nuraft::asio_rpc_client::*&)(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>), std::shared_ptr<nuraft::asio_rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long&, std::error_code const&, asio::ip::basic_resolver_iterator<asio::ip::tcp> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5b9528)
    #22 void std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)>::__call<void, std::error_code const&, asio::ip::basic_resolver_iterator<asio::ip::tcp> const&, 0ul, 1ul, 2ul, 3ul, 4ul, 5ul>(std::tuple<std::error_code const&, asio::ip::basic_resolver_iterator<asio::ip::tcp> const&>&&, std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x5b9528)
    #23 void std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)>::operator()<std::error_code const&, asio::ip::basic_resolver_iterator<asio::ip::tcp> const&, void>(std::error_code const&, asio::ip::basic_resolver_iterator<asio::ip::tcp> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x5b9528)
    #24 asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >::operator()(std::error_code, int) /home/zyh/NuRaft/asio/asio/include/asio/impl/connect.hpp:540:9 (calc_server+0x5b9528)
    #25 asio::detail::binder1<asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >, std::error_code>::operator()() /home/zyh/NuRaft/asio/asio/include/asio/detail/bind_handler.hpp:64:5 (calc_server+0x5bce23)
    #26 void asio::asio_handler_invoke<asio::detail::binder1<asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >, std::error_code> >(asio::detail::binder1<asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >, std::error_code>&, ...) /home/zyh/NuRaft/asio/asio/include/asio/handler_invoke_hook.hpp:68:3 (calc_server+0x5bce23)
    #27 void asio_handler_invoke_helpers::invoke<asio::detail::binder1<asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >, std::error_code>, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >(asio::detail::binder1<asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >, std::error_code>&, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_invoke_helpers.hpp:37:3 (calc_server+0x5bce23)
    #28 void asio::detail::asio_handler_invoke<asio::detail::binder1<asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >, std::error_code>, asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >(asio::detail::binder1<asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >, std::error_code>&, asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >*) /home/zyh/NuRaft/asio/asio/include/asio/impl/connect.hpp:590:5 (calc_server+0x5bce23)
    #29 void asio_handler_invoke_helpers::invoke<asio::detail::binder1<asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >, std::error_code>, asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> > >(asio::detail::binder1<asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >, std::error_code>&, asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_invoke_helpers.hpp:37:3 (calc_server+0x5bce23)
    #30 void asio::detail::handler_work<asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >, asio::system_executor>::complete<asio::detail::binder1<asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >, std::error_code> >(asio::detail::binder1<asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >, std::error_code>&, asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_work.hpp:81:5 (calc_server+0x5bce23)
    #31 asio::detail::reactive_socket_connect_op<asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> > >::do_complete(void*, asio::detail::scheduler_operation*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/reactive_socket_connect_op.hpp:99:9 (calc_server+0x5bce23)
    #32 asio::detail::scheduler_operation::complete(void*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/scheduler_operation.hpp:39:5 (calc_server+0x5bb870)
    #33 asio::detail::epoll_reactor::descriptor_state::do_complete(void*, asio::detail::scheduler_operation*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/epoll_reactor.ipp:775:11 (calc_server+0x5bb870)
    #34 asio::detail::scheduler_operation::complete(void*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/scheduler_operation.hpp:39:5 (calc_server+0x589d9b)
    #35 asio::detail::scheduler::do_run_one(asio::detail::conditionally_enabled_mutex::scoped_lock&, asio::detail::scheduler_thread_info&, std::error_code const&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:400:12 (calc_server+0x589d9b)
    #36 asio::detail::scheduler::run(std::error_code&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:153:10 (calc_server+0x588c2a)
    #37 asio::io_context::run() /home/zyh/NuRaft/asio/asio/include/asio/impl/io_context.ipp:61:24 (calc_server+0x57babf)
    #38 nuraft::asio_service_impl::worker_entry() /home/zyh/NuRaft/src/asio_service.cxx:1607:21 (calc_server+0x57babf)
    #39 void std::__invoke_impl<void, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(std::__invoke_memfun_deref, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x595134)
    #40 std::__invoke_result<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>::type std::__invoke<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #41 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595134)
    #42 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595134)
    #43 void std::__invoke_impl<void, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::__invoke_other, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595134)
    #44 std::__invoke_result<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >::type std::__invoke<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #45 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x595134)
    #46 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x595134)
    #47 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x595134)
    #48 <null> <null> (libstdc++.so.6+0xbd6de)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Mutex M133 (0x7b6c000003c8) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x6bb458)
    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:810:10 (calc_server+0x6bb458)
    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/mutex:107:17 (calc_server+0x6bb458)
    #4 std::unique_lock<std::recursive_mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x6bb458)
    #5 std::unique_lock<std::recursive_mutex>::unique_lock(std::recursive_mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x6bb458)
    #6 nuraft::raft_server::restart_election_timer() /home/zyh/NuRaft/src/handle_timeout.cxx:136:5 (calc_server+0x6bb458)
    #7 nuraft::raft_server::start_server(bool) /home/zyh/NuRaft/src/raft_server.cxx:283:9 (calc_server+0x536ee2)
    #8 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #9 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #10 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #11 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #13 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #14 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #15 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #16 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #17 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T6 'nuraft_w_3' (tid=83715, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 std::__shared_ptr<std::thread, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x57a46a)
    #3 std::shared_ptr<std::thread>::shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x57a46a)
    #4 std::shared_ptr<std::thread> std::allocate_shared<std::thread, std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x57a46a)
    #5 std::shared_ptr<std::thread> std::make_shared<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x57a46a)
    #6 std::shared_ptr<std::thread> nuraft::cs_new<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x57a46a)
    #7 nuraft::asio_service_impl::asio_service_impl(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1573:13 (calc_server+0x57a46a)
    #8 nuraft::asio_service::asio_service(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1693:17 (calc_server+0x57df93)
    #9 void __gnu_cxx::new_allocator<nuraft::asio_service>::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527802)
    #10 void std::allocator_traits<std::allocator<nuraft::asio_service> >::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>&, nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x5244ec)
    #11 std::_Sp_counted_ptr_inplace<nuraft::asio_service, std::allocator<nuraft::asio_service>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x5244ec)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, nuraft::asio_service*, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x5244ec)
    #13 std::__shared_ptr<nuraft::asio_service, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x5244ec)
    #14 std::shared_ptr<nuraft::asio_service>::shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x5244ec)
    #15 std::shared_ptr<nuraft::asio_service> std::allocate_shared<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x5244ec)
    #16 std::shared_ptr<nuraft::asio_service> std::make_shared<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x5244ec)
    #17 std::shared_ptr<nuraft::asio_service> nuraft::cs_new<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x5244ec)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:38:17 (calc_server+0x5244ec)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f3087da18 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f3087da18 by thread T4 (mutexes: write M133):
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::handle_peer_resp(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /home/zyh/NuRaft/src/raft_server.cxx:730:13 (calc_server+0x530804)
    #5 void std::__invoke_impl<void, void (nuraft::raft_server::*&)(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::raft_server*&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>(std::__invoke_memfun_deref, void (nuraft::raft_server::*&)(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::raft_server*&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x56997a)
    #6 std::__invoke_result<void (nuraft::raft_server::*&)(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::raft_server*&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>::type std::__invoke<void (nuraft::raft_server::*&)(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::raft_server*&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>(void (nuraft::raft_server::*&)(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::raft_server*&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x56997a)
    #7 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>::__call<void, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&, 0ul, 1ul, 2ul>(std::tuple<std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>&&, std::_Index_tuple<0ul, 1ul, 2ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x56997a)
    #8 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>::operator()<std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&, void>(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x56997a)
    #9 std::_Function_handler<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)> >::_M_invoke(std::_Any_data const&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:316:2 (calc_server+0x56997a)
    #10 std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>::operator()(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) const /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:706:14 (calc_server+0x6e016f)
    #11 nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> >::set_result(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /home/zyh/NuRaft/include/libnuraft/async.hxx:163:32 (calc_server+0x6e016f)
    #12 nuraft::peer::handle_rpc_result(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /home/zyh/NuRaft/src/peer.cxx:153:25 (calc_server+0x6dc595)
    #13 void std::__invoke_impl<void, void (nuraft::peer::*&)(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::peer*&, std::shared_ptr<nuraft::peer>&, std::shared_ptr<nuraft::rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>(std::__invoke_memfun_deref, void (nuraft::peer::*&)(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::peer*&, std::shared_ptr<nuraft::peer>&, std::shared_ptr<nuraft::rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x6e1c67)
    #14 std::__invoke_result<void (nuraft::peer::*&)(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::peer*&, std::shared_ptr<nuraft::peer>&, std::shared_ptr<nuraft::rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>::type std::__invoke<void (nuraft::peer::*&)(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::peer*&, std::shared_ptr<nuraft::peer>&, std::shared_ptr<nuraft::rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>(void (nuraft::peer::*&)(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), nuraft::peer*&, std::shared_ptr<nuraft::peer>&, std::shared_ptr<nuraft::rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x6e1833)
    #15 void std::_Bind<void (nuraft::peer::* (nuraft::peer*, std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>::__call<void, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&, 0ul, 1ul, 2ul, 3ul, 4ul, 5ul, 6ul>(std::tuple<std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&>&&, std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul, 6ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x6e1833)
    #16 void std::_Bind<void (nuraft::peer::* (nuraft::peer*, std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>::operator()<std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&, void>(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x6e1833)
    #17 std::_Function_handler<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&), std::_Bind<void (nuraft::peer::* (nuraft::peer*, std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::peer>, std::shared_ptr<nuraft::rpc_client>, std::shared_ptr<nuraft::req_msg>&, std::shared_ptr<nuraft::cmd_result<std::shared_ptr<nuraft::resp_msg>, std::shared_ptr<nuraft::rpc_exception> > >&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)> >::_M_invoke(std::_Any_data const&, std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:316:2 (calc_server+0x6e1833)
    #18 std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>::operator()(std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&) const /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_function.h:706:14 (calc_server+0x5b8224)
    #19 nuraft::asio_rpc_client::connected(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>) /home/zyh/NuRaft/src/asio_service.cxx:1215:13 (calc_server+0x5b8224)
    #20 void std::__invoke_impl<void, void (nuraft::asio_rpc_client::*&)(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>), std::shared_ptr<nuraft::asio_rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long&, std::error_code const&, asio::ip::basic_resolver_iterator<asio::ip::tcp> const&>(std::__invoke_memfun_deref, void (nuraft::asio_rpc_client::*&)(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>), std::shared_ptr<nuraft::asio_rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long&, std::error_code const&, asio::ip::basic_resolver_iterator<asio::ip::tcp> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x5bfbfa)
    #21 std::__invoke_result<void (nuraft::asio_rpc_client::*&)(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>), std::shared_ptr<nuraft::asio_rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long&, std::error_code const&, asio::ip::basic_resolver_iterator<asio::ip::tcp> const&>::type std::__invoke<void (nuraft::asio_rpc_client::*&)(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>), std::shared_ptr<nuraft::asio_rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long&, std::error_code const&, asio::ip::basic_resolver_iterator<asio::ip::tcp> const&>(void (nuraft::asio_rpc_client::*&)(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>), std::shared_ptr<nuraft::asio_rpc_client>&, std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long&, std::error_code const&, asio::ip::basic_resolver_iterator<asio::ip::tcp> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5b9528)
    #22 void std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)>::__call<void, std::error_code const&, asio::ip::basic_resolver_iterator<asio::ip::tcp> const&, 0ul, 1ul, 2ul, 3ul, 4ul, 5ul>(std::tuple<std::error_code const&, asio::ip::basic_resolver_iterator<asio::ip::tcp> const&>&&, std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x5b9528)
    #23 void std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)>::operator()<std::error_code const&, asio::ip::basic_resolver_iterator<asio::ip::tcp> const&, void>(std::error_code const&, asio::ip::basic_resolver_iterator<asio::ip::tcp> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x5b9528)
    #24 asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >::operator()(std::error_code, int) /home/zyh/NuRaft/asio/asio/include/asio/impl/connect.hpp:540:9 (calc_server+0x5b9528)
    #25 asio::detail::binder1<asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >, std::error_code>::operator()() /home/zyh/NuRaft/asio/asio/include/asio/detail/bind_handler.hpp:64:5 (calc_server+0x5bce23)
    #26 void asio::asio_handler_invoke<asio::detail::binder1<asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >, std::error_code> >(asio::detail::binder1<asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >, std::error_code>&, ...) /home/zyh/NuRaft/asio/asio/include/asio/handler_invoke_hook.hpp:68:3 (calc_server+0x5bce23)
    #27 void asio_handler_invoke_helpers::invoke<asio::detail::binder1<asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >, std::error_code>, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >(asio::detail::binder1<asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >, std::error_code>&, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)>&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_invoke_helpers.hpp:37:3 (calc_server+0x5bce23)
    #28 void asio::detail::asio_handler_invoke<asio::detail::binder1<asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >, std::error_code>, asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >(asio::detail::binder1<asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >, std::error_code>&, asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >*) /home/zyh/NuRaft/asio/asio/include/asio/impl/connect.hpp:590:5 (calc_server+0x5bce23)
    #29 void asio_handler_invoke_helpers::invoke<asio::detail::binder1<asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >, std::error_code>, asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> > >(asio::detail::binder1<asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >, std::error_code>&, asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_invoke_helpers.hpp:37:3 (calc_server+0x5bce23)
    #30 void asio::detail::handler_work<asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >, asio::system_executor>::complete<asio::detail::binder1<asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >, std::error_code> >(asio::detail::binder1<asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >, std::error_code>&, asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> >&) /home/zyh/NuRaft/asio/asio/include/asio/detail/handler_work.hpp:81:5 (calc_server+0x5bce23)
    #31 asio::detail::reactive_socket_connect_op<asio::detail::iterator_connect_op<asio::ip::tcp, asio::ip::basic_resolver_iterator<asio::ip::tcp>, asio::detail::default_connect_condition, std::_Bind<void (nuraft::asio_rpc_client::* (std::shared_ptr<nuraft::asio_rpc_client>, std::shared_ptr<nuraft::req_msg>, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>, unsigned long, std::_Placeholder<1>, std::_Placeholder<2>))(std::shared_ptr<nuraft::req_msg>&, std::function<void (std::shared_ptr<nuraft::resp_msg>&, std::shared_ptr<nuraft::rpc_exception>&)>&, unsigned long, std::error_code, asio::ip::basic_resolver_iterator<asio::ip::tcp>)> > >::do_complete(void*, asio::detail::scheduler_operation*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/reactive_socket_connect_op.hpp:99:9 (calc_server+0x5bce23)
    #32 asio::detail::scheduler_operation::complete(void*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/scheduler_operation.hpp:39:5 (calc_server+0x5bb870)
    #33 asio::detail::epoll_reactor::descriptor_state::do_complete(void*, asio::detail::scheduler_operation*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/epoll_reactor.ipp:775:11 (calc_server+0x5bb870)
    #34 asio::detail::scheduler_operation::complete(void*, std::error_code const&, unsigned long) /home/zyh/NuRaft/asio/asio/include/asio/detail/scheduler_operation.hpp:39:5 (calc_server+0x589d9b)
    #35 asio::detail::scheduler::do_run_one(asio::detail::conditionally_enabled_mutex::scoped_lock&, asio::detail::scheduler_thread_info&, std::error_code const&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:400:12 (calc_server+0x589d9b)
    #36 asio::detail::scheduler::run(std::error_code&) /home/zyh/NuRaft/asio/asio/include/asio/detail/impl/scheduler.ipp:153:10 (calc_server+0x588c2a)
    #37 asio::io_context::run() /home/zyh/NuRaft/asio/asio/include/asio/impl/io_context.ipp:61:24 (calc_server+0x57babf)
    #38 nuraft::asio_service_impl::worker_entry() /home/zyh/NuRaft/src/asio_service.cxx:1607:21 (calc_server+0x57babf)
    #39 void std::__invoke_impl<void, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(std::__invoke_memfun_deref, void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x595134)
    #40 std::__invoke_result<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>::type std::__invoke<void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&>(void (nuraft::asio_service_impl::*&)(), nuraft::asio_service_impl*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #41 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x595134)
    #42 void std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x595134)
    #43 void std::__invoke_impl<void, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::__invoke_other, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x595134)
    #44 std::__invoke_result<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >::type std::__invoke<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x595134)
    #45 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x595134)
    #46 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x595134)
    #47 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x595134)
    #48 <null> <null> (libstdc++.so.6+0xbd6de)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Mutex M133 (0x7b6c000003c8) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x6bb458)
    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:810:10 (calc_server+0x6bb458)
    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/mutex:107:17 (calc_server+0x6bb458)
    #4 std::unique_lock<std::recursive_mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x6bb458)
    #5 std::unique_lock<std::recursive_mutex>::unique_lock(std::recursive_mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x6bb458)
    #6 nuraft::raft_server::restart_election_timer() /home/zyh/NuRaft/src/handle_timeout.cxx:136:5 (calc_server+0x6bb458)
    #7 nuraft::raft_server::start_server(bool) /home/zyh/NuRaft/src/raft_server.cxx:283:9 (calc_server+0x536ee2)
    #8 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #9 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #10 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #11 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #13 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #14 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #15 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #16 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #17 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T4 'nuraft_w_1' (tid=83711, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 std::__shared_ptr<std::thread, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x57a46a)
    #3 std::shared_ptr<std::thread>::shared_ptr<std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Sp_make_shared_tag, std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x57a46a)
    #4 std::shared_ptr<std::thread> std::allocate_shared<std::thread, std::allocator<std::thread>, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::allocator<std::thread> const&, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x57a46a)
    #5 std::shared_ptr<std::thread> std::make_shared<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x57a46a)
    #6 std::shared_ptr<std::thread> nuraft::cs_new<std::thread, std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()> >(std::_Bind<void (nuraft::asio_service_impl::* (nuraft::asio_service_impl*))()>&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x57a46a)
    #7 nuraft::asio_service_impl::asio_service_impl(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1573:13 (calc_server+0x57a46a)
    #8 nuraft::asio_service::asio_service(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>) /home/zyh/NuRaft/src/asio_service.cxx:1693:17 (calc_server+0x57df93)
    #9 void __gnu_cxx::new_allocator<nuraft::asio_service>::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527802)
    #10 void std::allocator_traits<std::allocator<nuraft::asio_service> >::construct<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>&, nuraft::asio_service*, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x5244ec)
    #11 std::_Sp_counted_ptr_inplace<nuraft::asio_service, std::allocator<nuraft::asio_service>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x5244ec)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, nuraft::asio_service*, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x5244ec)
    #13 std::__shared_ptr<nuraft::asio_service, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x5244ec)
    #14 std::shared_ptr<nuraft::asio_service>::shared_ptr<std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::_Sp_make_shared_tag, std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x5244ec)
    #15 std::shared_ptr<nuraft::asio_service> std::allocate_shared<nuraft::asio_service, std::allocator<nuraft::asio_service>, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(std::allocator<nuraft::asio_service> const&, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x5244ec)
    #16 std::shared_ptr<nuraft::asio_service> std::make_shared<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x5244ec)
    #17 std::shared_ptr<nuraft::asio_service> nuraft::cs_new<nuraft::asio_service, nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&>(nuraft::asio_service_options const&, std::shared_ptr<nuraft::logger>&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x5244ec)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:38:17 (calc_server+0x5244ec)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
failed: -2, 3.0 s
[32mcalc 1> [0mmy server id: 1
leader id: 1
Raft log range: 1 - 4
last committed index: 2
state machine value: 0
[32mcalc 1> [0mmy server id: 1
leader id: 1
Raft log range: 1 - 4
last committed index: 2
state machine value: 0
[32mcalc 1> [0mmy server id: 1
leader id: 1
Raft log range: 1 - 4
last committed index: 2
state machine value: 0
[32mcalc 1> [0mmy server id: 1
leader id: 1
Raft log range: 1 - 4
last committed index: 2
state machine value: 0
[32mcalc 1> [0mmy server id: 1
leader id: 1
Raft log range: 1 - 4
last committed index: 2
state machine value: 0
[32mcalc 1> [0mmy server id: 1
leader id: 1
Raft log range: 1 - 4
last committed index: 2
state machine value: 0
[32mcalc 1> [0mmy server id: 1
leader id: 1
Raft log range: 1 - 4
last committed index: 2
state machine value: 0
[32mcalc 1> [0mmy server id: 1
leader id: 1
Raft log range: 1 - 4
last committed index: 2
state machine value: 0
[32mcalc 1> [0mmy server id: 1
leader id: 1
Raft log range: 1 - 4
last committed index: 2
state machine value: 0
[32mcalc 1> [0mop=set!
==================
WARNING: ThreadSanitizer: data race (pid=83692)
  Read of size 8 at 0x7f7f30884a88 by thread T1 (mutexes: write M38, write M207):
    #0 memcpy <null> (calc_server+0x434697)
    #1 std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) <null> (libstdc++.so.6+0x123477)
    #2 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #3 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #4 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #5 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #6 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #7 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #8 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #9 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #10 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #11 <null> <null> (libstdc++.so.6+0xbd6de)

  Previous write of size 8 at 0x7f7f30884a88 by thread T8 (mutexes: write M133):
    #0 memcpy <null> (calc_server+0x434697)
    #1 SimpleLogger::LogElem::write(unsigned long, char*) /home/zyh/NuRaft/examples/logger.cc:748:9 (calc_server+0x4e54eb)
    #2 SimpleLogger::put(int, char const*, char const*, unsigned long, char const*, ...) /home/zyh/NuRaft/examples/logger.cc:1094:13 (calc_server+0x4e54eb)
    #3 logger_wrapper::put_details(int, char const*, char const*, unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger_wrapper.hxx:58:22 (calc_server+0x4cd007)
    #4 nuraft::raft_server::request_append_entries(std::shared_ptr<nuraft::peer>) /home/zyh/NuRaft/src/handle_append_entries.cxx:224:17 (calc_server+0x62f301)
    #5 nuraft::raft_server::request_append_entries() /home/zyh/NuRaft/src/handle_append_entries.cxx:79:9 (calc_server+0x62a681)
    #6 nuraft::raft_server::append_entries_in_bg_exec() /home/zyh/NuRaft/src/handle_append_entries.cxx:61:5 (calc_server+0x6299c2)
    #7 nuraft::raft_server::append_entries_in_bg() /home/zyh/NuRaft/src/handle_append_entries.cxx:53:9 (calc_server+0x6299c2)
    #8 void std::__invoke_impl<void, void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(std::__invoke_memfun_deref, void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:73:14 (calc_server+0x5700b4)
    #9 std::__invoke_result<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>::type std::__invoke<void (nuraft::raft_server::*&)(), nuraft::raft_server*&>(void (nuraft::raft_server::*&)(), nuraft::raft_server*&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5700b4)
    #10 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::__call<void, 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:467:11 (calc_server+0x5700b4)
    #11 void std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/functional:549:17 (calc_server+0x5700b4)
    #12 void std::__invoke_impl<void, std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >(std::__invoke_other, std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x5700b4)
    #13 std::__invoke_result<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >::type std::__invoke<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> >(std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()>&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x5700b4)
    #14 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x5700b4)
    #15 std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x5700b4)
    #16 std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (nuraft::raft_server::* (nuraft::raft_server*))()> > > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x5700b4)
    #17 <null> <null> (libstdc++.so.6+0xbd6de)

  Location is heap block of size 4210688 at 0x7f7f307dc000 allocated by main thread:
    #0 operator new(unsigned long) <null> (calc_server+0x4b8f4b)
    #1 __gnu_cxx::new_allocator<SimpleLogger::LogElem>::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:111:27 (calc_server+0x4e7a31)
    #2 std::allocator_traits<std::allocator<SimpleLogger::LogElem> >::allocate(std::allocator<SimpleLogger::LogElem>&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:436:20 (calc_server+0x4e7a31)
    #3 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:172:20 (calc_server+0x4e7a31)
    #4 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_M_create_storage(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:187:33 (calc_server+0x4e7a31)
    #5 std::_Vector_base<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::_Vector_base(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:138:9 (calc_server+0x4e7a31)
    #6 std::vector<SimpleLogger::LogElem, std::allocator<SimpleLogger::LogElem> >::vector(unsigned long, std::allocator<SimpleLogger::LogElem> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/stl_vector.h:284:9 (calc_server+0x4e7a31)
    #7 SimpleLogger::SimpleLogger(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, unsigned long, unsigned int) /home/zyh/NuRaft/examples/logger.cc:787:7 (calc_server+0x4e7a31)
    #8 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:31:23 (calc_server+0x4cc877)
    #9 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #10 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #11 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #13 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #17 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #18 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #19 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M38 (0x7b6400000500) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x4e5d76)
    #2 std::mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:103:17 (calc_server+0x4e5d76)
    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x4e5d76)
    #4 std::unique_lock<std::mutex>::unique_lock(std::mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x4e5d76)
    #5 SimpleLoggerMgr::addLogger(SimpleLogger*) /home/zyh/NuRaft/examples/logger.cc:641:34 (calc_server+0x4e5d76)
    #6 SimpleLogger::start() /home/zyh/NuRaft/examples/logger.cc:961:10 (calc_server+0x4eb940)
    #7 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:35:18 (calc_server+0x4cc993)
    #8 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #9 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #10 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #11 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #12 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #15 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #16 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #17 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #18 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Mutex M207 (0x7b58000002a0) created at:
    #0 pthread_mutex_trylock <null> (calc_server+0x42bd86)
    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:757:12 (calc_server+0x4ebbb7)
    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:114:15 (calc_server+0x4ebbb7)
    #3 std::unique_lock<std::mutex>::unique_lock(std::mutex&, std::try_to_lock_t) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:206:62 (calc_server+0x4ebbb7)
    #4 SimpleLogger::flush(unsigned long) /home/zyh/NuRaft/examples/logger.cc:1196:34 (calc_server+0x4ebbb7)
    #5 SimpleLogger::flushAll() /home/zyh/NuRaft/examples/logger.cc:1235:5 (calc_server+0x4d8f90)
    #6 SimpleLoggerMgr::flushAllLoggers(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /home/zyh/NuRaft/examples/logger.cc:636:17 (calc_server+0x4d8f90)
    #7 SimpleLoggerMgr::flushAllLoggers() /home/zyh/NuRaft/examples/logger.h:369:30 (calc_server+0x4e0014)
    #8 SimpleLoggerMgr::flushWorker() /home/zyh/NuRaft/examples/logger.cc:495:14 (calc_server+0x4e0014)
    #9 void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:60:14 (calc_server+0x4ed6df)
    #10 std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/invoke.h:95:14 (calc_server+0x4ed6df)
    #11 decltype(std::__invoke(_S_declval<0ul>())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:234:13 (calc_server+0x4ed6df)
    #12 std::thread::_Invoker<std::tuple<void (*)()> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:243:11 (calc_server+0x4ed6df)
    #13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/thread:186:13 (calc_server+0x4ed6df)
    #14 <null> <null> (libstdc++.so.6+0xbd6de)

  Mutex M133 (0x7b6c000003c8) created at:
    #0 pthread_mutex_lock <null> (calc_server+0x4486c6)
    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:748:12 (calc_server+0x6bb458)
    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0/bits/gthr-default.h:810:10 (calc_server+0x6bb458)
    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/mutex:107:17 (calc_server+0x6bb458)
    #4 std::unique_lock<std::recursive_mutex>::lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:267:17 (calc_server+0x6bb458)
    #5 std::unique_lock<std::recursive_mutex>::unique_lock(std::recursive_mutex&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/std_mutex.h:197:2 (calc_server+0x6bb458)
    #6 nuraft::raft_server::restart_election_timer() /home/zyh/NuRaft/src/handle_timeout.cxx:136:5 (calc_server+0x6bb458)
    #7 nuraft::raft_server::start_server(bool) /home/zyh/NuRaft/src/raft_server.cxx:283:9 (calc_server+0x536ee2)
    #8 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #9 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #10 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #11 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #12 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #13 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #14 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #15 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #16 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #17 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #18 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #19 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #20 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T1 (tid=83700, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 SimpleLoggerMgr::init() /home/zyh/NuRaft/examples/logger.cc:161:23 (calc_server+0x4d7989)
    #3 SimpleLoggerMgr::get() /home/zyh/NuRaft/examples/logger.cc:170:22 (calc_server+0x4e9f7a)
    #4 SimpleLogger::setCrashDumpPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) /home/zyh/NuRaft/examples/logger.cc:806:28 (calc_server+0x4e9f7a)
    #5 logger_wrapper::logger_wrapper(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) /home/zyh/NuRaft/examples/logger_wrapper.hxx:34:9 (calc_server+0x4cc934)
    #6 void __gnu_cxx::new_allocator<logger_wrapper>::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x4bef8c)
    #7 void std::allocator_traits<std::allocator<logger_wrapper> >::construct<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>&, logger_wrapper*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x4bef8c)
    #8 std::_Sp_counted_ptr_inplace<logger_wrapper, std::allocator<logger_wrapper>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x4bef8c)
    #9 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, logger_wrapper*, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x4bef8c)
    #10 std::__shared_ptr<logger_wrapper, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x4bef8c)
    #11 std::shared_ptr<logger_wrapper>::shared_ptr<std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::_Sp_make_shared_tag, std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x4bef8c)
    #12 std::shared_ptr<logger_wrapper> std::allocate_shared<logger_wrapper, std::allocator<logger_wrapper>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::allocator<logger_wrapper> const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x4bef8c)
    #13 std::shared_ptr<logger_wrapper> std::make_shared<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x4bef8c)
    #14 std::shared_ptr<logger_wrapper> nuraft::cs_new<logger_wrapper, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int&&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x4bef8c)
    #15 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:155:36 (calc_server+0x4bef8c)
    #16 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

  Thread T8 'nuraft_append' (tid=83720, running) created by main thread at:
    #0 pthread_create <null> (calc_server+0x42a46b)
    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xbd994)
    #2 nuraft::raft_server::raft_server(nuraft::context*, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/raft_server.cxx:237:9 (calc_server+0x52ce67)
    #3 void __gnu_cxx::new_allocator<nuraft::raft_server>::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/ext/new_allocator.h:136:23 (calc_server+0x527cb0)
    #4 void std::allocator_traits<std::allocator<nuraft::raft_server> >::construct<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>&, nuraft::raft_server*, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/alloc_traits.h:475:8 (calc_server+0x527cb0)
    #5 std::_Sp_counted_ptr_inplace<nuraft::raft_server, std::allocator<nuraft::raft_server>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:526:4 (calc_server+0x527cb0)
    #6 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, nuraft::raft_server*, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:637:18 (calc_server+0x527cb0)
    #7 std::__shared_ptr<nuraft::raft_server, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr_base.h:1294:14 (calc_server+0x527cb0)
    #8 std::shared_ptr<nuraft::raft_server>::shared_ptr<std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::_Sp_make_shared_tag, std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:344:4 (calc_server+0x524f3e)
    #9 std::shared_ptr<nuraft::raft_server> std::allocate_shared<nuraft::raft_server, std::allocator<nuraft::raft_server>, nuraft::context*&, nuraft::raft_server::init_options const&>(std::allocator<nuraft::raft_server> const&, nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:690:14 (calc_server+0x524f3e)
    #10 std::shared_ptr<nuraft::raft_server> std::make_shared<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/shared_ptr.h:706:14 (calc_server+0x524f3e)
    #11 std::shared_ptr<nuraft::raft_server> nuraft::cs_new<nuraft::raft_server, nuraft::context*&, nuraft::raft_server::init_options const&>(nuraft::context*&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/include/libnuraft/ptr.hxx:36:12 (calc_server+0x524f3e)
    #12 nuraft::raft_launcher::init(std::shared_ptr<nuraft::state_machine>, std::shared_ptr<nuraft::state_mgr>, std::shared_ptr<nuraft::logger>, int, nuraft::asio_service_options const&, nuraft::raft_params const&, nuraft::raft_server::init_options const&) /home/zyh/NuRaft/src/launcher.cxx:52:22 (calc_server+0x524f3e)
    #13 calc_server::init_raft(std::shared_ptr<nuraft::state_machine>) /home/zyh/NuRaft/examples/example_common.hxx:192:44 (calc_server+0x4bfdc8)
    #14 main /home/zyh/NuRaft/examples/calculator/calc_server.cxx:213:5 (calc_server+0x4c888a)

SUMMARY: ThreadSanitizer: data race (/home/zyh/NuRaft/build/examples/calc_server+0x434697) in memcpy
==================
failed: -2, 3.0 s
[32mcalc 1> [0mmy server id: 1
leader id: 1
Raft log range: 1 - 5
last committed index: 2
state machine value: 0
[32mcalc 1> [0mop=set!
failed: -2, 3.0 s
[32mcalc 1> [0mmy server id: 1
leader id: 1
Raft log range: 1 - 6
last committed index: 2
state machine value: 0
[32mcalc 1> [0mmy server id: 1
leader id: 1
Raft log range: 1 - 6
last committed index: 2
state machine value: 0
[32mcalc 1> [0mmy server id: 1
leader id: 1
Raft log range: 1 - 6
last committed index: 2
state machine value: 0
[32mcalc 1> [0mmy server id: 1
leader id: 1
Raft log range: 1 - 6
last committed index: 2
state machine value: 0
[32mcalc 1> [0mop=set!
failed: -2, 3.0 s
[32mcalc 1> [0mmy server id: 1
leader id: 1
Raft log range: 1 - 7
last committed index: 2
state machine value: 0
[32mcalc 1> [0mop=set!
failed: -2, 3.0 s
[32mcalc 1> [0mop=set!
