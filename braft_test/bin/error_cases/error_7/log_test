Reading random file (null)
spliting files...
Reading random file random.txt
normal_operator_size = 4
normal operator run count = 2
critical_operator_size = 3
critical_operator run count = 2
[1;31mrunning test case 11[0m
start nodes....
node 0 start command is : /home/zyh/braft/example/atomic/atomic_server -reuse_addr -ip=127.0.1.1 -reuse_port -election_timeout_ms=200 -port=8300 -conf=127.0.1.1:8300:0,127.0.1.1:8301:0,127.0.1.1:8302:0,127.0.1.1:8303:0,127.0.1.1:8304:0, -data_path=./data0
node 1 start command is : /home/zyh/braft/example/atomic/atomic_server -reuse_addr -ip=127.0.1.1 -reuse_port -election_timeout_ms=200 -port=8301 -conf=127.0.1.1:8300:0,127.0.1.1:8301:0,127.0.1.1:8302:0,127.0.1.1:8303:0,127.0.1.1:8304:0, -data_path=./data1
node 2 start command is : /home/zyh/braft/example/atomic/atomic_server -reuse_addr -ip=127.0.1.1 -reuse_port -election_timeout_ms=200 -port=8302 -conf=127.0.1.1:8300:0,127.0.1.1:8301:0,127.0.1.1:8302:0,127.0.1.1:8303:0,127.0.1.1:8304:0, -data_path=./data2
node 3 start command is : /home/zyh/braft/example/atomic/atomic_server -reuse_addr -ip=127.0.1.1 -reuse_port -election_timeout_ms=200 -port=8303 -conf=127.0.1.1:8300:0,127.0.1.1:8301:0,127.0.1.1:8302:0,127.0.1.1:8303:0,127.0.1.1:8304:0, -data_path=./data3
node 4 start command is : /home/zyh/braft/example/atomic/atomic_server -reuse_addr -ip=127.0.1.1 -reuse_port -election_timeout_ms=200 -port=8304 -conf=127.0.1.1:8300:0,127.0.1.1:8301:0,127.0.1.1:8302:0,127.0.1.1:8303:0,127.0.1.1:8304:0, -data_path=./data4
Run init operator
timeout 3 /home/zyh/braft/example/atomic/atomic_test -conf=127.0.1.1:8300:0,127.0.1.1:8301:0,127.0.1.1:8302:0,127.0.1.1:8303:0,127.0.1.1:8304:0, -atomic_op=get
W1020 17:36:39.637642  7086 /home/zyh/braft/example/atomic/test.cpp:43] Fail to refresh_leader : [127.0.1.1:8300:0] [E111]Fail to connect Socket{id=0 addr=127.0.1.1:8300} (0x0x631000014800): Connection refused [R1][E112]Not connected to 127.0.1.1:8300 yet, server_id=0 [R2][E112]Not connected to 127.0.1.1:8300 yet, server_id=0 [R3][E112]Not connected to 127.0.1.1:8300 yet, server_id=0, [127.0.1.1:8301:0] [E111]Fail to connect Socket{id=8589934592 addr=127.0.1.1:8301} (0x0x631000014800): Connection refused [R1][E112]Not connected to 127.0.1.1:8301 yet, server_id=8589934592 [R2][E112]Not connected to 127.0.1.1:8301 yet, server_id=8589934592 [R3][E112]Not connected to 127.0.1.1:8301 yet, server_id=8589934592, [127.0.1.1:8302:0] [E111]Fail to connect Socket{id=17179869184 addr=127.0.1.1:8302} (0x0x631000014800): Connection refused [R1][E112]Not connected to 127.0.1.1:8302 yet, server_id=17179869184 [R2][E112]Not connected to 127.0.1.1:8302 yet, server_id=17179869184 [R3][E112]Not connected to 127.0.1.1:8302 yet, server_id=17179869184, [127.0.1.1:8303:0] [E111]Fail to connect Socket{id=25769803776 addr=127.0.1.1:8303} (0x0x631000014800): Connection refused [R1][E112]Not connected to 127.0.1.1:8303 yet, server_id=25769803776 [R2][E112]Not connected to 127.0.1.1:8303 yet, server_id=25769803776 [R3][E112]Not connected to 127.0.1.1:8303 yet, server_id=25769803776, [127.0.1.1:8304:0] [E111]Fail to connect Socket{id=34359738368 addr=127.0.1.1:8304} (0x0x631000014800): Connection refused [R1][E112]Not connected to 127.0.1.1:8304 yet, server_id=34359738368 [R2][E112]Not connected to 127.0.1.1:8304 yet, server_id=34359738368 [R3][E112]Not connected to 127.0.1.1:8304 yet, server_id=34359738368
client operator got timeout
running operator AtomicTestCas
timeout 3 /home/zyh/braft/example/atomic/atomic_test -conf=127.0.1.1:8300:0,127.0.1.1:8301:0,127.0.1.1:8302:0,127.0.1.1:8303:0,127.0.1.1:8304:0, -atomic_op=cas -atomic_val=3310184611 -atomic_new_val=295642403
client operator got timeout
running operator AtomicTestSet
timeout 3 /home/zyh/braft/example/atomic/atomic_test -conf=127.0.1.1:8300:0,127.0.1.1:8301:0,127.0.1.1:8302:0,127.0.1.1:8303:0,127.0.1.1:8304:0, -atomic_op=set -atomic_val=1311950085
client operator got timeout
running operator RandomKill
running operator AtomicTestCas
timeout 3 /home/zyh/braft/example/atomic/atomic_test -conf=127.0.1.1:8300:0,127.0.1.1:8301:0,127.0.1.1:8302:0,127.0.1.1:8303:0,127.0.1.1:8304:0, -atomic_op=cas -atomic_val=2575139917 -atomic_new_val=1029571777
client operator got timeout
running operator AtomicTestGet
timeout 3 /home/zyh/braft/example/atomic/atomic_test -conf=127.0.1.1:8300:0,127.0.1.1:8301:0,127.0.1.1:8302:0,127.0.1.1:8303:0,127.0.1.1:8304:0, -atomic_op=get
client operator got timeout
running operator NoopOperator
do nothing
executing command `echo do nothing`
running operator AtomicTestCas
timeout 3 /home/zyh/braft/example/atomic/atomic_test -conf=127.0.1.1:8300:0,127.0.1.1:8301:0,127.0.1.1:8302:0,127.0.1.1:8303:0,127.0.1.1:8304:0, -atomic_op=cas -atomic_val=2229755807 -atomic_new_val=1270302207
client operator got timeout
running operator AtomicTestSet
timeout 3 /home/zyh/braft/example/atomic/atomic_test -conf=127.0.1.1:8300:0,127.0.1.1:8301:0,127.0.1.1:8302:0,127.0.1.1:8303:0,127.0.1.1:8304:0, -atomic_op=set -atomic_val=104500217
client operator got timeout
[33mYou are running in a fuzzing environment[0m
Fuzzing is stopped, now we run some normal operators to see whether it works as usual.
running operator AtomicTestSet
timeout 3 /home/zyh/braft/example/atomic/atomic_test -conf=127.0.1.1:8300:0,127.0.1.1:8301:0,127.0.1.1:8302:0,127.0.1.1:8303:0,127.0.1.1:8304:0, -atomic_op=set -atomic_val=4141078673
W1020 17:37:21.319539  7290 /home/zyh/braft/example/atomic/test.cpp:104] Fail to refresh_leader : [127.0.1.1:8300:0] [E110]Fail to connect Socket{id=0 addr=127.0.1.1:8300} (0x0x631000014800): Connection timed out [R1][E112]Not connected to 127.0.1.1:8300 yet, server_id=0 [R2][E112]Not connected to 127.0.1.1:8300 yet, server_id=0 [R3][E112]Not connected to 127.0.1.1:8300 yet, server_id=0, [127.0.1.1:8301:0] [E110]Fail to connect Socket{id=8589934592 addr=127.0.1.1:8301} (0x0x631000014800): Connection timed out [R1][E112]Not connected to 127.0.1.1:8301 yet, server_id=8589934592 [R2][E112]Not connected to 127.0.1.1:8301 yet, server_id=8589934592 [R3][E112]Not connected to 127.0.1.1:8301 yet, server_id=8589934592, [127.0.1.1:8302:0] [E11][127.0.1.1:8302][E11]Unknown leader, [127.0.1.1:8303:0] [E110]Fail to connect Socket{id=25769803776 addr=127.0.1.1:8303:55046} (0x0x631000014800): Connection timed out [R1][E112]Not connected to 127.0.1.1:8303 yet, server_id=25769803776 [R2][E112]Not connected to 127.0.1.1:8303 yet, server_id=25769803776 [R3][E112]Not connected to 127.0.1.1:8303 yet, server_id=25769803776, [127.0.1.1:8304:0] [E111]Fail to connect Socket{id=34359738368 addr=127.0.1.1:8304:55046} (0x0x631000014800): Connection refused [R1][E112]Not connected to 127.0.1.1:8304 yet, server_id=34359738368 [R2][E112]Not connected to 127.0.1.1:8304 yet, server_id=34359738368 [R3][E112]Not connected to 127.0.1.1:8304 yet, server_id=34359738368
client operator got timeout
running operator AtomicTestSet failed after fuzzing
running operator AtomicTestGet
timeout 3 /home/zyh/braft/example/atomic/atomic_test -conf=127.0.1.1:8300:0,127.0.1.1:8301:0,127.0.1.1:8302:0,127.0.1.1:8303:0,127.0.1.1:8304:0, -atomic_op=get
W1020 17:37:24.330104  7303 /home/zyh/braft/example/atomic/test.cpp:43] Fail to refresh_leader : [127.0.1.1:8300:0] [E110]Fail to connect Socket{id=0 addr=127.0.1.1:8300} (0x0x631000014800): Connection timed out [R1][E112]Not connected to 127.0.1.1:8300 yet, server_id=0 [R2][E112]Not connected to 127.0.1.1:8300 yet, server_id=0 [R3][E112]Not connected to 127.0.1.1:8300 yet, server_id=0, [127.0.1.1:8301:0] [E110]Fail to connect Socket{id=8589934592 addr=127.0.1.1:8301} (0x0x631000014800): Connection timed out [R1][E112]Not connected to 127.0.1.1:8301 yet, server_id=8589934592 [R2][E112]Not connected to 127.0.1.1:8301 yet, server_id=8589934592 [R3][E112]Not connected to 127.0.1.1:8301 yet, server_id=8589934592, [127.0.1.1:8302:0] [E11][127.0.1.1:8302][E11]Unknown leader, [127.0.1.1:8303:0] [E110]Fail to connect Socket{id=25769803776 addr=127.0.1.1:8303:55182} (0x0x631000014800): Connection timed out [R1][E112]Not connected to 127.0.1.1:8303 yet, server_id=25769803776 [R2][E112]Not connected to 127.0.1.1:8303 yet, server_id=25769803776 [R3][E112]Not connected to 127.0.1.1:8303 yet, server_id=25769803776, [127.0.1.1:8304:0] [E111]Fail to connect Socket{id=34359738368 addr=127.0.1.1:8304:55182} (0x0x631000014800): Connection refused [R1][E112]Not connected to 127.0.1.1:8304 yet, server_id=34359738368 [R2][E112]Not connected to 127.0.1.1:8304 yet, server_id=34359738368 [R3][E112]Not connected to 127.0.1.1:8304 yet, server_id=34359738368
client operator got timeout
running operator AtomicTestGet failed after fuzzing
[1;31mall normal operators after fuzzing failed! :([0m
stopping...
running operator AtomicTestSet
timeout 3 /home/zyh/braft/example/atomic/atomic_test -conf=127.0.1.1:8300:0,127.0.1.1:8301:0,127.0.1.1:8302:0,127.0.1.1:8303:0,127.0.1.1:8304:0, -atomic_op=set -atomic_val=3313677017
W1020 17:37:26.737257  7317 /home/zyh/braft/example/atomic/test.cpp:104] Fail to refresh_leader : [127.0.1.1:8300:0] [E111]Fail to connect Socket{id=0 addr=127.0.1.1:8300} (0x0x631000014800): Connection refused [R1][E112]Not connected to 127.0.1.1:8300 yet, server_id=0 [R2][E112]Not connected to 127.0.1.1:8300 yet, server_id=0 [R3][E112]Not connected to 127.0.1.1:8300 yet, server_id=0, [127.0.1.1:8301:0] [E111]Fail to connect Socket{id=8589934592 addr=127.0.1.1:8301} (0x0x631000014800): Connection refused [R1][E112]Not connected to 127.0.1.1:8301 yet, server_id=8589934592 [R2][E112]Not connected to 127.0.1.1:8301 yet, server_id=8589934592 [R3][E112]Not connected to 127.0.1.1:8301 yet, server_id=8589934592, [127.0.1.1:8302:0] [E111]Fail to connect Socket{id=17179869184 addr=127.0.1.1:8302} (0x0x631000014800): Connection refused [R1][E112]Not connected to 127.0.1.1:8302 yet, server_id=17179869184 [R2][E112]Not connected to 127.0.1.1:8302 yet, server_id=17179869184 [R3][E112]Not connected to 127.0.1.1:8302 yet, server_id=17179869184, [127.0.1.1:8303:0] [E111]Fail to connect Socket{id=25769803776 addr=127.0.1.1:8303} (0x0x631000014800): Connection refused [R1][E112]Not connected to 127.0.1.1:8303 yet, server_id=25769803776 [R2][E112]Not connected to 127.0.1.1:8303 yet, server_id=25769803776 [R3][E112]Not connected to 127.0.1.1:8303 yet, server_id=25769803776, [127.0.1.1:8304:0] [E111]Fail to connect Socket{id=34359738368 addr=127.0.1.1:8304} (0x0x631000014800): Connection refused [R1][E112]Not connected to 127.0.1.1:8304 yet, server_id=34359738368 [R2][E112]Not connected to 127.0.1.1:8304 yet, server_id=34359738368 [R3][E112]Not connected to 127.0.1.1:8304 yet, server_id=34359738368
client operator got timeout
running operator AtomicTestSet
timeout 3 /home/zyh/braft/example/atomic/atomic_test -conf=127.0.1.1:8300:0,127.0.1.1:8301:0,127.0.1.1:8302:0,127.0.1.1:8303:0,127.0.1.1:8304:0, -atomic_op=set -atomic_val=1688868169
W1020 17:37:29.740214  7331 /home/zyh/braft/example/atomic/test.cpp:104] Fail to refresh_leader : [127.0.1.1:8300:0] [E111]Fail to connect Socket{id=0 addr=127.0.1.1:8300} (0x0x631000014800): Connection refused [R1][E112]Not connected to 127.0.1.1:8300 yet, server_id=0 [R2][E112]Not connected to 127.0.1.1:8300 yet, server_id=0 [R3][E112]Not connected to 127.0.1.1:8300 yet, server_id=0, [127.0.1.1:8301:0] [E111]Fail to connect Socket{id=8589934592 addr=127.0.1.1:8301} (0x0x631000014800): Connection refused [R1][E112]Not connected to 127.0.1.1:8301 yet, server_id=8589934592 [R2][E112]Not connected to 127.0.1.1:8301 yet, server_id=8589934592 [R3][E112]Not connected to 127.0.1.1:8301 yet, server_id=8589934592, [127.0.1.1:8302:0] [E111]Fail to connect Socket{id=17179869184 addr=127.0.1.1:8302} (0x0x631000014800): Connection refused [R1][E112]Not connected to 127.0.1.1:8302 yet, server_id=17179869184 [R2][E112]Not connected to 127.0.1.1:8302 yet, server_id=17179869184 [R3][E112]Not connected to 127.0.1.1:8302 yet, server_id=17179869184, [127.0.1.1:8303:0] [E111]Fail to connect Socket{id=25769803776 addr=127.0.1.1:8303} (0x0x631000014800): Connection refused [R1][E112]Not connected to 127.0.1.1:8303 yet, server_id=25769803776 [R2][E112]Not connected to 127.0.1.1:8303 yet, server_id=25769803776 [R3][E112]Not connected to 127.0.1.1:8303 yet, server_id=25769803776, [127.0.1.1:8304:0] [E111]Fail to connect Socket{id=34359738368 addr=127.0.1.1:8304} (0x0x631000014800): Connection refused [R1][E112]Not connected to 127.0.1.1:8304 yet, server_id=34359738368 [R2][E112]Not connected to 127.0.1.1:8304 yet, server_id=34359738368 [R3][E112]Not connected to 127.0.1.1:8304 yet, server_id=34359738368
client operator got timeout
atomic_server: no process found
backup test cases
/home/zyh/distributed-system-test/braft_test/bin
12
Find all normal operators after fuzzing failed
