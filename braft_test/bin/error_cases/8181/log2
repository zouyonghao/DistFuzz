I0417 12:13:18.187785 108313 /home/zyh/incubator-brpc/src/brpc/server.cpp:1046] Server[braft::RaftStatImpl+braft::FileServiceImpl+braft::RaftServiceImpl+braft::CliServiceImpl+example::AtomicServiceImpl] is serving on port=8303.
I0417 12:13:18.188545 108313 /home/zyh/incubator-brpc/src/brpc/server.cpp:1049] Check out http://virtual:8303 in web browser.
I0417 12:13:18.194094 108313 /home/zyh/braft/src/braft/log.cpp:674] Use crc32c as the checksum type of appending entries
W0417 12:13:18.194236 108313 /home/zyh/braft/src/braft/protobuf_file.cpp:91] open file failed, path: ./data2/log/log_meta: FILE_ERROR_NOT_FOUND
W0417 12:13:18.194271 108313 /home/zyh/braft/src/braft/log.cpp:685] ./data2/log is empty
I0417 12:13:18.200464 108313 /home/zyh/braft/src/braft/log.cpp:1136] log save_meta ./data2/log/log_meta first_log_index: 1 time: 6093
W0417 12:13:18.200584 108313 /home/zyh/braft/src/braft/protobuf_file.cpp:91] open file failed, path: ./data2/raft_meta/raft_meta: FILE_ERROR_NOT_FOUND
I0417 12:13:18.200689 108313 /home/zyh/braft/src/braft/raft_meta.cpp:521] Loaded single stable meta, path ./data2/raft_meta term 1 votedfor 0.0.0.0:0:0 time: 33
I0417 12:13:18.200854 108313 /home/zyh/braft/src/braft/snapshot.cpp:460] Deleting ./data2/snapshot/temp
W0417 12:13:18.200974 108313 /home/zyh/braft/src/braft/protobuf_file.cpp:91] open file failed, path: ./data2/raft_meta/raft_meta: FILE_ERROR_NOT_FOUND
I0417 12:13:18.200997 108313 /home/zyh/braft/src/braft/raft_meta.cpp:521] Loaded single stable meta, path ./data2/raft_meta term 1 votedfor 0.0.0.0:0:0 time: 25
I0417 12:13:18.201063 108313 /home/zyh/braft/src/braft/node.cpp:587] node Atomic:127.0.1.1:8303:0 init, term: 1 last_log_id: (index=0,term=0) conf: 127.0.1.1:8303:0,127.0.1.1:8304:0,127.0.1.1:8305:0 old_conf: 
I0417 12:13:18.201143 108313 /home/zyh/braft/src/braft/node.cpp:121] random_timeout function changed!
I0417 12:13:18.201168 108313 /home/zyh/braft/src/braft/node.cpp:129] node2 got timeout value: 5155
I0417 12:13:18.201460 108313 /home/zyh/braft/example/atomic/server.cpp:518] Atomic service is running on 0.0.0.0:8303
I0417 12:13:23.357383 108351 /home/zyh/braft/src/braft/node.cpp:121] random_timeout function changed!
I0417 12:13:23.357519 108351 /home/zyh/braft/src/braft/node.cpp:129] node2 got timeout value: 5001
I0417 12:13:27.435811 108440 /home/zyh/incubator-brpc/src/brpc/server.cpp:1046] Server[braft::RaftStatImpl+braft::FileServiceImpl+braft::RaftServiceImpl+braft::CliServiceImpl+example::AtomicServiceImpl] is serving on port=8303.
I0417 12:13:27.436604 108440 /home/zyh/incubator-brpc/src/brpc/server.cpp:1049] Check out http://virtual:8303 in web browser.
I0417 12:13:27.438632 108440 /home/zyh/braft/src/braft/log.cpp:674] Use crc32c as the checksum type of appending entries
I0417 12:13:27.438772 108440 /home/zyh/braft/src/braft/log.cpp:1158] log load_meta ./data2/log/log_meta first_log_index: 1 time: 101
W0417 12:13:27.438907 108440 /home/zyh/braft/src/braft/protobuf_file.cpp:91] open file failed, path: ./data2/raft_meta/raft_meta: FILE_ERROR_NOT_FOUND
I0417 12:13:27.439004 108440 /home/zyh/braft/src/braft/raft_meta.cpp:521] Loaded single stable meta, path ./data2/raft_meta term 1 votedfor 0.0.0.0:0:0 time: 35
I0417 12:13:27.439141 108440 /home/zyh/braft/src/braft/snapshot.cpp:460] Deleting ./data2/snapshot/temp
W0417 12:13:27.439264 108440 /home/zyh/braft/src/braft/protobuf_file.cpp:91] open file failed, path: ./data2/raft_meta/raft_meta: FILE_ERROR_NOT_FOUND
I0417 12:13:27.439289 108440 /home/zyh/braft/src/braft/raft_meta.cpp:521] Loaded single stable meta, path ./data2/raft_meta term 1 votedfor 0.0.0.0:0:0 time: 25
I0417 12:13:27.439353 108440 /home/zyh/braft/src/braft/node.cpp:587] node Atomic:127.0.1.1:8303:0 init, term: 1 last_log_id: (index=0,term=0) conf: 127.0.1.1:8303:0,127.0.1.1:8304:0,127.0.1.1:8305:0 old_conf: 
I0417 12:13:27.439437 108440 /home/zyh/braft/src/braft/node.cpp:121] random_timeout function changed!
I0417 12:13:27.439454 108440 /home/zyh/braft/src/braft/node.cpp:129] node2 got timeout value: 5115
I0417 12:13:27.439711 108440 /home/zyh/braft/example/atomic/server.cpp:518] Atomic service is running on 0.0.0.0:8303
I0417 12:13:28.359913 108338 /home/zyh/braft/src/braft/node.cpp:1495] node Atomic:127.0.1.1:8303:0 term 1 start pre_vote
I0417 12:13:28.363010 108338 /home/zyh/braft/src/braft/node.cpp:121] random_timeout function changed!
I0417 12:13:28.363090 108338 /home/zyh/braft/src/braft/node.cpp:129] node2 got timeout value: 5206
==108313==WARNING: ASan is ignoring requested __asan_handle_no_return: stack top: 0x7fcbe6629d00; bottom 0x7fcbe2528000; size: 0x000004101d00 (68164864)
False positive error reports may follow
For details see https://github.com/google/sanitizers/issues/189
I0417 12:13:28.412616 108347 /home/zyh/braft/src/braft/raft_meta.cpp:546] Saved single stable meta, path ./data2/raft_meta term 2 votedfor 0.0.0.0:0:0 time: 3165
I0417 12:13:28.414200 108347 /home/zyh/braft/example/atomic/server.cpp:321] Node start following { leader_id=127.0.1.1:8305:0, term=2, status=Raft node receives message from new leader with higher term.}
I0417 12:13:28.426858 108347 /home/zyh/braft/src/braft/log.cpp:108] Created new segment `./data2/log/log_inprogress_00000000000000000001' with fd=14
I0417 12:13:28.427709 108347 /home/zyh/braft/example/atomic/server.cpp:315] Configuration of this group is 127.0.1.1:8303:0,127.0.1.1:8304:0,127.0.1.1:8305:0
W0417 12:13:28.436897 108351 /home/zyh/braft/src/braft/node.cpp:1413] node Atomic:127.0.1.1:8303:0 received invalid PreVoteResponse from 127.0.1.1:8305:0 ctx_version 2current_ctx_version 4
W0417 12:13:28.454927 108338 /home/zyh/braft/src/braft/node.cpp:1413] node Atomic:127.0.1.1:8303:0 received invalid PreVoteResponse from 127.0.1.1:8304:0 ctx_version 2current_ctx_version 4
I0417 12:13:30.753639 108328 /home/zyh/braft/src/braft/node.cpp:922] node Atomic:127.0.1.1:8303:0 starts to do snapshot
I0417 12:13:30.758072 108328 /home/zyh/braft/src/braft/snapshot.cpp:638] Deleting ./data2/snapshot/snapshot_00000000000000000001
I0417 12:13:30.758250 108328 /home/zyh/braft/src/braft/snapshot.cpp:644] Renaming ./data2/snapshot/temp to ./data2/snapshot/snapshot_00000000000000000001
I0417 12:13:30.758489 108328 /home/zyh/braft/src/braft/snapshot_executor.cpp:234] node Atomic:127.0.1.1:8303:0 snapshot_save_done, last_included_index=1 last_included_term=2
I0417 12:13:32.555784 108476 /home/zyh/braft/src/braft/node.cpp:121] random_timeout function changed!
I0417 12:13:32.555990 108476 /home/zyh/braft/src/braft/node.cpp:129] node2 got timeout value: 5232
I0417 12:13:33.570815 108338 /home/zyh/braft/src/braft/node.cpp:121] random_timeout function changed!
I0417 12:13:33.570928 108338 /home/zyh/braft/src/braft/node.cpp:129] node2 got timeout value: 5123
I0417 12:13:37.713331 108472 /home/zyh/braft/src/braft/node.cpp:2009] node Atomic:127.0.1.1:8303:0 received PreVote from 127.0.1.1:8305:0 in term 2 current_term 1 granted 1
I0417 12:13:37.789235 108466 /home/zyh/braft/src/braft/node.cpp:1495] node Atomic:127.0.1.1:8303:0 term 1 start pre_vote
I0417 12:13:37.791426 108466 /home/zyh/braft/src/braft/node.cpp:121] random_timeout function changed!
I0417 12:13:37.791528 108466 /home/zyh/braft/src/braft/node.cpp:129] node2 got timeout value: 5139
==108440==WARNING: ASan is ignoring requested __asan_handle_no_return: stack top: 0x7fb011a03d00; bottom 0x7fb00d610000; size: 0x0000043f3d00 (71253248)
False positive error reports may follow
For details see https://github.com/google/sanitizers/issues/189
I0417 12:13:38.694357 108328 /home/zyh/braft/src/braft/node.cpp:121] random_timeout function changed!
I0417 12:13:38.694390 108328 /home/zyh/braft/src/braft/node.cpp:129] node2 got timeout value: 5136
I0417 12:13:42.462040 108572 /home/zyh/incubator-brpc/src/brpc/server.cpp:1046] Server[braft::RaftStatImpl+braft::FileServiceImpl+braft::RaftServiceImpl+braft::CliServiceImpl+example::AtomicServiceImpl] is serving on port=8303.
I0417 12:13:42.462817 108572 /home/zyh/incubator-brpc/src/brpc/server.cpp:1049] Check out http://virtual:8303 in web browser.
I0417 12:13:42.465014 108572 /home/zyh/braft/src/braft/log.cpp:674] Use crc32c as the checksum type of appending entries
I0417 12:13:42.465341 108572 /home/zyh/braft/src/braft/log.cpp:1158] log load_meta ./data2/log/log_meta first_log_index: 1 time: 194
I0417 12:13:42.465613 108572 /home/zyh/braft/src/braft/log.cpp:1098] load open segment, path: ./data2/log first_index: 1
I0417 12:13:42.466150 108572 /home/zyh/braft/src/braft/raft_meta.cpp:521] Loaded single stable meta, path ./data2/raft_meta term 2 votedfor 0.0.0.0:0:0 time: 47
I0417 12:13:42.466306 108572 /home/zyh/braft/src/braft/snapshot.cpp:460] Deleting ./data2/snapshot/temp
I0417 12:13:42.467657 108586 /home/zyh/braft/example/atomic/server.cpp:315] Configuration of this group is 127.0.1.1:8303:0,127.0.1.1:8304:0,127.0.1.1:8305:0
I0417 12:13:42.468210 108586 /home/zyh/braft/src/braft/snapshot_executor.cpp:264] node Atomic:127.0.1.1:8303:0 snapshot_load_done, last_included_index: 1 last_included_term: 2 peers: "127.0.1.1:8303:0" peers: "127.0.1.1:8304:0" peers: "127.0.1.1:8305:0"
I0417 12:13:42.468648 108572 /home/zyh/braft/src/braft/raft_meta.cpp:521] Loaded single stable meta, path ./data2/raft_meta term 2 votedfor 0.0.0.0:0:0 time: 33
I0417 12:13:42.468716 108572 /home/zyh/braft/src/braft/node.cpp:587] node Atomic:127.0.1.1:8303:0 init, term: 2 last_log_id: (index=1,term=2) conf: 127.0.1.1:8303:0,127.0.1.1:8304:0,127.0.1.1:8305:0 old_conf: 
I0417 12:13:42.468783 108572 /home/zyh/braft/src/braft/node.cpp:121] random_timeout function changed!
I0417 12:13:42.468807 108572 /home/zyh/braft/src/braft/node.cpp:129] node2 got timeout value: 5115
I0417 12:13:42.469479 108572 /home/zyh/braft/example/atomic/server.cpp:518] Atomic service is running on 0.0.0.0:8303
W0417 12:13:42.790258 108476 /home/zyh/braft/src/braft/node.cpp:1475] node Atomic:127.0.1.1:8303:0 request PreVote from 127.0.1.1:8304:0 error: [E1008]Reached timeout=5000ms @127.0.1.1:8304
W0417 12:13:42.791143 108466 /home/zyh/braft/src/braft/node.cpp:1475] node Atomic:127.0.1.1:8303:0 request PreVote from 127.0.1.1:8305:0 error: [E1008]Reached timeout=5000ms @127.0.1.1:8305
I0417 12:13:42.894054 108328 /home/zyh/braft/example/atomic/server.cpp:318] Node stops following { leader_id=127.0.1.1:8305:0, term=2, status=Raft node receives message from new leader with higher term.}
I0417 12:13:42.899783 108347 /home/zyh/braft/src/braft/raft_meta.cpp:546] Saved single stable meta, path ./data2/raft_meta term 3 votedfor 0.0.0.0:0:0 time: 5777
I0417 12:13:42.899849 108338 /home/zyh/braft/example/atomic/server.cpp:321] Node start following { leader_id=127.0.1.1:8305:0, term=3, status=Raft node receives message from new leader with higher term.}
I0417 12:13:42.910326 108351 /home/zyh/braft/src/braft/node.cpp:2009] node Atomic:127.0.1.1:8303:0 received PreVote from 127.0.1.1:8305:0 in term 3 current_term 3 granted 0
W0417 12:13:42.913046 108351 /home/zyh/braft/src/braft/log_manager.cpp:358] Received entries of which the last_log=1 is not greater than _applied_index=1, return immediately with nothing changed
I0417 12:13:42.932597 108466 /home/zyh/braft/src/braft/node.cpp:1495] node Atomic:127.0.1.1:8303:0 term 1 start pre_vote
I0417 12:13:42.932830 108466 /home/zyh/braft/src/braft/node.cpp:121] random_timeout function changed!
I0417 12:13:42.932847 108466 /home/zyh/braft/src/braft/node.cpp:129] node2 got timeout value: 5001
W0417 12:13:42.957610 108338 /home/zyh/braft/src/braft/node.cpp:2317] node Atomic:127.0.1.1:8303:0 reject term_unmatched AppendEntries from 127.0.1.1:8305:0 in term 3 prev_log_index 1 prev_log_term 3 local_prev_log_term 2 last_log_index 1 entries_size 1 from_append_entries_cache: 0
W0417 12:13:42.966660 108460 /home/zyh/braft/src/braft/node.cpp:1436] node Atomic:127.0.1.1:8303:0 received invalid PreVoteResponse from 127.0.1.1:8304:0 term 3 expect 1
I0417 12:13:42.968238 108460 /home/zyh/braft/src/braft/raft_meta.cpp:546] Saved single stable meta, path ./data2/raft_meta term 3 votedfor 0.0.0.0:0:0 time: 1419
F0417 12:13:43.014115 108347 /home/zyh/braft/src/braft/log_manager.cpp:310] Can't truncate logs before _applied_id=1, last_log_kept=0
F0417 12:13:43.043589 108347 /home/zyh/braft/src/braft/configuration_manager.cpp:24] Check failed: false. Did you forget to call truncate_suffix before  the last log index goes back
#0 0x000000b76fd0 logging::LogMessage::~LogMessage()
#1 0x000000b56111 braft::ConfigurationManager::add()
#2 0x00000092cd43 braft::LogManager::append_entries()
#3 0x0000009cc7d4 braft::NodeImpl::handle_append_entries_request()
#4 0x000000a406e1 braft::RaftServiceImpl::append_entries()
#5 0x0000008907ca braft::RaftService::CallMethod()
#6 0x000000bfb833 brpc::policy::ProcessRpcRequest()
#7 0x000000bef587 brpc::ProcessInputMessage()
#8 0x000000bf0442 brpc::InputMessenger::OnNewMessages()
#9 0x000000cb3dfd brpc::Socket::ProcessEvent()
#10 0x000000bb575f bthread::TaskGroup::task_runner()
#11 0x000000d4b051 bthread_make_fcontext

F0417 12:13:43.043766 108347 /home/zyh/braft/src/braft/log.cpp:720] There's gap between appending entries and _last_log_index path: ./data2/log
E0417 12:13:43.043789 108347 /home/zyh/braft/src/braft/log_manager.cpp:464] Fail to append_entries, nappent=-1, to_append=2
E0417 12:13:43.043896 108328 /home/zyh/braft/example/atomic/server.cpp:312] Met raft error {type=LogError, error_code=5, error_text=`Fail to append entries'}
W0417 12:13:43.043948 108328 /home/zyh/braft/src/braft/node.cpp:1275] node Atomic:127.0.1.1:8303:0 got error={type=LogError, error_code=5, error_text=`Fail to append entries'}
I0417 12:13:43.044006 108328 /home/zyh/braft/example/atomic/server.cpp:318] Node stops following { leader_id=127.0.1.1:8305:0, term=3, status=Raft node(leader or candidate) is in error.}
W0417 12:13:43.400260 108351 /home/zyh/braft/src/braft/node.cpp:2222] node Atomic:127.0.1.1:8303:0 is not in active state current_term 3 state ERROR
I0417 12:13:43.830908 108347 /home/zyh/braft/src/braft/node.cpp:121] random_timeout function changed!
I0417 12:13:43.831023 108347 /home/zyh/braft/src/braft/node.cpp:129] node2 got timeout value: 5000
W0417 12:13:46.708896 108328 /home/zyh/braft/src/braft/node.cpp:1972] node Atomic:127.0.1.1:8303:0 is not in active state current_term 3 state ERROR
W0417 12:13:46.911754 108351 /home/zyh/braft/src/braft/node.cpp:2222] node Atomic:127.0.1.1:8303:0 is not in active state current_term 3 state ERROR
I0417 12:13:47.585036 108591 /home/zyh/braft/src/braft/node.cpp:121] random_timeout function changed!
I0417 12:13:47.585160 108591 /home/zyh/braft/src/braft/node.cpp:129] node2 got timeout value: 5232
W0417 12:13:47.933312 108476 /home/zyh/braft/src/braft/node.cpp:1475] node Atomic:127.0.1.1:8303:0 request PreVote from 127.0.1.1:8305:0 error: [E1008]Reached timeout=5000ms @127.0.1.1:8305
I0417 12:13:47.934428 108466 /home/zyh/braft/src/braft/node.cpp:1495] node Atomic:127.0.1.1:8303:0 term 3 start pre_vote
I0417 12:13:47.935924 108466 /home/zyh/braft/src/braft/node.cpp:121] random_timeout function changed!
I0417 12:13:47.936417 108466 /home/zyh/braft/src/braft/node.cpp:129] node2 got timeout value: 5206
I0417 12:13:47.989832 108472 /home/zyh/braft/src/braft/node.cpp:1446] node Atomic:127.0.1.1:8303:0 received PreVoteResponse from 127.0.1.1:8305:0 term 3 granted 0
I0417 12:13:48.832214 108338 /home/zyh/braft/src/braft/node.cpp:121] random_timeout function changed!
I0417 12:13:48.832325 108338 /home/zyh/braft/src/braft/node.cpp:129] node2 got timeout value: 5085
W0417 12:13:50.429817 108347 /home/zyh/braft/src/braft/node.cpp:2222] node Atomic:127.0.1.1:8303:0 is not in active state current_term 3 state ERROR
I0417 12:13:51.888097 108591 /home/zyh/braft/src/braft/node.cpp:2009] node Atomic:127.0.1.1:8303:0 received PreVote from 127.0.1.1:8305:0 in term 4 current_term 2 granted 1
I0417 12:13:51.899368 108472 /home/zyh/braft/src/braft/node.cpp:2049] node Atomic:127.0.1.1:8303:0 received RequestVote from 127.0.1.1:8305:0 in term 4 current_term 3
I0417 12:13:51.910058 108472 /home/zyh/braft/src/braft/raft_meta.cpp:546] Saved single stable meta, path ./data2/raft_meta term 4 votedfor 0.0.0.0:0:0 time: 10269
I0417 12:13:51.922446 108472 /home/zyh/braft/src/braft/raft_meta.cpp:546] Saved single stable meta, path ./data2/raft_meta term 4 votedfor 127.0.1.1:8305:0 time: 12131
I0417 12:13:52.818342 108577 /home/zyh/braft/src/braft/node.cpp:1495] node Atomic:127.0.1.1:8303:0 term 2 start pre_vote
I0417 12:13:52.821048 108577 /home/zyh/braft/src/braft/node.cpp:121] random_timeout function changed!
I0417 12:13:52.821199 108577 /home/zyh/braft/src/braft/node.cpp:129] node2 got timeout value: 5139
==108572==WARNING: ASan is ignoring requested __asan_handle_no_return: stack top: 0x7f5a20968d00; bottom 0x7f5a1acef000; size: 0x000005c79d00 (96967936)
False positive error reports may follow
For details see https://github.com/google/sanitizers/issues/189
W0417 12:13:52.830294 108586 /home/zyh/braft/src/braft/node.cpp:1436] node Atomic:127.0.1.1:8303:0 received invalid PreVoteResponse from 127.0.1.1:8304:0 term 4 expect 2
I0417 12:13:52.833317 108586 /home/zyh/braft/src/braft/raft_meta.cpp:546] Saved single stable meta, path ./data2/raft_meta term 4 votedfor 0.0.0.0:0:0 time: 2631
W0417 12:13:52.935457 108466 /home/zyh/braft/src/braft/node.cpp:1475] node Atomic:127.0.1.1:8303:0 request PreVote from 127.0.1.1:8304:0 error: [E1008]Reached timeout=5000ms @127.0.1.1:8304
I0417 12:13:53.143189 108466 /home/zyh/braft/src/braft/node.cpp:1495] node Atomic:127.0.1.1:8303:0 term 4 start pre_vote
I0417 12:13:53.143523 108466 /home/zyh/braft/src/braft/node.cpp:121] random_timeout function changed!
I0417 12:13:53.143541 108466 /home/zyh/braft/src/braft/node.cpp:129] node2 got timeout value: 5036
I0417 12:13:53.201950 108460 /home/zyh/braft/src/braft/node.cpp:1446] node Atomic:127.0.1.1:8303:0 received PreVoteResponse from 127.0.1.1:8305:0 term 4 granted 0
I0417 12:13:53.205607 108472 /home/zyh/braft/src/braft/node.cpp:1446] node Atomic:127.0.1.1:8303:0 received PreVoteResponse from 127.0.1.1:8304:0 term 4 granted 0
I0417 12:13:55.595941 108476 /home/zyh/braft/src/braft/node.cpp:922] node Atomic:127.0.1.1:8303:0 starts to do snapshot
I0417 12:13:55.596316 108476 /home/zyh/braft/src/braft/snapshot_executor.cpp:154] node Atomic:127.0.1.1:8303:0 the gap between fsm applied index 0 and last_snapshot_index 0 is less than 1, will clear bufferred logs and return success
I0417 12:13:57.140430 108460 /home/zyh/braft/src/braft/node.cpp:2009] node Atomic:127.0.1.1:8303:0 received PreVote from 127.0.1.1:8305:0 in term 5 current_term 4 granted 1
I0417 12:13:57.207273 108460 /home/zyh/braft/src/braft/node.cpp:2049] node Atomic:127.0.1.1:8303:0 received RequestVote from 127.0.1.1:8305:0 in term 5 current_term 4
I0417 12:13:57.209988 108460 /home/zyh/braft/src/braft/raft_meta.cpp:546] Saved single stable meta, path ./data2/raft_meta term 5 votedfor 0.0.0.0:0:0 time: 2538
I0417 12:13:57.219944 108460 /home/zyh/braft/src/braft/raft_meta.cpp:546] Saved single stable meta, path ./data2/raft_meta term 5 votedfor 127.0.1.1:8305:0 time: 9651
W0417 12:13:57.664665 108472 /home/zyh/braft/src/braft/node.cpp:2317] node Atomic:127.0.1.1:8303:0 reject term_unmatched AppendEntries from 127.0.1.1:8305:0 in term 5 prev_log_index 5 prev_log_term 3 local_prev_log_term 0 last_log_index 0 entries_size 0 from_append_entries_cache: 0
I0417 12:13:57.664750 108466 /home/zyh/braft/example/atomic/server.cpp:321] Node start following { leader_id=127.0.1.1:8305:0, term=5, status=Follower receives message from new leader with the same term.}
W0417 12:13:57.821415 108577 /home/zyh/braft/src/braft/node.cpp:1475] node Atomic:127.0.1.1:8303:0 request PreVote from 127.0.1.1:8305:0 error: [E1008]Reached timeout=5000ms @127.0.1.1:8305
I0417 12:13:57.961602 108577 /home/zyh/braft/src/braft/node.cpp:1495] node Atomic:127.0.1.1:8303:0 term 4 start pre_vote
I0417 12:13:57.962966 108577 /home/zyh/braft/src/braft/node.cpp:121] random_timeout function changed!
I0417 12:13:57.963054 108577 /home/zyh/braft/src/braft/node.cpp:129] node2 got timeout value: 5001
W0417 12:13:58.006974 108591 /home/zyh/braft/src/braft/node.cpp:1436] node Atomic:127.0.1.1:8303:0 received invalid PreVoteResponse from 127.0.1.1:8304:0 term 5 expect 4
I0417 12:13:58.010023 108591 /home/zyh/braft/src/braft/raft_meta.cpp:546] Saved single stable meta, path ./data2/raft_meta term 5 votedfor 0.0.0.0:0:0 time: 2817
W0417 12:13:58.029735 108577 /home/zyh/braft/src/braft/node.cpp:1413] node Atomic:127.0.1.1:8303:0 received invalid PreVoteResponse from 127.0.1.1:8305:0 ctx_version 4current_ctx_version 5
I0417 12:13:58.105165 108472 /home/zyh/braft/src/braft/node.cpp:2009] node Atomic:127.0.1.1:8303:0 received PreVote from 127.0.1.1:8305:0 in term 5 current_term 5 granted 1
I0417 12:13:58.180187 108466 /home/zyh/braft/src/braft/node.cpp:121] random_timeout function changed!
I0417 12:13:58.180389 108466 /home/zyh/braft/src/braft/node.cpp:129] node2 got timeout value: 5002
W0417 12:13:58.193252 108460 /home/zyh/braft/src/braft/node.cpp:2317] node Atomic:127.0.1.1:8303:0 reject term_unmatched AppendEntries from 127.0.1.1:8305:0 in term 5 prev_log_index 5 prev_log_term 3 local_prev_log_term 0 last_log_index 0 entries_size 0 from_append_entries_cache: 0
W0417 12:13:58.739155 108472 /home/zyh/braft/src/braft/node.cpp:2317] node Atomic:127.0.1.1:8303:0 reject term_unmatched AppendEntries from 127.0.1.1:8305:0 in term 5 prev_log_index 5 prev_log_term 3 local_prev_log_term 0 last_log_index 0 entries_size 0 from_append_entries_cache: 0
W0417 12:13:59.241938 108460 /home/zyh/braft/src/braft/node.cpp:2317] node Atomic:127.0.1.1:8303:0 reject term_unmatched AppendEntries from 127.0.1.1:8305:0 in term 5 prev_log_index 5 prev_log_term 3 local_prev_log_term 0 last_log_index 0 entries_size 0 from_append_entries_cache: 0
W0417 12:13:59.756105 108472 /home/zyh/braft/src/braft/node.cpp:2317] node Atomic:127.0.1.1:8303:0 reject term_unmatched AppendEntries from 127.0.1.1:8305:0 in term 5 prev_log_index 5 prev_log_term 3 local_prev_log_term 0 last_log_index 0 entries_size 0 from_append_entries_cache: 0
W0417 12:14:00.320136 108460 /home/zyh/braft/src/braft/node.cpp:2317] node Atomic:127.0.1.1:8303:0 reject term_unmatched AppendEntries from 127.0.1.1:8305:0 in term 5 prev_log_index 5 prev_log_term 3 local_prev_log_term 0 last_log_index 0 entries_size 0 from_append_entries_cache: 0
W0417 12:14:00.836724 108472 /home/zyh/braft/src/braft/node.cpp:2317] node Atomic:127.0.1.1:8303:0 reject term_unmatched AppendEntries from 127.0.1.1:8305:0 in term 5 prev_log_index 5 prev_log_term 3 local_prev_log_term 0 last_log_index 0 entries_size 0 from_append_entries_cache: 0
W0417 12:14:01.387249 108460 /home/zyh/braft/src/braft/node.cpp:2317] node Atomic:127.0.1.1:8303:0 reject term_unmatched AppendEntries from 127.0.1.1:8305:0 in term 5 prev_log_index 5 prev_log_term 3 local_prev_log_term 0 last_log_index 0 entries_size 0 from_append_entries_cache: 0
W0417 12:14:01.890070 108472 /home/zyh/braft/src/braft/node.cpp:2317] node Atomic:127.0.1.1:8303:0 reject term_unmatched AppendEntries from 127.0.1.1:8305:0 in term 5 prev_log_index 5 prev_log_term 3 local_prev_log_term 0 last_log_index 0 entries_size 0 from_append_entries_cache: 0
W0417 12:14:02.416285 108460 /home/zyh/braft/src/braft/node.cpp:2317] node Atomic:127.0.1.1:8303:0 reject term_unmatched AppendEntries from 127.0.1.1:8305:0 in term 5 prev_log_index 5 prev_log_term 3 local_prev_log_term 0 last_log_index 0 entries_size 0 from_append_entries_cache: 0
I0417 12:14:02.964926 108577 /home/zyh/braft/src/braft/node.cpp:1495] node Atomic:127.0.1.1:8303:0 term 5 start pre_vote
I0417 12:14:02.966047 108577 /home/zyh/braft/src/braft/node.cpp:121] random_timeout function changed!
I0417 12:14:02.966124 108577 /home/zyh/braft/src/braft/node.cpp:129] node2 got timeout value: 5206
W0417 12:14:02.983546 108472 /home/zyh/braft/src/braft/node.cpp:2317] node Atomic:127.0.1.1:8303:0 reject term_unmatched AppendEntries from 127.0.1.1:8305:0 in term 5 prev_log_index 5 prev_log_term 3 local_prev_log_term 0 last_log_index 0 entries_size 0 from_append_entries_cache: 0
I0417 12:14:03.075932 108586 /home/zyh/braft/src/braft/node.cpp:1446] node Atomic:127.0.1.1:8303:0 received PreVoteResponse from 127.0.1.1:8304:0 term 5 granted 0
I0417 12:14:03.092022 108577 /home/zyh/braft/src/braft/node.cpp:1446] node Atomic:127.0.1.1:8303:0 received PreVoteResponse from 127.0.1.1:8305:0 term 5 granted 0
I0417 12:14:03.327244 108591 /home/zyh/braft/src/braft/node.cpp:2009] node Atomic:127.0.1.1:8303:0 received PreVote from 127.0.1.1:8305:0 in term 6 current_term 5 granted 1
I0417 12:14:04.148993 108591 /home/zyh/braft/src/braft/node.cpp:922] node Atomic:127.0.1.1:8303:0 starts to do snapshot
I0417 12:14:04.149129 108591 /home/zyh/braft/src/braft/snapshot_executor.cpp:154] node Atomic:127.0.1.1:8303:0 the gap between fsm applied index 1 and last_snapshot_index 1 is less than 1, will clear bufferred logs and return success
I0417 12:14:04.150106 108591 /home/zyh/braft/src/braft/log.cpp:1136] log save_meta ./data2/log/log_meta first_log_index: 2 time: 908
I0417 12:14:04.150187 108591 /home/zyh/braft/src/braft/log.cpp:595] Unlinked segment `./data2/log/log_inprogress_00000000000000000001'
I0417 12:14:08.172866 108586 /home/zyh/braft/src/braft/node.cpp:1495] node Atomic:127.0.1.1:8303:0 term 5 start pre_vote
I0417 12:14:08.174081 108586 /home/zyh/braft/src/braft/node.cpp:121] random_timeout function changed!
I0417 12:14:08.174157 108586 /home/zyh/braft/src/braft/node.cpp:129] node2 got timeout value: 5036
I0417 12:14:08.213637 108577 /home/zyh/braft/src/braft/node.cpp:1446] node Atomic:127.0.1.1:8303:0 received PreVoteResponse from 127.0.1.1:8304:0 term 5 granted 0
I0417 12:14:08.426097 108586 /home/zyh/braft/src/braft/node.cpp:2009] node Atomic:127.0.1.1:8303:0 received PreVote from 127.0.1.1:8305:0 in term 6 current_term 5 granted 1
I0417 12:14:08.473566 108591 /home/zyh/braft/src/braft/node.cpp:2049] node Atomic:127.0.1.1:8303:0 received RequestVote from 127.0.1.1:8305:0 in term 6 current_term 5
I0417 12:14:08.480958 108591 /home/zyh/braft/src/braft/raft_meta.cpp:546] Saved single stable meta, path ./data2/raft_meta term 6 votedfor 0.0.0.0:0:0 time: 7325
I0417 12:14:08.490293 108591 /home/zyh/braft/src/braft/raft_meta.cpp:546] Saved single stable meta, path ./data2/raft_meta term 6 votedfor 127.0.1.1:8305:0 time: 9216
I0417 12:14:09.069190 108577 /home/zyh/braft/example/atomic/server.cpp:321] Node start following { leader_id=127.0.1.1:8305:0, term=6, status=Follower receives message from new leader with the same term.}
I0417 12:14:11.415693 108586 /home/zyh/braft/src/braft/node.cpp:2009] node Atomic:127.0.1.1:8303:0 received PreVote from 127.0.1.1:8305:0 in term 6 current_term 6 granted 1
W0417 12:14:13.174395 108591 /home/zyh/braft/src/braft/node.cpp:1475] node Atomic:127.0.1.1:8303:0 request PreVote from 127.0.1.1:8305:0 error: [E1008]Reached timeout=5000ms @127.0.1.1:8305
I0417 12:14:13.212166 108577 /home/zyh/braft/src/braft/node.cpp:121] random_timeout function changed!
I0417 12:14:13.212271 108577 /home/zyh/braft/src/braft/node.cpp:129] node2 got timeout value: 5002
I0417 12:14:13.851110 108577 /home/zyh/braft/example/atomic/server.cpp:318] Node stops following { leader_id=127.0.1.1:8305:0, term=6, status=Raft node receives message from new leader with higher term.}
I0417 12:14:13.856700 108586 /home/zyh/braft/src/braft/raft_meta.cpp:546] Saved single stable meta, path ./data2/raft_meta term 7 votedfor 0.0.0.0:0:0 time: 5857
W0417 12:14:13.857242 108586 /home/zyh/braft/src/braft/node.cpp:2317] node Atomic:127.0.1.1:8303:0 reject term_unmatched AppendEntries from 127.0.1.1:8305:0 in term 7 prev_log_index 6 prev_log_term 5 local_prev_log_term 0 last_log_index 1 entries_size 0 from_append_entries_cache: 0
I0417 12:14:13.857317 108577 /home/zyh/braft/example/atomic/server.cpp:321] Node start following { leader_id=127.0.1.1:8305:0, term=7, status=Raft node receives message from new leader with higher term.}
